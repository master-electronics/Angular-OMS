import"./chunk-F2JRIFI4.js";import"./chunk-ZL6MQR3Z.js";import{a as mt}from"./chunk-XMFOCRFG.js";import"./chunk-JC3J4WKG.js";import{a as nt}from"./chunk-5DKNJ5MR.js";import{a as it}from"./chunk-W6X5OBKE.js";import"./chunk-PTORZITP.js";import"./chunk-N327C62I.js";import{a as st}from"./chunk-E3B4WDOA.js";import{a as lt}from"./chunk-RMIKNTFD.js";import{a as at}from"./chunk-D3FIXZL7.js";import"./chunk-ADHMVREX.js";import{a as et}from"./chunk-IPTX4HSO.js";import{a as rt}from"./chunk-VJKYRYVM.js";import{a as ot}from"./chunk-OQTOI2SX.js";import"./chunk-O3UEHWS5.js";import"./chunk-KSUYRJTQ.js";import{l as tt}from"./chunk-FBU3NLE2.js";import"./chunk-MFWTQF6C.js";import"./chunk-M47XUQY5.js";import"./chunk-YPJKXAYS.js";import"./chunk-I3G2JKLN.js";import"./chunk-LCEARWCQ.js";import"./chunk-4AGTE6D3.js";import"./chunk-5GWOD35Y.js";import{d as Y,e as Z}from"./chunk-POEXBOQJ.js";import"./chunk-MZCJXFXF.js";import{E as J,H as K,I as X,e as E,i as Q,m as q,p as U,t as H}from"./chunk-L3THJMBJ.js";import"./chunk-PLQ7TNCQ.js";import"./chunk-C55YZZU5.js";import"./chunk-YUDS3XHK.js";import{n as G}from"./chunk-MIXZFVL7.js";import"./chunk-FFJ3QZ3H.js";import{k as W}from"./chunk-PJEV5NXI.js";import{A as D,f as R,p as j,q as z,w as A}from"./chunk-GWV5DZOT.js";import{$b as f,Ba as y,C as S,Da as V,Fb as a,Gb as g,Gc as $,H as C,Hc as M,Ia as d,Ja as _,Lc as w,Mc as T,Sb as u,V as N,Vc as P,ac as r,bc as o,cc as b,dc as O,ec as L,gc as x,ka as F,nc as h,pc as s,wc as B,xc as c,zc as p}from"./chunk-N7LPRJLK.js";function dt(n,m){if(n&1){let e=x();r(0,"button",18),h("click",function(i){d(e);let l=s().$implicit,v=s(2);return _(v.removeField(l,i))}),c(1," Delete "),o()}}function _t(n,m){if(n&1){let e=x();r(0,"div")(1,"div",11)(2,"div",12)(3,"div",13)(4,"div",14)(5,"h1"),c(6),o(),r(7,"h1"),c(8),o()(),r(9,"div",15)(10,"h1"),c(11),o(),r(12,"h1"),c(13),o(),r(14,"h1"),c(15),o()()(),r(16,"button",16),h("click",function(){let l=d(e).index,v=s(2);return _(v.printItn(v.label.ITNList()[l].ITN))}),c(17," Print "),o(),f(18,dt,2,0,"button",17),o()()()}if(n&2){let e=m.index,t=s(2);a(6),p("ITN:",t.label.ITNList()[e].ITN,""),a(2),p("Location:",t.label.ITNList()[e].BinLocation,""),a(3),p("Qty:",t.label.ITNList()[e].quantity,""),a(2),p("DateCode:",t.label.ITNList()[e].datecode,""),a(2),p("Country:",t.label.ITNList()[e].ISO3,""),a(3),u("ngIf",t.authWindow)}}function ft(n,m){if(n&1){let e=x();r(0,"submit-button",19),h("buttonClick",function(){d(e);let i=s(2);return _(i.onSubmit())}),w(1,"async"),o()}if(n&2){let e=s().ngIf,t=s();u("disabled",T(1,2,t.validator$))("loading",!e)}}function gt(n,m){if(n&1&&(r(0,"div",20),b(1,"message-bar",21),o()),n&2){let e=s().ngIf;a(1),u("message",e==null?null:e.error.message)("name",e==null?null:e.error.name)}}function ht(n,m){if(n&1){let e=x();r(0,"div")(1,"div",4),f(2,_t,19,6,"div",5),o(),r(3,"div",6),f(4,ft,2,4,"submit-button",7),b(5,"div"),r(6,"green-button",8),h("buttonClick",function(){d(e);let i=s();return _(i.authWindow=!0)}),o(),r(7,"normal-button",9),h("buttonClick",function(){d(e);let i=s();return _(i.onBack())}),o()(),f(8,gt,2,2,"div",10),o()}if(n&2){let e=m.ngIf,t=s(),i=B(13);a(2),u("ngForOf",t.listOfControl),a(2),u("ngIf",e)("ngIfElse",i),a(4),u("ngIf",e==null?null:e.error)}}var vt=()=>({rows:5});function xt(n,m){n&1&&b(0,"nz-skeleton",22),n&2&&u("nzActive",!0)("nzParagraph",M(2,vt))}function Ct(n,m){if(n&1){let e=x();O(0),r(1,"auth-modal",23),h("clickClose",function(){d(e);let i=s();return _(i.authWindow=!1)})("passAuth",function(){d(e);let i=s();return _(i.authWindow=!0)}),o(),L()}}var Ut=(()=>{let m=class m{constructor(t,i,l,v,ct,ut){this.updateInfo=t,this.receipt=i,this._fb=l,this._router=v,this._step=ct,this.location=ut,this.authWindow=!1,this.listOfControl=[],this.print=y(tt),this.label=y(nt),this.inputForm=this._fb.group({}),this.initList(),this.validator$=this.inputForm.valueChanges.pipe(C(I=>{let k=0;return Object.values(I).forEach(pt=>{k+=Number(pt)}),this.receipt.ExpectQuantity()-k}),C(I=>I!==0||this.inputForm.invalid))}ngOnInit(){this._step.changeSteps(3),this.data$=S(!0),history.pushState(null,null,window.location.href),this.location.onPopState(()=>{history.pushState(null,null,window.location.href)})}splitInteger(t,i){return[]}initList(){this.label.ITNList().map((t,i)=>{this.inputForm.addControl(`itn${i}`,new q(t.quantity,[E.required,E.min(1)])),this.listOfControl.push({id:i,controlInstance:{itn:`itn${i}`}})})}removeField(t,i){if(i.preventDefault(),this.listOfControl.length>1){let l=this.listOfControl.indexOf(t);this.listOfControl.splice(l,1),this.label.removeItn(l),this.inputForm.removeControl(t.controlInstance.itn)}}onSubmit(){this.data$=this.label.updateAfterReceving().pipe(C(()=>{this._router.navigateByUrl("receiptreceiving/itnlist")}),N(t=>S({error:{message:t.message,type:"error"}})),F(1))}printItn(t){this.data$=this.print.printITN$(t,this.receipt.productCode(),this.receipt.partNumber()).pipe(C(()=>!0))}onBack(){this._router.navigateByUrl("receiptreceiving/label/assign")}};m.\u0275fac=function(i){return new(i||m)(g(it),g(et),g(J),g(W),g(ot),g(R))},m.\u0275cmp=V({type:m,selectors:[["ng-component"]],standalone:!0,features:[$],decls:15,vars:9,consts:[[1,"grid","grid-cols-4","gap-5","text-xl"],[3,"formGroup"],[4,"ngIf"],["buttonLoading",""],[1,"grid","grid-cols-1","gap-5","lg:grid-cols-2"],[4,"ngFor","ngForOf"],[1,"mt-8","grid","h-16","w-full","grid-cols-4","gap-6","md:h-32","md:text-4xl"],["buttonText","Submit",3,"disabled","loading","buttonClick",4,"ngIf","ngIfElse"],["buttonText","Edit",3,"buttonClick"],[3,"buttonClick"],["class","mt-4 h-16",4,"ngIf"],[1,"relative"],[1,"grid","grid-cols-4","gap-2"],[1,"col-span-2","grid","grid-rows-2"],[1,"grid","grid-cols-2"],[1,"grid","grid-cols-3"],[1,"rounded-lg","bg-green-500","px-4","py-2","font-medium","text-white","hover:bg-green-800","focus:outline-none","focus:ring-4","focus:ring-green-300","dark:focus:ring-green-800",3,"click"],["class","bottom-2.5 right-2.5 rounded-lg bg-red-500 px-4 py-2 font-medium text-white hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 dark:focus:ring-red-800",3,"click",4,"ngIf"],[1,"bottom-2.5","right-2.5","rounded-lg","bg-red-500","px-4","py-2","font-medium","text-white","hover:bg-red-800","focus:outline-none","focus:ring-4","focus:ring-red-300","dark:focus:ring-red-800",3,"click"],["buttonText","Submit",3,"disabled","loading","buttonClick"],[1,"mt-4","h-16"],[3,"message","name"],[3,"nzActive","nzParagraph"],["message","Remove ITN(s)!",3,"clickClose","passAuth"]],template:function(i,l){i&1&&(r(0,"div",0)(1,"h1"),c(2),o(),r(3,"h1"),c(4),o(),r(5,"h1"),c(6),o(),r(7,"h1"),c(8),o()(),r(9,"form",1),f(10,ht,9,4,"div",2),w(11,"async"),f(12,xt,1,3,"ng-template",null,3,P),o(),f(14,Ct,2,0,"ng-container",2)),i&2&&(a(2),p("Part: ",l.receipt.partNumber(),""),a(2),p("Total: ",l.receipt.ExpectQuantity(),""),a(2),p("Remaining: ",l.label.remaining(),""),a(2),p("Open for POs: ",l.receipt.openQuantityForPOs(),""),a(1),u("formGroup",l.inputForm),a(1),u("ngIf",T(11,7,l.data$)),a(4),u("ngIf",l.authWindow))},dependencies:[D,j,z,A,K,U,Q,X,H,G,at,st,rt,mt,lt,Z,Y],encapsulation:2});let n=m;return n})();export{Ut as SummaryComponent};
