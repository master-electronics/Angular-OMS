import{a as tt}from"./chunk-KZIKM3XF.js";import{a as Z}from"./chunk-E3B4WDOA.js";import"./chunk-XHQXBUEX.js";import"./chunk-RMIKNTFD.js";import{a as Y}from"./chunk-D3FIXZL7.js";import"./chunk-ADHMVREX.js";import{a as X}from"./chunk-VJKYRYVM.js";import"./chunk-FBU3NLE2.js";import"./chunk-MFWTQF6C.js";import"./chunk-M47XUQY5.js";import"./chunk-YPJKXAYS.js";import"./chunk-I3G2JKLN.js";import"./chunk-LCEARWCQ.js";import"./chunk-4AGTE6D3.js";import"./chunk-5GWOD35Y.js";import"./chunk-POEXBOQJ.js";import{B as J,E as K,I as U,d as $,e as y,h as M,i as G,m as L,p as P,q as W,t as z,u as H}from"./chunk-L3THJMBJ.js";import"./chunk-PLQ7TNCQ.js";import"./chunk-C55YZZU5.js";import"./chunk-YUDS3XHK.js";import"./chunk-MIXZFVL7.js";import"./chunk-FFJ3QZ3H.js";import{i as j,k as D,n as B}from"./chunk-PJEV5NXI.js";import{A as R,p as w,w as E}from"./chunk-GWV5DZOT.js";import{$b as x,Da as _,Fb as a,Gb as d,Gc as Q,H as g,Ia as F,Ja as I,Lc as q,Mc as N,Rb as k,Rc as T,Sb as c,Sc as A,Uc as V,ac as o,bc as l,cc as v,gc as O,ma as C,nc as p,pc as S,xc as h,zc as b}from"./chunk-N7LPRJLK.js";var et=["quantity"];function it(u,r){if(u&1){let f=O();o(0,"div")(1,"div",8)(2,"div",9),v(3,"input",10,11),o(5,"button",12),p("click",function(e){let n=F(f).$implicit,s=S();return I(s.removeField(n,e))}),h(6," Delete "),l()()()()}if(u&2){let f=r.$implicit;a(3),c("formControlName",f.controlInstance.quantity),k("id",f.controlInstance.quantity)}}var vt=(()=>{let r=class r{constructor(t,e,i,n){this.itn=t,this._fb=e,this._actRoute=i,this._router=n,this.remaining=0,this.listOfControl=[]}ngOnInit(){this.remaining=this.itn.itnInfo.Quantity,this.inputForm=this._fb.group({}),this.addField(),this.addField(),this.validator$=this.inputForm.valueChanges.pipe(C(!0),g(t=>{let e=0;return Object.values(t).forEach((i,n)=>{e+=Number(i)}),this.remaining=this.itn.itnInfo.Quantity-e,this.remaining}),g(t=>t!==0||this.inputForm.invalid))}addField(t){t&&t.preventDefault();let e=this.listOfControl.length>0?this.listOfControl[this.listOfControl.length-1].id+1:0,i={id:e,controlInstance:{quantity:`quantity${e}`}},n=this.listOfControl.push(i);this.inputForm.addControl(this.listOfControl[n-1].controlInstance.quantity,new L(0,[y.required,y.min(1)])),setTimeout(()=>{this.setITNQuantity(e),this.inputFiledList.get(this.listOfControl.length-1).nativeElement.select()},0)}splitInteger(t,e){let i=[],n=Math.floor(t/e),s=t%e;for(let m=0;m<e;m++)i.push(n);for(let m=0;m<s;m++)i[m]++;return i}setITNQuantity(t){if(t===0){this.inputForm.get(`quantity${t}`).setValue(this.itn.itnInfo.Quantity);return}let e=this.splitInteger(this.itn.itnInfo.Quantity,t);Object.values(this.inputForm.value).some((i,n)=>n===t?!1:i!==e[n])||this.splitInteger(this.itn.itnInfo.Quantity,t+1).forEach((n,s)=>{this.inputForm.get(`quantity${s}`).setValue(n)})}removeField(t,e){if(e.preventDefault(),this.listOfControl.length>1){let i=this.listOfControl.indexOf(t);this.listOfControl.splice(i,1),this.inputForm.removeControl(t.controlInstance.quantity)}}onSubmit(){if(this.inputForm.valid){let t=[];Object.values(this.inputForm.value).forEach((e,i)=>{t.push(Number(e))}),this.itn.changeQuantityList(t),this._router.navigate(["../itnlist"],{relativeTo:this._actRoute})}else Object.values(this.inputForm.controls).forEach(t=>{t.invalid&&(t.markAsDirty(),t.updateValueAndValidity({onlySelf:!0}))})}onBack(){this._router.navigate(["../"],{relativeTo:this._actRoute})}};r.\u0275fac=function(e){return new(e||r)(d(tt),d(K),d(j),d(D))},r.\u0275cmp=_({type:r,selectors:[["ng-component"]],viewQuery:function(e,i){if(e&1&&A(et,5),e&2){let n;T(n=V())&&(i.inputFiledList=n)}},standalone:!0,features:[Q],decls:14,vars:7,consts:[[1,"grid","grid-cols-2","gap-5","text-xl"],[3,"formGroup"],[1,"grid","grid-cols-1","gap-5","lg:grid-cols-2"],[4,"ngFor","ngForOf"],[1,"mt-8","grid","h-32","w-full","grid-cols-2","gap-6","md:h-32","md:text-4xl"],["buttonText","Add Label",3,"buttonClick"],["buttonText","separate",3,"disabled","buttonClick"],[3,"buttonClick"],[1,"relative"],[1,"grid","grid-cols-3","gap-2"],["type","number","placeholder","Quantity","required","",1,"col-span-2","w-full","rounded-lg","border","border-gray-300","bg-gray-50","p-2","text-2xl","text-gray-900","focus:border-blue-500","focus:ring-blue-500","dark:border-gray-600","dark:bg-gray-700","dark:text-white","dark:placeholder-gray-400","dark:focus:border-blue-500","dark:focus:ring-blue-500",3,"formControlName"],["quantity",""],["type","remove",1,"bottom-2.5","right-2.5","rounded-lg","bg-red-500","px-4","py-2","font-medium","text-white","hover:bg-red-800","focus:outline-none","focus:ring-4","focus:ring-red-300","dark:focus:ring-red-800",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"h1"),h(2),l(),o(3,"h1"),h(4),l()(),o(5,"form",1)(6,"div",2),x(7,it,7,2,"div",3),l(),o(8,"div",4)(9,"green-button",5),p("buttonClick",function(s){return i.addField(s)}),l(),v(10,"div"),o(11,"submit-button",6),p("buttonClick",function(){return i.onSubmit()}),q(12,"async"),l(),o(13,"normal-button",7),p("buttonClick",function(){return i.onBack()}),l()()()),e&2&&(a(2),b("Total: ",i.itn.itnInfo.Quantity,""),a(2),b("Remaining: ",i.remaining,""),a(1),c("formGroup",i.inputForm),a(2),c("ngForOf",i.listOfControl),a(4),c("disabled",N(12,5,i.validator$)))},dependencies:[R,w,E,B,U,P,$,W,M,G,J,z,H,Z,X,Y],encapsulation:2});let u=r;return u})();export{vt as AssignComponent};
