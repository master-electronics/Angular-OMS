import{a as B}from"./chunk-JC3J4WKG.js";import"./chunk-RMIKNTFD.js";import"./chunk-D3FIXZL7.js";import"./chunk-ADHMVREX.js";import{a as k}from"./chunk-O3UEHWS5.js";import{f as $}from"./chunk-LCEARWCQ.js";import{a as A}from"./chunk-4AGTE6D3.js";import"./chunk-5GWOD35Y.js";import{H as L,I as N,e as l,i as P,k as R,m as p,t as q}from"./chunk-L3THJMBJ.js";import{a as U}from"./chunk-PLQ7TNCQ.js";import"./chunk-C55YZZU5.js";import{i as M,k as G,n as E}from"./chunk-PJEV5NXI.js";import{A as x,w as D}from"./chunk-GWV5DZOT.js";import{Ba as o,C as a,Da as b,Fb as S,Gc as F,H as f,Lc as _,Mc as I,Sb as w,V as g,a as d,ac as n,b as c,bc as s,cc as C,na as h,nc as y,qa as v,xc as u}from"./chunk-N7LPRJLK.js";var ie=(()=>{let r=class r{constructor(){this.route=o(M),this.router=o(G),this.authService=o(k),this.userInfo=o($),this.userStorage=o(A),this.login$=a(!0),this.inputForm=new R({username:new p("",[l.required]),password:new p("",[l.required])})}onSubmit(){let t;this.login$=this.authService.userAuthentication(this.inputForm.value.username.trim().toLowerCase(),this.inputForm.value.password).pipe(h(e=>(t=e,this.userStorage.saveUserInfo(t),this.userInfo.mutate({UserInfo:{Name:t.userName}}))),f(e=>e.data.findOrCreateUserInfo),v(e=>{t=c(d({},t),{DistributionCenter:e.DistributionCenter?e.DistributionCenter:U.DistributionCenter,userId:e._id}),this.userStorage.saveUserInfo(t);let i=this.route.queryParams.returnUrl||"/home";this.router.navigateByUrl(i)}),g(e=>a({error:{message:e.error,name:"error"}})))}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=b({type:r,selectors:[["ng-component"]],standalone:!0,features:[F],decls:10,vars:4,consts:[[1,"absolute","left-0","top-0","z-50","grid","h-full","w-full","grid-cols-1","grid-rows-1","place-items-center","bg-gray-700","bg-cover","bg-center",2,"background-image","url(../../../assets/img/bg_1.svg)"],[1,"sm:w2/3","md:1/2","relative","w-4/5","rounded-lg","bg-gray-200","px-5","py-4","lg:w-1/3","xl:w-1/4"],[1,"hidden","text-center","md:block"],["src","../../../assets/icon/master_logo.svg","alt","logo",1,"mx-auto"],[1,"mb-12","mt-1","pb-1","text-xl","font-semibold"],[1,"font-semibold","text-blue-800"],[3,"formGroup","data","formSubmit"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),C(3,"img",3),n(4,"h4",4),u(5," Master Electronics "),s()(),n(6,"h1",5),u(7," Please login to your account "),s(),n(8,"user-password-form",6),y("formSubmit",function(){return i.onSubmit()}),_(9,"async"),s()()()),e&2&&(S(8),w("formGroup",i.inputForm)("data",I(9,2,i.login$)))},dependencies:[x,D,E,L,P,N,q,B],encapsulation:2,changeDetection:0});let m=r;return m})();export{ie as LoginComponent};
