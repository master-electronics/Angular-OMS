import{d as Re,e as $e,j as qe,k as Ge,l as Ue}from"./chunk-KU2PVJ3V.js";import{a as We}from"./chunk-YPJKXAYS.js";import{a as ae,d as Xe}from"./chunk-LNS7FH25.js";import{a as v}from"./chunk-I3G2JKLN.js";import{i as Ve}from"./chunk-LCEARWCQ.js";import{a as ne,b as oe}from"./chunk-RH2D4KR5.js";import{a as Ie}from"./chunk-4AGTE6D3.js";import"./chunk-5GWOD35Y.js";import{e as He}from"./chunk-POEXBOQJ.js";import{b as Je}from"./chunk-55MPF5EN.js";import{a as Qe,b as je,f as Be}from"./chunk-MZCJXFXF.js";import{a as Z,b as ee,c as te,d as ie,e as re}from"./chunk-WUHPQNSG.js";import"./chunk-YGLVR5WL.js";import{a as K,d as Y}from"./chunk-44NJU3LR.js";import"./chunk-Z347V25R.js";import{G as H,H as X,I as J,d as $,e as z,h as q,i as G,p as U,t as V,u as W}from"./chunk-L3THJMBJ.js";import"./chunk-RAQ4VAB7.js";import{b as Ae}from"./chunk-FMSTYN27.js";import"./chunk-QQPJAVIB.js";import"./chunk-RMC6N2HF.js";import"./chunk-GJX7JKAF.js";import"./chunk-WX6KJXZ2.js";import"./chunk-EXQESRXT.js";import"./chunk-5FUULRSO.js";import{a as B,b as R,c as be}from"./chunk-V5UEWFGK.js";import{a as b}from"./chunk-PLQ7TNCQ.js";import"./chunk-C55YZZU5.js";import{a as ye}from"./chunk-E6LDBMP7.js";import{a as w,c as A,d as Se,e as Q,f as j}from"./chunk-GFVCXK67.js";import"./chunk-WOYNEQEU.js";import"./chunk-XSY6ZNJP.js";import"./chunk-W3KGMJG7.js";import"./chunk-B3MPBRHZ.js";import"./chunk-YUDS3XHK.js";import"./chunk-MIXZFVL7.js";import"./chunk-FFJ3QZ3H.js";import{c as Ne,i as D,k as F,n as Le}from"./chunk-PJEV5NXI.js";import{A as we,p as ge,q as x,w as ve}from"./chunk-GWV5DZOT.js";import{$b as N,C as ce,D as xe,Da as C,Ea as he,Fb as u,Gb as p,Gc as fe,H as le,Lc as P,Mc as L,N as De,Rc as M,Sb as f,Sc as E,Uc as k,V as O,a as Ee,ac as r,bc as n,cc as g,g as ke,n as T,na as _e,nc as y,pc as _,qa as Pe,wa as pe,xc as s,yc as h,zc as Fe}from"./chunk-N7LPRJLK.js";var I=class{constructor(){this._containerList=new T([]),this._selectedList=new T([]),this._totalTotes=new T(null),this._selectedITNs=new T(null),this._pickedContainer=new T(null),this._ITNsInOrder=new T(null)}changeContainerList(t){this._containerList.next(t)}get containerList(){return this._containerList.value}changeselectedList(t){this._selectedList.next(t)}get selectedList(){return this._selectedList.value}changeTotalTotes(t){this._totalTotes.next(t)}get totalTotes(){return this._totalTotes.value}changeselectedITNs(t){this._selectedITNs.next(t)}get selectedITNs(){return this._selectedITNs.value}changePickedContainer(t){this._pickedContainer.next(t)}get pickedContainer(){return this._pickedContainer.value}changeITNsInOrder(t){this._ITNsInOrder.next(t)}get ITNsInOrder(){return this._ITNsInOrder.value}};var lt=["orderNumber"];function dt(o,t){if(o&1&&(r(0,"nz-form-item",3),g(1,"nz-alert",12),n()),o&2){let l=_();u(1),f("nzType",l.alertType==="error"?"error":l.alertType==="success"?"success":l.alertType==="info"?"info":"warning")("nzMessage",l.alertMessage)}}var Te=(()=>{let t=class t{get f(){return this.orderForm.controls}constructor(m,i,e,d,S,c,se,me,ue,a){this._title=m,this.fb=i,this.route=e,this.router=d,this.titleService=S,this.pickOrder=c,this.verifyOrder=se,this.agOutService=me,this.eventLog=ue,this._userInfo=a,this.title="Aggregation Out",this.isLoading=!1,this.alertType="error",this.alertMessage="",this.orderForm=this.fb.group({orderNumber:["",[z.required,z.pattern(Be)]]}),this._title.update(this.title),this.titleService.setTitle(this.title)}ngOnInit(){this.agOutService.changeContainerList(null),this.agOutService.changeselectedList(null),this.agOutService.changeTotalTotes(null),this.agOutService.changeselectedITNs(null),this.agOutService.changePickedContainer(null),this.agOutService.changeITNsInOrder(null),this.eventLog.initEventLog({UserName:this._userInfo.userName,EventTypeID:v.Event_AgOut_Start,Log:""}),this.alertType=this.route.snapshot.queryParams.type,this.alertMessage=this.route.snapshot.queryParams.message,this.isLoading=!0,this.pickOrder$=this.pickOrder.mutate(null).pipe(Pe(m=>{let i=m.data.pickOrderForAgOut,e="No available order";i&&(e=`${i.OrderNumber}-${i.NOSINumber}`),this.f.orderNumber.setValue(e),this.orderInpt.nativeElement.select(),this.isLoading=!1}),O(m=>(this.alertMessage=m,this.orderInpt.nativeElement.select(),this.isLoading=!1,ce([]))))}ngAfterViewInit(){this.orderInpt.nativeElement.select()}onSubmit(){if(this.alertMessage="",this.alertType="error",!this.orderForm.valid||this.isLoading){this.orderInpt.nativeElement.select();return}let m=this.orderForm.get("orderNumber").value.slice(0,6),i=this.orderForm.get("orderNumber").value.slice(7);this.isLoading=!0,this.verifyOrder$=this.verifyOrder.fetch({DistributionCenter:b.DistributionCenter,OrderNumber:m,NOSINumber:i},{fetchPolicy:"network-only"}).pipe(Pe(e=>{let d=e.data.findOrder;if(!d)throw"Can not find this order!";if(d.ORDERLINEDETAILs.some(S=>![v.agInComplete_ID,v.agOutComplete_ID].includes(S.StatusID)))throw"Invalid Order Status!";if(d.ORDERLINEDETAILs.length!==e.data.countOrderItns)throw"ITNs in SQL are not equal to ITNs in Merp."}),le(e=>{this.router.navigate(["/agout/picktote"],{queryParams:{OrderNumber:m,NOSINumber:i,OrderID:e.data.findOrder._id}})}),O(e=>(this.alertMessage=e,this.orderInpt.nativeElement.select(),this.isLoading=!1,xe(e))))}};t.\u0275fac=function(i){return new(i||t)(p(ye),p(H),p(D),p(F),p(Ne),p(qe),p(Ge),p(I),p(We),p(Ie))},t.\u0275cmp=C({type:t,selectors:[["aggregation-out"]],viewQuery:function(i,e){if(i&1&&E(lt,5),i&2){let d;M(d=k())&&(e.orderInpt=d.first)}},decls:21,vars:10,consts:[[1,"container","mx-auto","px-2","py-2","md:mt-4"],["nz-form","","focusInvalidInput","",3,"formGroup","ngSubmit"],[1,"hidden"],["nz-row","","nzJustify","center"],["nz-col","","nzXs","20","nzSm","16","nzMd","12","nzLg","10","nzXl","8","nzXXl","6"],["nzRequired",""],["nzHasFeedback","","nzErrorTip","The input is not valid Order!"],["nz-input","","formControlName","orderNumber","placeholder","Order#","nzSize","large","type","text","id","orderNumber","name","orderNumber","autocomplete","off"],["orderNumber",""],["nz-col","","nzSpan","13"],["nz-button","","type","submit","nzType","primary","nzSize","large",1,"w-full",3,"nzLoading","disabled","click"],["nz-row","","nzJustify","center",4,"ngIf"],["nzShowIcon","",1,"w-full",3,"nzType","nzMessage"]],template:function(i,e){i&1&&(r(0,"div",0)(1,"form",1),y("ngSubmit",function(){return e.onSubmit()}),r(2,"div",2),s(3),P(4,"async"),n(),r(5,"div",3)(6,"div",4)(7,"nz-form-item",3)(8,"nz-form-label",5),s(9,"Auto Selected Order"),n(),r(10,"nz-form-control",6),g(11,"input",7,8),n()(),r(13,"div"),s(14),P(15,"async"),n(),r(16,"nz-form-item",3)(17,"div",9)(18,"button",10),y("click",function(){return e.onSubmit()}),s(19," Submit "),n()()(),N(20,dt,2,2,"nz-form-item",11),n()()()()),i&2&&(u(1),f("formGroup",e.orderForm),u(2),h(L(4,6,e.pickOrder$)),u(11),h(L(15,8,e.verifyOrder$)),u(4),f("nzLoading",e.isLoading)("disabled",e.isLoading),u(2),f("ngIf",e.alertMessage))},dependencies:[x,U,$,q,G,V,W,K,Q,w,A,R,B,ee,Z,ie,te,ne,ae,ve],encapsulation:2});let o=t;return o})();var pt=["containerNumber"];function ht(o,t){if(o&1&&(r(0,"nz-form-item",2),g(1,"nz-alert",15),n()),o&2){let l=_();u(1),f("nzType",l.alertType==="error"?"error":l.alertType==="success"?"success":l.alertType==="info"?"info":"warning")("nzMessage",l.alertMessage)}}function ft(o,t){if(o&1&&(r(0,"tr",16)(1,"td",17),s(2),n()()),o&2){let l=t.$implicit;u(2),h(l)}}function gt(o,t){if(o&1&&(r(0,"tr",18)(1,"td"),s(2),n()()),o&2){let l=t.$implicit;u(2),h(l)}}var Oe=(()=>{let t=class t{constructor(m,i,e,d){this._fb=m,this._router=i,this._route=e,this._agOutService=d,this.alertType="error",this.alertMessage="",this.totalITNs=0,this.itemList=[],this.selectedList=[],this.containerForm=this._fb.group({containerNumber:["",[z.required,z.pattern(je)]]})}ngOnInit(){this.itemList=this._agOutService.selectedITNs,this.itemList==null&&this._router.navigate(["agout/picktote"],{queryParams:this._route.snapshot.queryParams}),this.totalITNs=this.itemList.length}ngAfterViewInit(){this.containerInput.nativeElement.select()}onSubmit(){if(this.alertMessage="",!this.containerForm.valid){this.containerInput.nativeElement.select();return}this.selectITN()}selectITN(){let m=0;this.itemList=this.itemList.filter(i=>{let e=i===this.containerForm.get("containerNumber").value;return e&&(this.selectedList.unshift(i),m+=1),!e}),this.totalITNs===this.selectedList.length?(this.changeContainerList(),this._router.navigate(["agout/picktote"],{queryParams:this._route.snapshot.queryParams})):m===0&&(this.alertMessage="ITN is not in the list."),this.containerForm.reset({containerNumber:""}),this.containerInput.nativeElement.select()}changeContainerList(){let m=this._agOutService.containerList,i=this._agOutService.selectedList||[];m=m.filter(e=>{let d=e.Barcode===this._agOutService.pickedContainer;return d&&i.unshift(e),!d}),this._agOutService.changeContainerList(m),this._agOutService.changeselectedList(i)}};t.\u0275fac=function(i){return new(i||t)(p(H),p(F),p(D),p(I))},t.\u0275cmp=C({type:t,selectors:[["pick-itn"]],viewQuery:function(i,e){if(i&1&&E(pt,5),i&2){let d;M(d=k())&&(e.containerInput=d.first)}},standalone:!0,features:[fe],decls:22,vars:4,consts:[[1,"container","mx-auto","px-2","py-2","md:mt-4"],["nz-form","","focusInvalidInput","",3,"formGroup","ngSubmit"],["nz-row","","nzJustify","center"],["nz-col","","nzXs","20","nzSm","16","nzMd","12","nzLg","10","nzXl","8","nzXXl","6"],["nzRequired",""],["nzHasFeedback","","nzErrorTip","The input is not valid ITN!"],["nz-input","","placeholder"," ","formControlName","containerNumber","placeholder","ITN#","nzSize","large","type","text","id","containerNumber","name","containerNumber","autocomplete","off"],["containerNumber",""],["nz-col","","nzSpan","13"],["nz-button","","type","submit","nzType","primary","nzSize","large",1,"w-full",3,"click"],["nz-row","","nzJustify","center",4,"ngIf"],[1,"w-full"],[1,"grid","grid-cols-3","justify-items-start","gap-3"],["class","text-lg",4,"ngFor","ngForOf"],["class","text-lg text-green-500",4,"ngFor","ngForOf"],["nzShowIcon","",1,"w-full",3,"nzType","nzMessage"],[1,"text-lg"],[1,"select-none"],[1,"text-lg","text-green-500"]],template:function(i,e){i&1&&(r(0,"div",0)(1,"form",1),y("ngSubmit",function(){return e.onSubmit()}),r(2,"div",2)(3,"div",3)(4,"nz-form-item",2)(5,"nz-form-label",4),s(6,"Pick ITNs in the tote"),n(),r(7,"nz-form-control",5),g(8,"input",6,7),n()(),r(10,"nz-form-item",2)(11,"div",8)(12,"button",9),y("click",function(){return e.onSubmit()}),s(13," Submit "),n()()(),N(14,ht,2,2,"nz-form-item",10),r(15,"table",11)(16,"thead",12)(17,"th"),s(18,"ITN"),n()(),r(19,"tbody"),N(20,ft,3,1,"tr",13)(21,gt,3,1,"tr",14),n()()()()()()),i&2&&(u(1),f("formGroup",e.containerForm),u(13),f("ngIf",e.alertMessage),u(6),f("ngForOf",e.itemList),u(1),f("ngForOf",e.selectedList))},dependencies:[X,U,$,q,G,re,R,B,ee,Z,ie,te,ae,J,V,W,be,Y,K,j,Q,w,A,Se,x,oe,ne,ge],encapsulation:2});let o=t;return o})();var vt=["containerNumber"];function Nt(o,t){o&1&&g(0,"div")}function It(o,t){o&1&&g(0,"div")}function St(o,t){if(o&1&&(r(0,"nz-form-item",3),g(1,"nz-alert",17),n()),o&2){let l=_();u(1),f("nzType",l.alertType==="error"?"error":l.alertType==="success"?"success":l.alertType==="info"?"info":"warning")("nzMessage",l.alertMessage)}}function yt(o,t){if(o&1&&(r(0,"tr",18)(1,"td",14)(2,"span"),s(3),n(),r(4,"span"),s(5,"-"),n(),r(6,"span"),s(7),n(),r(8,"span"),s(9,"-"),n(),r(10,"span"),s(11),n(),r(12,"span"),s(13,"-"),n(),r(14,"span"),s(15),n(),r(16,"span"),s(17,"-"),n(),r(18,"span"),s(19),n(),r(20,"span"),s(21,"-"),n(),r(22,"span"),s(23),n()(),r(24,"td",19),s(25),n()()),o&2){let l=t.$implicit;u(3),h(l.Warehouse),u(4),h(l.Row),u(4),h(l.Aisle),u(4),h(l.Section),u(4),h(l.Shelf),u(4),h(l.ShelfDetail),u(2),h(l.Barcode)}}function bt(o,t){if(o&1&&(r(0,"tr",20)(1,"td",14)(2,"span"),s(3),n(),r(4,"span"),s(5,"-"),n(),r(6,"span"),s(7),n(),r(8,"span"),s(9,"-"),n(),r(10,"span"),s(11),n(),r(12,"span"),s(13,"-"),n(),r(14,"span"),s(15),n(),r(16,"span"),s(17,"-"),n(),r(18,"span"),s(19),n(),r(20,"span"),s(21,"-"),n(),r(22,"span"),s(23),n()(),r(24,"td"),s(25),n()()),o&2){let l=t.$implicit;u(3),h(l.Warehouse),u(4),h(l.Row),u(4),h(l.Aisle),u(4),h(l.Section),u(4),h(l.Shelf),u(4),h(l.ShelfDetail),u(2),h(l.Barcode)}}var Ce=(()=>{let t=class t{constructor(m,i,e,d,S,c,se,me,ue,a,de){this._fb=m,this._title=i,this._router=e,this._route=d,this.agOutService=S,this._titleService=c,this._fetchLocation=se,this._fetchHazard=me,this._insertUserEvnetLog=ue,this._updateAfterQC=a,this._userInfo=de,this.buttonLabel="Pick",this.buttonStyles="bg-indigo-500",this.isLoading=!1,this.alertType="error",this.alertMessage="",this.totalTotes=0,this.containerList=[],this.selectedList=[],this.containerForm=this._fb.group({containerNumber:["",[z.required,z.pattern(Qe)]]}),this.subscription=new ke,this._titleService.setTitle("agout/pick")}ngOnInit(){this.urlParams=Ee({},this._route.snapshot.queryParams),this._title.update(`Pick: ${this.urlParams.OrderNumber}-${this.urlParams.NOSINumber}`),this.containerList=this.agOutService.containerList,this.selectedList=this.agOutService.selectedList,this.totalTotes=this.agOutService.totalTotes,this.totalTotes===null?(this.isLoading=!0,this.locationInfo$=this._fetchLocation.fetch({OrderID:Number(this.urlParams.OrderID)},{fetchPolicy:"network-only"}).pipe(_e(m=>{this.agOutService.changeITNsInOrder(m.data.findOrderLineDetails);let i=new Set,e=new Set,d=m.data.findOrderLineDetails.map(c=>(e.add(c.Inventory.InventoryTrackingNumber),i.add(c.Inventory.Container),{UserName:this._userInfo.userName,OrderNumber:this.urlParams.OrderNumber,NOSINumber:this.urlParams.NOSINumber,InventoryTrackingNumber:c.Inventory.InventoryTrackingNumber,UserEventID:v.Event_AgOut_Start,OrderLineNumber:c.OrderLine.OrderLineNumber,CustomerNumber:c.Order.Customer?.CustomerNumber,CustomerTier:c.Order.Customer?.CustomerTier,DistributionCenter:b.DistributionCenter,PartNumber:c.Inventory.Product?.PartNumber,ProductCode:c.Inventory.Product?.ProductCode.ProductCodeNumber,ProductTier:c.Inventory.Product?.ProductTier,Quantity:c.Quantity,ParentITN:c.Inventory.ParentITN,ShipmentMethod:c.Order.ShipmentMethod?._id,ShipmentMethodDescription:c.Order.ShipmentMethod?.ShippingMethod,Priority:c.Order.ShipmentMethod?.PriorityPinkPaper,WMSPriority:c.WMSPriority})),S=m.data.findOrderLineDetails.map(c=>({UserName:this._userInfo.userName,EventTypeID:v.Event_AgOut_Start,Log:JSON.stringify({OrderNumber:this.urlParams.OrderNumber,NOSINumber:this.urlParams.NOSINumber,InventoryTrackingNumber:c.Inventory.InventoryTrackingNumber,OrderLineNumber:c.OrderLine.OrderLineNumber,CustomerNumber:c.Order.Customer?.CustomerNumber,CustomerTier:c.Order.Customer?.CustomerTier,DistributionCenter:b.DistributionCenter,PartNumber:c.Inventory.Product?.PartNumber,ProductCode:c.Inventory.Product?.ProductCode.ProductCodeNumber,ProductTier:c.Inventory.Product?.ProductTier,Quantity:c.Quantity,ParentITN:c.Inventory.ParentITN,ShipmentMethod:c.Order.ShipmentMethod?._id,ShipmentMethodDescription:c.Order.ShipmentMethod?.ShippingMethod,Priority:c.Order.ShipmentMethod?.PriorityPinkPaper,WMSPriority:c.WMSPriority})}));return this.containerList=[...i],this.totalTotes=this.containerList.length,this._insertUserEvnetLog.mutate({oldLogs:d,eventLogs:S})}),le(()=>(this.isLoading=!1,!0)),O(m=>(this.alertMessage=m,this.isLoading=!1,this.containerInput.nativeElement.select(),ce(!1))))):this.totalTotes===this.selectedList?.length&&this.updateSQLAndCheckHazmzd()}ngAfterViewInit(){this.containerInput.nativeElement.select()}onSubmit(){if(this.alertMessage="",!this.containerForm.valid||this.isLoading){this.containerInput.nativeElement.select();return}this.selectContainer()}selectContainer(){if(!this.containerList.some(e=>e.Barcode===this.containerForm.get("containerNumber").value?(this.agOutService.changePickedContainer(e.Barcode),!0):!1)){this.alertMessage="Container is not in the list.",this.containerInput.nativeElement.select();return}let i=[];this.agOutService.ITNsInOrder.forEach(e=>{e.Inventory.Container.Barcode===this.containerForm.get("containerNumber").value&&i.push(e.Inventory.InventoryTrackingNumber)}),this.agOutService.changeContainerList(this.containerList),this.agOutService.changeselectedITNs(i),this.agOutService.changeTotalTotes(this.totalTotes),this._router.navigate(["agout/pickitn"],{queryParams:this._route.snapshot.queryParams})}updateSQLAndCheckHazmzd(){this.buttonLabel="Ag Out",this.buttonStyles="bg-green-500";let m=`${b.DistributionCenter}${this.urlParams.OrderNumber}${this.urlParams.NOSINumber}`,i=[],e=new Set,d=[];this.agOutService.ITNsInOrder.forEach(a=>{i.push(`${m}${String(a.OrderLine.OrderLineNumber).padStart(2,"0")}packing        ${a.Inventory.InventoryTrackingNumber}`),d.push(a.Inventory.Container.Barcode),e.add(`${a.Inventory.Product.ProductCode.ProductCodeNumber.padEnd(3)}${a.Inventory.Product.PartNumber}`)});let S=[...e],c=new Set;this.agOutService.selectedList.forEach(a=>c.add(a.Barcode)),this.isLoading=!0;let se=this.agOutService.ITNsInOrder.map(a=>({UserName:this._userInfo.userName,OrderNumber:this.urlParams.OrderNumber,NOSINumber:this.urlParams.NOSINumber,InventoryTrackingNumber:a.Inventory.InventoryTrackingNumber,UserEventID:v.Event_AgOut_Done,OrderLineNumber:a.OrderLine.OrderLineNumber,CustomerNumber:a.Order.Customer?.CustomerNumber,CustomerTier:a.Order.Customer?.CustomerTier,DistributionCenter:b.DistributionCenter,PartNumber:a.Inventory.Product?.PartNumber,ProductCode:a.Inventory.Product?.ProductCode.ProductCodeNumber,ProductTier:a.Inventory.Product?.ProductTier,Quantity:a.Quantity,ParentITN:a.Inventory.ParentITN,ShipmentMethod:a.Order.ShipmentMethod?._id,ShipmentMethodDescription:a.Order.ShipmentMethod?.ShippingMethod,Priority:a.Order.ShipmentMethod?.PriorityPinkPaper,WMSPriority:a.WMSPriority})),me=this.agOutService.ITNsInOrder.map(a=>({UserName:this._userInfo.userName,EventTypeID:v.Event_AgOut_Done,Log:JSON.stringify({OrderNumber:this.urlParams.OrderNumber,NOSINumber:this.urlParams.NOSINumber,InventoryTrackingNumber:a.Inventory.InventoryTrackingNumber,OrderLineNumber:a.OrderLine.OrderLineNumber,CustomerNumber:a.Order.Customer?.CustomerNumber,CustomerTier:a.Order.Customer?.CustomerTier,DistributionCenter:b.DistributionCenter,PartNumber:a.Inventory.Product?.PartNumber,ProductCode:a.Inventory.Product?.ProductCode.ProductCodeNumber,ProductTier:a.Inventory.Product?.ProductTier,Quantity:a.Quantity,ParentITN:a.Inventory.ParentITN,ShipmentMethod:a.Order.ShipmentMethod?._id,ShipmentMethodDescription:a.Order.ShipmentMethod?.ShippingMethod,Priority:a.Order.ShipmentMethod?.PriorityPinkPaper,WMSPriority:a.WMSPriority})})),ue=this.agOutService.ITNsInOrder.map(a=>({User:this._userInfo.userName,ITN:a.Inventory.InventoryTrackingNumber,BinLocation:"PACKING"}));this.updateSQL$=De({updateOrder:this._updateAfterQC.mutate({OrderID:Number(this.urlParams.OrderID),OrderLineDetail:{StatusID:v.agOutComplete_ID},toteList:[...c],DistributionCenter:b.DistributionCenter,OrderNumber:this.urlParams.OrderNumber,NOSINumber:this.urlParams.NOSINumber,UserOrStatus:"Packing",MerpStatus:String(v.agOutComplete_ID),FileKeyList:i,ActionType:"A",ITNList:ue,Action:"line_aggregation_out"}),checkHazmzd:this._fetchHazard.fetch({ProductList:S},{fetchPolicy:"network-only"})}).pipe(_e(a=>(this.type="success",this.message=`Order complete: ${this.urlParams.OrderNumber}-${this.urlParams.NOSINumber}`,a.checkHazmzd.data.fetchProductInfoFromMerp.some(de=>/^[\w]+$/.test(de.HazardMaterialLevel.trim())&&de.HazardMaterialLevel.trim()!=="N")&&(this.type="warning",this.message+=`
This order contains hazardous materials`),this._insertUserEvnetLog.mutate({eventLogs:me,oldLogs:se}))),le(()=>(this.isLoading=!1,this._router.navigate(["/agout"],{queryParams:{type:this.type,message:this.message}}),!0)),O(a=>(this.alertMessage=a,this.isLoading=!1,this.containerInput.nativeElement.select(),ce(!1))))}ngOnDestroy(){this.subscription.unsubscribe()}};t.\u0275fac=function(i){return new(i||t)(p(H),p(ye),p(F),p(D),p(I),p(Ne),p(Ue),p(Re),p(Ve),p($e),p(Ie))},t.\u0275cmp=C({type:t,selectors:[["pick-tote"]],viewQuery:function(i,e){if(i&1&&E(vt,5),i&2){let d;M(d=k())&&(e.containerInput=d.first)}},standalone:!0,features:[fe],decls:28,vars:13,consts:[[4,"ngIf"],[1,"container","mx-auto","px-2","py-2","md:mt-4"],["nz-form","","focusInvalidInput","",3,"formGroup","ngSubmit"],["nz-row","","nzJustify","center"],["nz-col","","nzXs","20","nzSm","16","nzMd","12","nzLg","10","nzXl","8","nzXXl","6"],["nzRequired",""],["nzHasFeedback","","nzErrorTip","The input is not valid container!"],["nz-input","","placeholder"," ","formControlName","containerNumber","placeholder","Tote#","nzSize","large","type","text","id","containerNumber","name","containerNumber","autocomplete","off"],["containerNumber",""],["nz-col","","nzSpan","13"],["nz-button","","type","submit","nzType","primary","nzSize","large",1,"w-full",3,"nzLoading","disabled","click"],["nz-row","","nzJustify","center",4,"ngIf"],[1,"w-full"],[1,"grid","grid-cols-3","justify-items-start","gap-3"],[1,"col-span-2"],["class","grid grid-cols-3 gap-3 text-lg",4,"ngFor","ngForOf"],["class","grid grid-cols-3 gap-3 text-lg text-green-500",4,"ngFor","ngForOf"],["nzShowIcon","",1,"w-full",3,"nzType","nzMessage"],[1,"grid","grid-cols-3","gap-3","text-lg"],[1,"select-none"],[1,"grid","grid-cols-3","gap-3","text-lg","text-green-500"]],template:function(i,e){i&1&&(N(0,Nt,1,0,"div",0),P(1,"async"),N(2,It,1,0,"div",0),P(3,"async"),r(4,"div",1)(5,"form",2),y("ngSubmit",function(){return e.onSubmit()}),r(6,"div",3)(7,"div",4)(8,"nz-form-item",3)(9,"nz-form-label",5),s(10,"Pick Tote in the List"),n(),r(11,"nz-form-control",6),g(12,"input",7,8),n()(),r(14,"nz-form-item",3)(15,"div",9)(16,"button",10),y("click",function(){return e.onSubmit()}),s(17),n()()(),N(18,St,2,2,"nz-form-item",11),r(19,"table",12)(20,"thead",13)(21,"th",14),s(22,"Location"),n(),r(23,"th"),s(24,"Barcode"),n()(),r(25,"tbody"),N(26,yt,26,7,"tr",15)(27,bt,26,7,"tr",16),n()()()()()()),i&2&&(f("ngIf",L(1,9,e.locationInfo$)),u(2),f("ngIf",L(3,11,e.updateSQL$)),u(3),f("formGroup",e.containerForm),u(11),f("nzLoading",e.isLoading)("disabled",e.isLoading),u(1),Fe(" ",e.buttonLabel," "),u(1),f("ngIf",e.alertMessage),u(8),f("ngForOf",e.containerList),u(1),f("ngForOf",e.selectedList))},dependencies:[x,X,U,$,q,G,re,R,B,ee,Z,ie,te,ae,J,V,W,be,Y,K,j,Q,w,A,Se,oe,ne,ge,ve],encapsulation:2});let o=t;return o})();var zt=[{path:"",component:Te},{path:"picktote",component:Ce},{path:"pickitn",component:Oe}],at=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=he({type:t}),t.\u0275inj=pe({imports:[Le.forChild(zt),Le]});let o=t;return o})();var Ei=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=he({type:t,bootstrap:[Te]}),t.\u0275inj=pe({providers:[I],imports:[we,at,X,J,Y,Ae,j,re,oe,Xe,He,Je,Ce,Oe]});let o=t;return o})();export{Ei as AggregationOutModule};
