import{a as W}from"./chunk-5VGBK5M2.js";import{k as Q}from"./chunk-EDQ2XWAO.js";import{a as K}from"./chunk-QTNYEYCW.js";import{a as H}from"./chunk-GKR6SDXW.js";import{a as P}from"./chunk-XHQXBUEX.js";import"./chunk-RMIKNTFD.js";import"./chunk-D3FIXZL7.js";import"./chunk-ADHMVREX.js";import"./chunk-VJKYRYVM.js";import"./chunk-J3DDCTFF.js";import{a as S}from"./chunk-I3G2JKLN.js";import"./chunk-LCEARWCQ.js";import{a as w}from"./chunk-4AGTE6D3.js";import"./chunk-5GWOD35Y.js";import"./chunk-POEXBOQJ.js";import{e as J}from"./chunk-TREYRKOP.js";import{b as z}from"./chunk-MZCJXFXF.js";import{E as V,H as O,I as q,e as G,i as $,t as U}from"./chunk-L3THJMBJ.js";import"./chunk-RAQ4VAB7.js";import"./chunk-RMC6N2HF.js";import"./chunk-GJX7JKAF.js";import"./chunk-WX6KJXZ2.js";import"./chunk-EXQESRXT.js";import"./chunk-5FUULRSO.js";import{c as R}from"./chunk-V5UEWFGK.js";import{a as N}from"./chunk-PLQ7TNCQ.js";import"./chunk-C55YZZU5.js";import"./chunk-GFVCXK67.js";import"./chunk-WOYNEQEU.js";import"./chunk-XSY6ZNJP.js";import"./chunk-W3KGMJG7.js";import"./chunk-B3MPBRHZ.js";import"./chunk-YUDS3XHK.js";import"./chunk-MIXZFVL7.js";import"./chunk-FFJ3QZ3H.js";import{i as L,k as j}from"./chunk-PJEV5NXI.js";import{A,q as D,w as x}from"./chunk-GWV5DZOT.js";import{$b as d,Ba as C,C as c,Da as y,Fb as u,Gb as a,Gc as M,H as T,Ia as b,Ja as E,Lc as k,Mc as B,Sb as s,V as h,ac as f,bc as l,cc as I,dc as g,ec as _,gc as F,nc as v,pc as p}from"./chunk-N7LPRJLK.js";function Y(n,r){if(n&1&&(g(0),I(1,"audit-info",3),_()),n&2){let m=p();u(1),s("auditInfo",m.auditInfo)}}function Z(n,r){if(n&1){let m=F();g(0),f(1,"popup-modal",4),v("clickSubmit",function(){b(m);let i=p();return E(i.onBack())}),l(),_()}if(n&2){let m=p();u(1),s("message",m.message)}}var Te=(()=>{let r=class r{constructor(t,i,e,o,X){this._fb=t,this._actRoute=i,this._router=e,this._auditService=o,this._eventLog=X,this.userInfo=C(w),this.inputForm=this._fb.nonNullable.group({ITN:["",[G.required]]})}ngOnInit(){if(sessionStorage.getItem("currentAudit")){let t=JSON.parse(sessionStorage.getItem("currentAudit"));this.auditInfo={Container:{Barcode:t.Container.Barcode},Inventory:{ITN:t.Inventory.ITN}}}this.data$=c(!0)}onSubmit(){let t=this.inputForm.value.ITN.trim();if(z.test(t))if(this.auditInfo.Inventory.ITN!=t)this.data$=c({error:{message:"Incorrect ITN!",type:"error"}});else{let i=[{UserEventID:S.Event_IM_ITN_Scanned,UserName:this.userInfo.userName,DistributionCenter:N.DistributionCenter,InventoryTrackingNumber:sessionStorage.getItem("auditITN"),Message:"ITN: "+this.inputForm.value.ITN}],e=[{UserName:this.userInfo.userName,EventTypeID:S.Event_IM_ITN_Scanned,Log:JSON.stringify({DistributionCenter:N.DistributionCenter,InventoryTrackingNumber:sessionStorage.getItem("auditITN"),ITN:this.inputForm.value.ITN})}];this.data$=this._eventLog.insertLog(i,e).pipe(T(o=>(this._router.navigate(["../scan-location"],{relativeTo:this._actRoute}),o)),h(o=>{throw new Error(o)}))}else this.data$=c({error:{message:"Invalid ITN format",type:"error"}})}onBack(){}};r.\u0275fac=function(i){return new(i||r)(a(V),a(L),a(j),a(Q),a(K))},r.\u0275cmp=y({type:r,selectors:[["ng-component"]],standalone:!0,features:[M],decls:6,vars:7,consts:[[4,"ngIf"],["inputType","string","controlName","ITN","title","Scan ITN:",3,"data","formGroup","isvalid","formSubmit","formBack"],[2,"height","20px"],[3,"auditInfo"],[3,"message","clickSubmit"]],template:function(i,e){i&1&&(d(0,Y,2,1,"ng-container",0),f(1,"single-input-form",1),v("formSubmit",function(){return e.onSubmit()})("formBack",function(){return e.onBack()}),k(2,"async"),l(),I(3,"div",2)(4,"div",2),d(5,Z,2,1,"ng-container",0)),i&2&&(s("ngIf",e.auditInfo),u(1),s("data",B(2,5,e.data$))("formGroup",e.inputForm)("isvalid",e.inputForm.valid),u(4),s("ngIf",e.message))},dependencies:[A,D,x,P,q,$,U,H,J,R,O,W],encapsulation:2});let n=r;return n})();export{Te as ScanITN};
