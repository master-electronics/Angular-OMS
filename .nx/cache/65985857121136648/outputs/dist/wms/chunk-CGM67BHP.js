import{a as He,b as G}from"./chunk-HV2M47TR.js";import{a as R}from"./chunk-I3G2JKLN.js";import{h as xe}from"./chunk-LCEARWCQ.js";import{a as Se,b as H}from"./chunk-RH2D4KR5.js";import{a as pe}from"./chunk-4AGTE6D3.js";import"./chunk-5GWOD35Y.js";import{a as Fe,c as J}from"./chunk-EVXJS6DD.js";import{c as Ce,d as Ee,e as q}from"./chunk-TREYRKOP.js";import{b as ze}from"./chunk-55MPF5EN.js";import{f as Te,g as we,i as Me,k as Ve,l as Ae,m as ke,n as $e,o as je,p as Qe,q as B}from"./chunk-KI3MUNGW.js";import"./chunk-JOHRHLSX.js";import"./chunk-OXQW4PMW.js";import{c as Oe,d as Pe,e as U}from"./chunk-6DLKQNDK.js";import"./chunk-YGLVR5WL.js";import{a as Ne,d as F}from"./chunk-44NJU3LR.js";import"./chunk-Z347V25R.js";import{A as ve,H as Q,d as _e,h as ye,o as Ie,q as ge,z as Re}from"./chunk-L3THJMBJ.js";import"./chunk-RAQ4VAB7.js";import"./chunk-FMSTYN27.js";import"./chunk-QQPJAVIB.js";import"./chunk-RMC6N2HF.js";import"./chunk-GJX7JKAF.js";import"./chunk-WX6KJXZ2.js";import"./chunk-EXQESRXT.js";import"./chunk-5FUULRSO.js";import{a as be,b as Le,c as j}from"./chunk-V5UEWFGK.js";import{a as N}from"./chunk-PLQ7TNCQ.js";import{f as L,h as z,i as C,j as _}from"./chunk-C55YZZU5.js";import{a as De}from"./chunk-E6LDBMP7.js";import{a as ue,c as he,d as me,e as fe,f as $}from"./chunk-GFVCXK67.js";import"./chunk-WOYNEQEU.js";import"./chunk-XSY6ZNJP.js";import"./chunk-W3KGMJG7.js";import"./chunk-B3MPBRHZ.js";import"./chunk-YUDS3XHK.js";import{m as de,n as k}from"./chunk-MIXZFVL7.js";import"./chunk-FFJ3QZ3H.js";import{c as le,n as X}from"./chunk-PJEV5NXI.js";import{A as ae,o as re,p as se,q as oe,w as ce}from"./chunk-GWV5DZOT.js";import{$b as x,Aa as b,Da as ee,Ea as M,Fb as a,Gb as m,Gc as ie,Ia as y,Ja as I,Lc as K,Mc as Y,Sb as p,Vc as ne,Wb as te,ac as c,bc as o,cc as v,dc as P,ec as T,g as f,gc as E,nc as g,pc as u,va as D,wa as w,wc as V,xc as d,yc as A,zc as S}from"./chunk-N7LPRJLK.js";var kt=_`
    query fetchVendorList {
  fetchVendorList {
    _id
    VendorNumber
    VendorName
  }
}
    `,qe=(()=>{let e=class e extends z{constructor(t){super(t),this.document=kt,this.client="wmsNodejs"}};e.\u0275fac=function(i){return new(i||e)(b(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),$t=_`
    query findVendor($vendor: searchVendor!) {
  findVendor(Vendor: $vendor) {
    _id
    VendorName
    VendorNumber
  }
}
    `,Ue=(()=>{let e=class e extends z{constructor(t){super(t),this.document=$t,this.client="wmsNodejs"}};e.\u0275fac=function(i){return new(i||e)(b(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),jt=_`
    query findVendorByPO($purchaseOrder: searchPurchaseOrderH!) {
  findVendorByPO(PurchaseOrder: $purchaseOrder) {
    _id
    VendorName
    VendorNumber
  }
}
    `,Be=(()=>{let e=class e extends z{constructor(t){super(t),this.document=jt,this.client="wmsNodejs"}};e.\u0275fac=function(i){return new(i||e)(b(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Qt=_`
    query findReceipt($receiptID: Int) {
  findReceipt(ReceiptID: $receiptID) {
    _id
    VendorID
    ExpectedArrivalDate
    SourceType
    ReceiptNumber
  }
}
    `,Je=(()=>{let e=class e extends z{constructor(t){super(t),this.document=Qt,this.client="wmsNodejs"}};e.\u0275fac=function(i){return new(i||e)(b(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Ft=_`
    query findReceipts($receiptID: String) {
  findReceipts(ReceiptID: $receiptID) {
    _id
    VendorID
    ExpectedArrivalDate
    SourceType
    ReceiptNumber
  }
}
    `,Ge=(()=>{let e=class e extends z{constructor(t){super(t),this.document=Ft,this.client="wmsNodejs"}};e.\u0275fac=function(i){return new(i||e)(b(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Ht=_`
    query findPartCodes($searchString: String, $vendorID: Int, $distributionCenter: String) {
  findPartCodes(
    SearchString: $searchString
    VendorID: $vendorID
    DistributionCenter: $distributionCenter
  ) {
    _id
    PRC
  }
}
    `,We=(()=>{let e=class e extends z{constructor(t){super(t),this.document=Ht,this.client="wmsNodejs"}};e.\u0275fac=function(i){return new(i||e)(b(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),qt=_`
    query findPart($productID: Int) {
  findPart(ProductID: $productID) {
    _id
    PartNumber
    ProductCodeID
    ProductTier
    ProductCode {
      _id
      ProductCodeNumber
    }
  }
}
    `,Ke=(()=>{let e=class e extends z{constructor(t){super(t),this.document=qt,this.client="wmsNodejs"}};e.\u0275fac=function(i){return new(i||e)(b(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Ut=_`
    query fetchReceiptLines($receiptHID: Int) {
  findReceiptLs(ReceiptL: {ReceiptHID: $receiptHID}) {
    _id
    ReceiptHID
    ProductID
    ExpectedQuantity
    DateCode
    CountryID
    ROHS
    LineNumber
    RECEIPTLDs {
      _id
      ReceiptLID
      ExpectedQuantity
      PurchaseOrderLID
      PurchaseOrderL {
        DueDate
        LineNumber
      }
    }
  }
}
    `,Ye=(()=>{let e=class e extends z{constructor(t){super(t),this.document=Ut,this.client="wmsNodejs"}};e.\u0275fac=function(i){return new(i||e)(b(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Bt=_`
    query findReceiptLine($receiptLineId: Int) {
  findReceiptLine(ReceiptLineID: $receiptLineId) {
    _id
    ReceiptHID
    ProductID
    ExpectedQuantity
    DateCode
    CountryID
    ROHS
    LineNumber
    RECEIPTLDs {
      _id
      ReceiptLID
      ExpectedQuantity
      PurchaseOrderLID
    }
  }
}
    `,Xe=(()=>{let e=class e extends z{constructor(t){super(t),this.document=Bt,this.client="wmsNodejs"}};e.\u0275fac=function(i){return new(i||e)(b(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Jt=_`
    query findPOLines($vendorID: Int, $productID: Int, $distributionCenter: String) {
  findPOLines(
    VendorID: $vendorID
    ProductID: $productID
    DistributionCenter: $distributionCenter
  ) {
    _id
    PurchaseOrderNumberLine
  }
}
    `,Ze=(()=>{let e=class e extends z{constructor(t){super(t),this.document=Jt,this.client="wmsNodejs"}};e.\u0275fac=function(i){return new(i||e)(b(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Gt=_`
    query findPOLine($purchaseOrderLID: Int) {
  findPOLine(PurchaseOrderLID: $purchaseOrderLID) {
    _id
    PurchaseOrderNumberLine
    DueDate
    MaxQuantity
  }
}
    `,et=(()=>{let e=class e extends z{constructor(t){super(t),this.document=Gt,this.client="wmsNodejs"}};e.\u0275fac=function(i){return new(i||e)(b(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Wt=_`
    query findPOs($purchaseOrderNumber: String, $distributionCenter: String, $limit: Int) {
  findPOs(
    PurchaseOrderNumber: $purchaseOrderNumber
    DistributionCenter: $distributionCenter
    limit: $limit
  ) {
    _id
    PurchaseOrderNumber
    VendorID
  }
}
    `,tt=(()=>{let e=class e extends z{constructor(t){super(t),this.document=Wt,this.client="wmsNodejs"}};e.\u0275fac=function(i){return new(i||e)(b(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Kt=_`
    mutation insertReceipt($receipt: insertReceiptH) {
  insertReceipt(Receipt: $receipt) {
    _id
    VendorID
    ExpectedArrivalDate
    SourceType
    ReceiptNumber
  }
}
    `,it=(()=>{let e=class e extends C{constructor(t){super(t),this.document=Kt,this.client="wmsNodejs"}};e.\u0275fac=function(i){return new(i||e)(b(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Yt=_`
    mutation receiptEntryLog($log: [insertUserEventLog]!) {
  insertUserEventLogs(log: $log) {
    _id
  }
}
    `,nt=(()=>{let e=class e extends C{constructor(t){super(t),this.document=Yt,this.client="wmsNodejs"}};e.\u0275fac=function(i){return new(i||e)(b(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Xt=_`
    mutation insertReceiptLine($receiptHID: Int!, $productID: Int!, $expectedQuantity: Int!, $dateCode: String, $countryID: Int, $ROHS: Boolean) {
  insertReceiptLine(
    ReceiptHID: $receiptHID
    ProductID: $productID
    ExpectedQuantity: $expectedQuantity
    DateCode: $dateCode
    CountryID: $countryID
    ROHS: $ROHS
  ) {
    _id
    ReceiptHID
    ProductID
    ExpectedQuantity
    DateCode
    CountryID
    ROHS
    LineNumber
  }
}
    `,rt=(()=>{let e=class e extends C{constructor(t){super(t),this.document=Xt,this.client="wmsNodejs"}};e.\u0275fac=function(i){return new(i||e)(b(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Zt=_`
    mutation insertReceiptLineDetail($receiptLineDetail: insertReceiptLD) {
  insertReceiptLineDetail(ReceiptLineDetail: $receiptLineDetail) {
    _id
    ReceiptLID
    ExpectedQuantity
    PurchaseOrderLID
  }
}
    `,st=(()=>{let e=class e extends C{constructor(t){super(t),this.document=Zt,this.client="wmsNodejs"}};e.\u0275fac=function(i){return new(i||e)(b(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ei=_`
    mutation deleteReceiptLine($receiptLineID: Int) {
  deleteReceiptLine(ReceiptLineID: $receiptLineID) {
    _id
    ReceiptHID
    ProductID
    ExpectedQuantity
    DateCode
    CountryID
    ROHS
    LineNumber
    RECEIPTLDs {
      _id
      ReceiptLID
      ExpectedQuantity
      PurchaseOrderLID
    }
  }
}
    `,ot=(()=>{let e=class e extends C{constructor(t){super(t),this.document=ei,this.client="wmsNodejs"}};e.\u0275fac=function(i){return new(i||e)(b(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ti=_`
    mutation deleteReceiptLineDetails($receiptLineID: Int) {
  deleteReceiptLineDetails(ReceiptLineID: $receiptLineID) {
    _id
    ReceiptLID
    ExpectedQuantity
    PurchaseOrderLID
  }
}
    `,ct=(()=>{let e=class e extends C{constructor(t){super(t),this.document=ti,this.client="wmsNodejs"}};e.\u0275fac=function(i){return new(i||e)(b(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ii=_`
    mutation updateReceiptLine($receiptLID: Int!, $productID: Int!, $expectedQuantity: Int!, $dateCode: String, $countryID: Int, $ROHS: Boolean) {
  updateReceiptLine(
    ReceiptLID: $receiptLID
    ProductID: $productID
    ExpectedQuantity: $expectedQuantity
    DateCode: $dateCode
    CountryID: $countryID
    ROHS: $ROHS
  )
}
    `,at=(()=>{let e=class e extends C{constructor(t){super(t),this.document=ii,this.client="wmsNodejs"}};e.\u0275fac=function(i){return new(i||e)(b(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ni=_`
    mutation updateReceiptLineDetail($receiptLDID: Int!, $expectedQuantity: Int!, $purchaseOrderLID: Int!) {
  updateReceiptLineDetail(
    ReceiptLDID: $receiptLDID
    ExpectedQuantity: $expectedQuantity
    PurchaseOrderLID: $purchaseOrderLID
  )
}
    `,lt=(()=>{let e=class e extends C{constructor(t){super(t),this.document=ni,this.client="wmsNodejs"}};e.\u0275fac=function(i){return new(i||e)(b(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ri=_`
    mutation deleteReceiptLineDetail($receiptLDID: Int!) {
  deleteReceiptLineDetail(ReceiptLDID: $receiptLDID) {
    _id
    ReceiptLID
    ExpectedQuantity
    PurchaseOrderLID
  }
}
    `,pt=(()=>{let e=class e extends C{constructor(t){super(t),this.document=ri,this.client="wmsNodejs"}};e.\u0275fac=function(i){return new(i||e)(b(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),si=_`
    mutation insertReceiptLineDetails($receiptLineDetails: [insertReceiptLD]) {
  insertReceiptLineDetails(ReceiptLineDetails: $receiptLineDetails) {
    _id
    ReceiptLID
    ExpectedQuantity
    PurchaseOrderLID
  }
}
    `,dt=(()=>{let e=class e extends C{constructor(t){super(t),this.document=si,this.client="wmsNodejs"}};e.\u0275fac=function(i){return new(i||e)(b(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),oi=_`
    mutation updateReceipt($_id: Int!, $vendorID: Int!, $expectedArrivalDate: String, $sourceType: String) {
  updateReceipt(
    _id: $_id
    VendorID: $vendorID
    ExpectedArrivalDate: $expectedArrivalDate
    SourceType: $sourceType
  )
}
    `,ut=(()=>{let e=class e extends C{constructor(t){super(t),this.document=oi,this.client="wmsNodejs"}};e.\u0275fac=function(i){return new(i||e)(b(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ci=_`
    mutation deleteReceipt($receiptID: Int, $receiptLineDeleteEventID: Int, $receiptLineDetailDeleteEventID: Int, $distributionCenter: String, $username: String) {
  deleteReceipt(
    ReceiptID: $receiptID
    ReceiptLineDeleteEventID: $receiptLineDeleteEventID
    ReceiptLineDetailDeleteEventID: $receiptLineDetailDeleteEventID
    DistributionCenter: $distributionCenter
    Username: $username
  ) {
    result
  }
}
    `,ht=(()=>{let e=class e extends C{constructor(t){super(t),this.document=ci,this.client="wmsNodejs"}};e.\u0275fac=function(i){return new(i||e)(b(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function li(n,e){n&1&&(c(0,"div",31),d(1,"Vendor ID"),o())}function pi(n,e){n&1&&(c(0,"div",32),d(1," Expected Arrival Date "),o())}function di(n,e){n&1&&(c(0,"div",32),d(1,"Source"),o())}function ui(n,e){if(n&1&&v(0,"nz-option",33),n&2){let s=e.$implicit;p("nzLabel",s.text)("nzValue",s.value)}}function hi(n,e){if(n&1&&(c(0,"div",34),d(1),o()),n&2){let s=u();a(1),S(" ",s.vendorNumber," ")}}function mi(n,e){if(n&1&&(c(0,"div",35),d(1),o()),n&2){let s=u();a(1),S(" ",s.receiptExpectedArrivalDate," ")}}function fi(n,e){if(n&1&&(c(0,"div",35),d(1),o()),n&2){let s=u();a(1),S(" ",s.receiptSource," ")}}function Di(n,e){if(n&1){let s=E();c(0,"button",36),g("click",function(){y(s);let i=u();return I(i.editReceipt())}),d(1,"Edit"),o()}}function bi(n,e){if(n&1){let s=E();c(0,"button",37),g("nzOnConfirm",function(){y(s);let i=u();return I(i.deleteReceipt())}),d(1," Delete "),o()}}function Li(n,e){if(n&1&&v(0,"nz-option",33),n&2){let s=e.$implicit;p("nzLabel",s.text)("nzValue",s.value)}}function _i(n,e){if(n&1){let s=E();c(0,"div",38)(1,"button",39),g("click",function(){y(s);let i=u();return I(i.saveReceiptLine())}),d(2," Save "),o(),c(3,"button",39),g("click",function(){y(s);let i=u();return I(i.clearReceiptLine())}),d(4," Clear "),o(),c(5,"button",40),g("nzOnConfirm",function(){y(s);let i=u();return I(i.deleteReceiptLine())}),d(6," Delete "),o()()}}function yi(n,e){if(n&1){let s=E();c(0,"div",15)(1,"button",41),g("click",function(){y(s);let i=u();return I(i.addReceiptLine())}),d(2," Add "),o()()}if(n&2){let s=u();a(1),p("disabled",!s.receiptSelected)}}function Ii(n,e){if(n&1&&(c(0,"tr")(1,"td"),d(2),o(),c(3,"td"),d(4),o()()),n&2){let s=e.$implicit;a(2),A(s.PurchaseOrderNumberLine),a(2),A(s.ExpectedQuantity)}}function gi(n,e){if(n&1){let s=E();c(0,"tr")(1,"td",49),g("nzExpandChange",function(i){let l=y(s).$implicit;return I(l.Expanded=i)}),o(),c(2,"td",50),d(3),o(),c(4,"td",50),d(5),o(),c(6,"td",50),d(7),o(),c(8,"td",50)(9,"button",36),g("click",function(){let r=y(s).$implicit,l=u(2);return I(l.selectReceiptLine(r._id,r.ReceiptLineDetails))}),d(10," Select "),o()()(),c(11,"tr",51)(12,"nz-table",42,52)(14,"thead")(15,"tr")(16,"th",46),d(17,"PO Line"),o(),c(18,"th"),d(19,"Quantity"),o()()(),c(20,"tbody"),x(21,Ii,5,2,"tr",53),o()()()}if(n&2){let s=e.$implicit,t=V(13);a(1),p("nzExpand",s.Expanded)("ngClass",s.Selected?"selected":""),a(1),p("ngClass",s.Selected?"selected":""),a(1),S(" ",s.LineNumber," "),a(1),p("ngClass",s.Selected?"selected":""),a(1),S(" ",s.PartNumber," "),a(1),p("ngClass",s.Selected?"selected":""),a(1),S(" ",s.ExpectedQuantity," "),a(1),p("ngClass",s.Selected?"selected":""),a(3),p("nzExpand",s.Expanded),a(1),p("nzData",s.ReceiptLineDetails),a(9),p("ngForOf",t.data)}}function Ri(n,e){if(n&1&&(c(0,"nz-table",42,43)(2,"thead")(3,"tr"),v(4,"th",44),c(5,"th",45),d(6,"Line #"),o(),c(7,"th",46),d(8,"Part #"),o(),c(9,"th",47),d(10,"Quantity"),o(),v(11,"th"),o()(),c(12,"tbody"),x(13,gi,22,12,"ng-template",48),o()()),n&2){let s=V(1),t=u();p("nzData",t.receiptLines),a(13),p("ngForOf",s.data)}}function vi(n,e){if(n&1&&(c(0,"div",1)(1,"div",54),P(2),v(3,"nz-alert",55),T(),o()()),n&2){let s=u();a(3),p("nzType",s.alertType==="error"?"error":s.alertType==="success"?"success":s.alertType==="info"?"info":"warning")("nzMessage",s.message)}}function xi(n,e){if(n&1&&(d(0),v(1,"br"),d(2," Total Quantity: "),c(3,"span",50),d(4),o()),n&2){let s=u();S("Expected Quantity: ",s.quantity,""),a(3),p("ngClass",s.lineDetailTotalClass),a(1),A(s.lineDetailTotal)}}function Ni(n,e){if(n&1){let s=E();c(0,"div",1)(1,"span",62),d(2),o(),c(3,"span",63),d(4),o(),c(5,"span",63),d(6),o(),c(7,"button",36),g("click",function(){let r=y(s).index,l=u(3);return I(l.removeDetailLine(r))}),v(8,"span",64),o()()}if(n&2){let s=e.$implicit;a(2),S(" ",s.PurchaseOrderNumberLine," "),a(2),S(" ",s.DueDate," "),a(2),S(" ",s.Quantity," ")}}function Si(n,e){if(n&1&&(c(0,"div"),x(1,Ni,9,3,"div",61),o()),n&2){let s=u(2);a(1),p("ngForOf",s.lineDetails)}}function zi(n,e){if(n&1&&v(0,"nz-option",33),n&2){let s=e.$implicit;p("nzLabel",s.text)("nzValue",s.value)}}function Ci(n,e){if(n&1&&(c(0,"div"),v(1,"div",65),c(2,"div",1)(3,"div",54),P(4),v(5,"nz-alert",55),T(),o()()()),n&2){let s=u(2);a(5),p("nzType",s.receiptLineDetailAlertType==="error"?"error":s.receiptLineDetailAlertType==="success"?"success":s.receiptLineDetailAlertType==="info"?"info":"warning")("nzMessage",s.receiptLineDetailMessage)}}function Ei(n,e){if(n&1){let s=E();P(0),c(1,"div",1)(2,"div",56),d(3,"PO Number-Line"),o(),c(4,"div",38),d(5,"DueDate"),o(),c(6,"div",38),d(7,"Quantity"),o()(),x(8,Si,2,1,"div",30),c(9,"div",57)(10,"div",56)(11,"nz-select",58),g("ngModelChange",function(i){y(s);let r=u();return I(r.poLineID=i)})("ngModelChange",function(){y(s);let i=u();return I(i.onPONumberLineChange())})("nzFocus",function(){y(s);let i=u();return I(i.resetReceiptLineDetailMessage())}),x(12,zi,1,2,"nz-option",8),o()(),c(13,"div",38),d(14),o(),c(15,"div",38)(16,"input",59),g("ngModelChange",function(i){y(s);let r=u();return I(r.receiptLineDetailQuantity=i)})("ngModelChange",function(i){y(s);let r=u();return I(r.onReceiptLineDetailQuantityChange(i))})("focusout",function(i){y(s);let r=u();return I(r.onReceiptLineDetailQuantityFocusOut(i))})("focus",function(){y(s);let i=u();return I(i.resetReceiptLineDetailMessage())}),o()(),c(17,"button",41),g("click",function(){y(s);let i=u();return I(i.addDetailLine())}),v(18,"span",60),o()(),x(19,Ci,6,2,"div",30),T()}if(n&2){let s=u();a(8),p("ngIf",s.lineDetails.length>0),a(3),p("nzSelectOnTab",s.selectOnTab)("ngModel",s.poLineID)("nzShowArrow",!1),a(1),p("ngForOf",s.poLineList),a(2),S(" ",s.lineDetails[0].DueDate," "),a(2),p("ngModel",s.receiptLineDetailQuantity)("max",s.receiptLineDetailQuantityMax),a(1),p("disabled",!s.poLineID||!(s.receiptLineDetailQuantity>0)),a(2),p("ngIf",s.receiptLineDetailMessage)}}function Oi(n,e){if(n&1&&v(0,"nz-option",33),n&2){let s=e.$implicit;p("nzLabel",s.text)("nzValue",s.value)}}function Pi(n,e){if(n&1){let s=E();P(0),c(1,"div",1)(2,"div",66),d(3,"PO Number"),o(),c(4,"div",66),d(5,"Vendor ID"),o(),c(6,"div",38),d(7,"Expected Arrival Date"),o(),c(8,"div",67),d(9,"Source"),o()(),c(10,"div",1)(11,"div",66)(12,"nz-select",68),g("nzOnSearch",function(i){y(s);let r=u();return I(r.searchPONumbers(i))})("ngModelChange",function(i){y(s);let r=u();return I(r.poNumber=i)})("ngModelChange",function(i){y(s);let r=u();return I(r.onPONumberChange(i))}),x(13,Oi,1,2,"nz-option",8),o()(),c(14,"div",69),d(15),o(),c(16,"div",38)(17,"nz-date-picker",70),g("ngModelChange",function(i){y(s);let r=u();return I(r.expectedArrivalDate=i)}),o()(),c(18,"div",67)(19,"nz-select",71),g("ngModelChange",function(i){y(s);let r=u();return I(r.sourceType=i)}),o()()(),T()}if(n&2){let s=u();a(12),p("nzSelectOnTab",s.selectOnTab)("nzShowArrow",!1)("nzFilterOption",s.nzFilterOption)("ngModel",s.poNumber),a(1),p("ngForOf",s.poNumberList),a(2),S(" ",s.vendorNumber," "),a(2),p("ngModel",s.expectedArrivalDate),a(2),p("ngModel",s.sourceType)("nzOptions",s.sourceTypeOptions)}}function Ti(n,e){n&1&&v(0,"div")}function wi(n,e){n&1&&v(0,"div")}var W=(()=>{let e=class e{constructor(t,i,r,l,h,O,ft,Dt,bt,Lt,_t,yt,It,gt,Rt,vt,xt,Nt,St,zt,Ct,Et,Ot,Pt,Tt,wt,Mt,Vt){this._userInfo=t,this._title=i,this.titleService=r,this._fetchVendorList=l,this._findVendor=h,this._findReceipt=O,this._findReceiptList=ft,this._insertReceipt=Dt,this._findPartCodes=bt,this._insertReceiptLine=Lt,this._fetchReceiptLines=_t,this._findPOLines=yt,this._findPart=It,this._findPOLine=gt,this._insertReceiptLineDetail=Rt,this._findReceiptLine=vt,this._deleteReceiptLine=xt,this._deleteReceiptLineDetails=Nt,this._updateReceipt=St,this._updateReceiptLine=zt,this._updateReceiptLineDetail=Ct,this._deleteReceiptLineDetail=Et,this._insertReceiptLineDetails=Ot,this._deleteReceipt=Pt,this._findPOs=Tt,this._findVendorByPO=wt,this._receiptEntryLog=Mt,this._eventLog=Vt,this.alertType="success",this.receiptLineDetailAlertType="success",this.receiptList=[],this.poNumberList=[],this.partList=[],this.poLineList=[],this.sourceTypeOptions=[{label:"Manually entered",value:"manual",disabled:!1},{label:"ASN from vendor",value:"ASN",disabled:!0},{label:"Generated from packing list scan",value:"scan",disabled:!0}],this.ROHSOptions=[{label:"Yes",value:"true"},{label:"No",value:"false"}],this.nzFilterOption=()=>!0,this.receiptLineDetailCancelDisabled=!0,this.receiptLineDetailOKDisabled=!0,this.receiptLineDetailClosable=!1,this.lineDetailOkDisabled=!0,this.lineDetails=[],this.receiptModalOkDisabled=!0,this.receiptModalStyle={width:"900px"},this.selectOnTab=!0,this.vendorListSubscription=new f,this.findVendorSubscription=new f,this.receiptSubscription=new f,this.receiptListSubscription=new f,this.insertReceiptSubscription=new f,this.partCodeListSubscription=new f,this.countryListSubscription=new f,this.insertReceiptLineSubscription=new f,this.receiptLinesListSubscription=new f,this.findPOLinesSubscription=new f,this.findCountrySubscription=new f,this.findPartSubscription=new f,this.findPOLineSubscripton=new f,this.insertReceiptLineDetailSubscription=new f,this.findReceiptLineSubscription=new f,this.deleteReceiptLineSubscription=new f,this.deleteReceiptLineDetailsSubscription=new f,this.updateReceiptSubscription=new f,this.updateReceiptLineSubscription=new f,this.updateReceiptLineDetailSubscription=new f,this.deleteReceiptLineDetailSubscription=new f,this.insertReceiptLineDetailsSubscription=new f,this.deleteReceiptSubscription=new f,this.findPOsSubscription=new f,this.findVendorByPOSubscription=new f,this._title.update("Receipt Entry"),this.titleService.setTitle("Receipt Entry")}ngOnInit(){this.editingReceipt=!1,this.lineDetailTotal=0,this.lineDetailTitle="Title",this.getVendors()}getVendors(){this.vendorList=[],this.vendorListSubscription.add(this._fetchVendorList.fetch({},{fetchPolicy:"network-only"}).subscribe({next:t=>{t.data.fetchVendorList.map(i=>{this.vendorList.push({label:i.VendorNumber.trim()+(i.VendorName.trim()==""?"":"-"+i.VendorName.trim()),value:i._id.toString()})})},error:t=>{this.alertType="error",this.message="Error getting Vendor list - "+t}}))}onReceiptModalCancel(){this.clearReceiptModal()}clearReceiptModal(){this.editingReceipt=!1,this.poNumber=null,this.vendorID=null,this.expectedArrivalDate=null,this.sourceType=null,this.receiptModalVisible=!1}clearReceipt(){this.receiptID=null,this.receiptList=null,this.receiptNumber=null,this.receiptVendorID=null,this.vendorNumber=null,this.receiptExpectedArrivalDate=null,this.receiptSource=null,this.receiptLines=null}onReceiptModalOk(){this.editingReceipt?this.updateReceipt():this.insertReceipt()}editReceipt(){this.editingReceipt=!0,this.vendorID=this.receiptVendorID.toString(),this.expectedArrivalDate=this.receiptExpectedArrivalDate,this.sourceType=this.receiptSource,this.receiptModalTitle="Edit Receipt "+this.receiptID,this.receiptModalVisible=!0}deleteReceipt(){if(this.receiptID){let t;this.deleteReceiptSubscription.add(this._deleteReceipt.mutate({receiptID:Number(this.receiptID),receiptLineDeleteEventID:R.Event_ReceiptEntry_LineDelete,receiptLineDetailDeleteEventID:R.Event_ReceiptEntry_LineDetailDelete,distributionCenter:N.DistributionCenter,username:this._userInfo.userName}).subscribe({next:i=>{t=Number(i.data.deleteReceipt[0].result)},complete:()=>{if(t==1){this.insertLog([{UserEventID:R.Event_ReceiptEntry_HeaderDelete,UserName:this._userInfo.userName,DistributionCenter:N.DistributionCenter,ReceiptHeader:Number(this.receiptID)}]);let i={DistributionCenter:N.DistributionCenter,ReceiptHeader:Number(this.receiptID)};this.insertNewLog([{UserName:this._userInfo.userName,EventTypeID:R.Event_ReceiptEntry_HeaderDelete,Log:JSON.stringify(i)}]),this.clearReceipt(),this.clearReceiptLine(),this.clearReceiptLineDetail(),this.receiptSelected=!1,this.alertType="success",this.message="Receipt deleted"}else this.alertType="warning",this.message=`Receipt ${this.receiptID} cannot be deleted. Items have already been received.`},error:i=>{this.alertType="error",this.message="Error deleting Receipt - "+i}}))}}searchReceipts(t){if(t){let i=[];this.receiptListSubscription.add(this._findReceiptList.fetch({receiptID:t.toUpperCase()},{fetchPolicy:"network-only"}).subscribe({next:r=>{r.data.findReceipts.map(l=>{i.push({text:l.ReceiptNumber,value:l._id.toString()})})},error:r=>{this.alertType="error",this.message="Error searching Receipts - "+r},complete:()=>{this.receiptList=i}}))}else this.receiptList=[]}searchPONumbers(t){if(t){let i=[];this.findPOsSubscription.add(this._findPOs.fetch({purchaseOrderNumber:t.toUpperCase(),distributionCenter:this._userInfo.distributionCenter,limit:20},{fetchPolicy:"network-only"}).subscribe({next:r=>{r.data.findPOs.map(l=>{i.push({text:l.PurchaseOrderNumber,value:l._id.toString()})})},error:r=>{this.alertType="error",this.message="Error searching PO Numbers - "+r},complete:()=>{this.poNumberList=i}}))}else this.poNumberList=[]}searchPartNumbers(t){this.getPartNumbers(t)}onPartNumberFocus(){this.getPartNumbers(null),this.partNumberSelectOpen=!0}getPartNumbers(t){let i=[];this.partCodeListSubscription.add(this._findPartCodes.fetch({searchString:t||"",vendorID:Number(this.vendorID),distributionCenter:this._userInfo.distributionCenter},{fetchPolicy:"network-only"}).subscribe({next:r=>{r.data.findPartCodes.map(l=>{i.push({text:l.PRC,value:l._id.toString()})})},error:r=>{this.alertType="error",this.message="Error searching Part Numbers - "+r},complete:()=>{this.partList=i}}))}searchPOLines(t){if(t){let i=[];this.findPOLinesSubscription.add(this._findPOLines.fetch({vendorID:Number(this.receiptVendorID),productID:Number(this.partNumberID)},{fetchPolicy:"network-only"}).subscribe({next:r=>{r.data.findPOLines.map(l=>{i.push({text:l.PurchaseOrderNumberLine,value:l._id.toString()})})},error:r=>{this.receiptLineDetailAlertType="error",this.receiptLineDetailMessage="Error searching PO Number-Lines - "+r},complete:()=>{this.poLineList=i}}))}else this.poLineList=[]}getPOLines(){if(this.receiptVendorID&&this.partNumberID){let t=[];this.findPOLinesSubscription.add(this._findPOLines.fetch({vendorID:Number(this.receiptVendorID),productID:Number(this.partNumberID),distributionCenter:this._userInfo.distributionCenter},{fetchPolicy:"network-only"}).subscribe({next:i=>{i.data.findPOLines.map(r=>{this.lineDetails?this.lineDetails.find(h=>h.PurchaseOrderLID==r._id)||t.push({text:r.PurchaseOrderNumberLine,value:r._id.toString()}):t.push({text:r.PurchaseOrderNumberLine,value:r._id.toString()})})},error:i=>{this.alertType="error",this.message="Error finding PO Number-Lines - "+i},complete:()=>{this.poLineList=t}}))}else this.poLineList=[]}onPONumberLineChange(){this.poLineID&&this.findPOLineSubscripton.add(this._findPOLine.fetch({purchaseOrderLID:Number(this.poLineID)},{fetchPolicy:"network-only"}).subscribe({next:t=>{this.receiptLineDetailQuantityMax=Number(t.data.findPOLine[0].MaxQuantity)},error:t=>{this.receiptLineDetailAlertType="error",this.receiptLineDetailMessage="Error finding PO Number-Line - "+t}}))}onReceiptLineDetailQuantityChange(t){if(this.receiptLineDetailAlertType="success",this.receiptLineDetailMessage=null,Number(t)>this.receiptLineDetailQuantityMax){this.receiptLineDetailAlertType="warning",this.receiptLineDetailMessage="The max quantity for this PO Line is "+this.receiptLineDetailQuantityMax,this.receiptLineDetailQuantity="";return}}onReceiptLineDetailQuantityFocusOut(t){this.receiptLineDetailAlertType="success",this.receiptLineDetailMessage=null,Number(this.receiptLineDetailQuantity)<1&&(this.receiptLineDetailAlertType="warning",this.receiptLineDetailMessage="Quantity must be greater than 0",this.receiptLineDetailQuantity="")}onReceiptLineQuantityFocusOut(){this.alertType="success",this.message=null,Number(this.quantity)<1&&(this.alertType="warning",this.message="Quantity must be greater than 0",this.quantity="")}getReceiptVendor(){this.receiptVendorID&&this.findVendorSubscription.add(this._findVendor.fetch({vendor:{_id:Number(this.receiptVendorID)}},{fetchPolicy:"network-only"}).subscribe({next:t=>{this.vendorNumber=(t.data.findVendor.VendorNumber?t.data.findVendor.VendorNumber:"")+(t.data.findVendor.VendorName?" - "+t.data.findVendor.VendorName:""),this.vendorID=t.data.findVendor._id?t.data.findVendor._id:null},error:t=>{this.alertType="error",this.message="Error finding Vendor - "+t}}))}getVendor(t){this.findVendorByPOSubscription.add(this._findVendorByPO.fetch({purchaseOrder:{_id:t}},{fetchPolicy:"network-only"}).subscribe({next:i=>{this.vendorNumber=(i.data.findVendorByPO.VendorNumber?i.data.findVendorByPO.VendorNumber:"")+(i.data.findVendorByPO.VendorName?" - "+i.data.findVendorByPO.VendorName:""),this.vendorID=i.data.findVendorByPO._id},error:i=>{this.alertType="error",this.message="Error finding Vendor - "+i}}))}getReceiptLines(){let t=[];this.receiptLinesListSubscription.add(this._fetchReceiptLines.fetch({receiptHID:Number(this.receiptID)},{fetchPolicy:"network-only"}).subscribe({next:i=>{i.data.findReceiptLs.map(r=>{let l=[];r.RECEIPTLDs.map(h=>{l.push({_id:h._id,ReceiptLID:h.ReceiptLID,ExpectedQuantity:h.ExpectedQuantity,PurchaseOrderLID:h.PurchaseOrderLID,DueDate:new Date(Number(h.PurchaseOrderL.DueDate)).toLocaleString(),PurchaseOrderNumberLine:""})}),t.push({_id:r._id,ReceiptHID:r.ReceiptHID,ProductID:r.ProductID,PartNumber:"",ExpectedQuantity:r.ExpectedQuantity,DateCode:r.DateCode,CountryID:r.CountryID,ISO3:"",ROHS:r.ROHS,LineNumber:r.LineNumber,ReceiptLineDetails:l,Expanded:!1,Selected:r._id==Number(this.receiptLineID)})})},complete:()=>{t.map(i=>{let r="";this.findPartSubscription.add(this._findPart.fetch({productID:i.ProductID},{fetchPolicy:"network-only"}).subscribe({next:l=>{r=(l.data.findPart.ProductCode.ProductCodeNumber?l.data.findPart.ProductCode.ProductCodeNumber.trim()+" ":"")+(l.data.findPart.PartNumber?l.data.findPart.PartNumber.trim():"")},complete:()=>{i.PartNumber=r},error:l=>{this.alertType="error",this.message="Error finding Part Number - "+l}})),i.ReceiptLineDetails.map(l=>{let h="";this.findPOLineSubscripton.add(this._findPOLine.fetch({purchaseOrderLID:l.PurchaseOrderLID},{fetchPolicy:"network-only"}).subscribe({next:O=>{h=O.data.findPOLine[0].PurchaseOrderNumberLine},complete:()=>{l.PurchaseOrderNumberLine=h},error:O=>{this.alertType="error",this.message="Error finding PO Number-Line - "+O}}))})}),this.receiptLines=t},error:i=>{this.alertType="error",this.message="Error getting Receipt Lines - "+i}}))}updateReceipt(){if(this.receiptID)if(this.vendorID){this.vendorSearchClass="valid";let t=new Date(this.expectedArrivalDate);t.setHours(t.getHours()-7),this.updateReceiptSubscription.add(this._updateReceipt.mutate({_id:Number(this.receiptID),vendorID:Number(this.vendorID),expectedArrivalDate:t.toLocaleDateString(),sourceType:this.sourceType}).subscribe({complete:()=>{this.insertLog([{UserEventID:R.Event_ReceiptEntry_HeaderUpdate,UserName:this._userInfo.userName,DistributionCenter:N.DistributionCenter,ReceiptHeader:Number(this.receiptID),VendorName:this.vendorNumber.toString()}]);let i={DistributionCenter:N.DistributionCenter,ReceiptHeader:Number(this.receiptID),VendorName:this.vendorNumber.toString()};this.insertNewLog([{UserName:this._userInfo.userName,EventTypeID:R.Event_ReceiptEntry_HeaderUpdate,Log:JSON.stringify(i)}]),this.clearReceiptModal(),this.findReceipt(),this.alertType="success",this.message="Receipt updated"},error:i=>{this.clearReceiptModal(),this.alertType="error",this.message="Error updating Receipt - "+i}}))}else this.vendorSearchClass="invalid"}insertReceipt(){if(this.receiptLines=null,this.vendorID){this.vendorSearchClass="valid";let t=new Date(this.expectedArrivalDate);t.setHours(t.getHours()-7),this.insertReceiptSubscription.add(this._insertReceipt.mutate({receipt:{VendorID:Number(this.vendorID),ExpectedArrivalDate:t.toLocaleDateString(),SourceType:this.sourceType}}).subscribe({next:i=>{this.receiptID=i.data.insertReceipt._id.toString(),this.receiptSelected=!0},error:i=>{this.clearReceiptModal(),this.alertType="error",this.message="Error inserting Receipt - "+i},complete:()=>{this.insertLog([{UserEventID:R.Event_ReceiptEntry_HeaderCreating,UserName:this._userInfo.userName,DistributionCenter:N.DistributionCenter,ReceiptHeader:Number(this.receiptID),VendorName:this.vendorNumber.toString()}]);let i={DistributionCenter:N.DistributionCenter,ReceiptHeader:Number(this.receiptID),VendorName:this.vendorNumber.toString()};this.insertNewLog([{UserName:this._userInfo.userName,EventTypeID:R.Event_ReceiptEntry_HeaderCreating,Log:JSON.stringify(i)}]),this.alertType="success",this.message="Receipt added",this.clearReceiptModal(),this.findReceipt()}}))}else this.vendorSearchClass="invalid"}findReceipt(){this.receiptID&&this.receiptSubscription.add(this._findReceipt.fetch({receiptID:Number(this.receiptID)},{fetchPolicy:"network-only"}).subscribe({next:t=>{this.receiptNumber=t.data.findReceipt.ReceiptNumber,this.receiptVendorID=t.data.findReceipt.VendorID,this.receiptExpectedArrivalDate=new Date(Number(t.data.findReceipt.ExpectedArrivalDate)).toLocaleDateString(),this.receiptSource=t.data.findReceipt.SourceType},complete:()=>{this.getReceiptVendor(),this.receiptList=[{value:this.receiptID.toString(),text:this.receiptNumber}]},error:t=>{this.alertType="error",this.message="Error loading Receipt - "+t}}))}onPartNumberClick(t){t&&this.findPartSubscription.add(this._findPart.fetch({productID:Number(t)},{fetchPolicy:"network-only"}).subscribe({next:i=>{this.partNumber=i.data.findPart.PartNumber},error:i=>{this.alertType="error",this.message="Error finding Part Number - "+i}}))}onReceiptIDChange(t){this.clearReceiptLine(),this.clearReceiptLineDetail(),this.clearMessages(),t?(this.receiptSelected=!0,this.findReceipt(),this.getReceiptLines()):(this.receiptSelected=!1,this.clearReceipt())}onPONumberChange(t){t?this.getVendor(Number(t)):(this.vendorID=null,this.vendorNumber=null)}clearMessages(){this.alertType="success",this.message=null,this.receiptLineDetailAlertType="success",this.receiptLineDetailMessage=null}selectReceiptLine(t,i){this.clearMessages(),this.receiptLineDetailsTotal=0,t&&(i&&(this.receiptLineDetailsList=[],i.map(r=>{this.receiptLineDetailsList.push(r),this.receiptLineDetailsTotal+=Number(r.ExpectedQuantity)})),this.findReceiptLineSubscription.add(this._findReceiptLine.fetch({receiptLineId:Number(t)},{fetchPolicy:"network-only"}).subscribe({next:r=>{this.receiptLineID=r.data.findReceiptLine._id,this.partNumberID=r.data.findReceiptLine.ProductID.toString(),this.quantity=r.data.findReceiptLine.ExpectedQuantity},complete:()=>{this.findPartSubscription.add(this._findPart.fetch({productID:Number(this.partNumberID)},{fetchPolicy:"network-only"}).subscribe({next:r=>{this.partNumber=(r.data.findPart.ProductCode.ProductCodeNumber?r.data.findPart.ProductCode.ProductCodeNumber.trim()+" ":"")+(r.data.findPart.PartNumber?r.data.findPart.PartNumber.trim():"")},complete:()=>{this.partList=[{value:this.partNumberID.toString(),text:this.partNumber}],this.receiptLines.map(r=>{r._id==Number(t)?r.Selected=!0:r.Selected=!1})},error:r=>{this.alertType="error",this.message="Error finding Part Number - "+r}})),this.getPOLines()},error:r=>{this.alertType="error",this.message="Error finding Receipt Line - "+r}})))}deleteReceiptLine(){this.receiptLineID&&this.deleteReceiptLineDetailsSubscription.add(this._deleteReceiptLineDetails.mutate({receiptLineID:Number(this.receiptLineID)}).subscribe({next:t=>{t.data.deleteReceiptLineDetails.map(i=>{this.insertLog([{UserEventID:R.Event_ReceiptEntry_LineDetailDelete,UserName:this._userInfo.userName,DistributionCenter:N.DistributionCenter,ReceiptHeader:Number(this.receiptID),ReceiptLine:Number(this.receiptLineID)}]);let r={DistributionCenter:N.DistributionCenter,ReceiptHeader:Number(this.receiptID),ReceiptLine:Number(this.receiptLineID)};this.insertNewLog([{UserName:this._userInfo.userName,EventTypeID:R.Event_ReceiptEntry_LineDetailDelete,Log:JSON.stringify(r)}])})},complete:()=>{this.deleteReceiptLineSubscription.add(this._deleteReceiptLine.mutate({receiptLineID:Number(this.receiptLineID)}).subscribe({complete:()=>{this.insertLog([{UserEventID:R.Event_ReceiptEntry_LineDelete,UserName:this._userInfo.userName,DistributionCenter:N.DistributionCenter,ReceiptHeader:Number(this.receiptID),ReceiptLine:Number(this.receiptLineID)}]);let t={DistributionCenter:N.DistributionCenter,ReceiptHeader:Number(this.receiptID),ReceiptLine:Number(this.receiptLineID)};this.insertNewLog([{UserName:this._userInfo.userName,EventTypeID:R.Event_ReceiptEntry_LineDelete,Log:JSON.stringify(t)}]);let i=this.receiptLines.findIndex(r=>r._id===this.receiptLineID);if(i>=0){this.receiptLines.splice(i,1);let r=[];this.receiptLines.map(l=>{r.push(l)}),this.receiptLines=r,this.clearReceiptLine(),this.alertType="success",this.message="Receipt Line deleted"}},error:t=>{this.alertType="error",this.message="Error deleting Receipt Line - "+t}}))},error:t=>{this.alertType="error",this.message="Error deleting Receipt Line Details - "+t}}))}saveReceiptLine(){if(this.receiptID){this.partNumberClass="valid",this.quantityClass="inputValid";let t=!0;this.receiptID||(t=!1),this.partNumberID||(t=!1,this.partNumberClass="invalid"),this.quantity||(t=!1,this.quantityClass="invalid"),t&&this.showReceiptLineDetail("Save")}}clearReceiptLine(){this.receiptLineID=null,this.partNumber=null,this.partNumberID=null,this.partList=[],this.quantity=null,this.receiptLineDetailsTotal=null,this.receiptLineDetailsList=null,this.clearReceiptLineDetail(),this.receiptLines&&this.receiptLines.map(t=>{t.Selected=!1})}clearReceiptLineDetail(){this.lineDetailTotal=0,this.lineDetails=[],this.poLineID=null,this.receiptLineDetailQuantity=null,this.poLineList=null,this.lineDetailOkDisabled=!0}addReceipt(){this.clearReceipt(),this.clearReceiptLine(),this.clearReceiptLineDetail(),this.clearMessages(),this.editingReceipt=!1,this.receiptModalTitle="New Receipt",this.receiptModalVisible=!0}addReceiptLine(){this.clearMessages(),this.partNumberClass="valid",this.quantityClass="inputValid";let t=!0;this.receiptID||(t=!1),this.partNumberID||(t=!1,this.partNumberClass="invalid"),this.quantity||(t=!1,this.quantityClass="invalid"),t&&this.showReceiptLineDetail("Add")}showReceiptLineDetail(t){this.getPOLines(),this.receiptLineDetailOkText=t,this.receiptLineDetailsList&&(this.lineDetails=[],this.lineDetailTotal=0,this.receiptLineDetailsList.map(i=>{this.lineDetailTotal+=Number(i.ExpectedQuantity),this.lineDetails.push({Quantity:i.ExpectedQuantity,DueDate:i.DueDate||"",PurchaseOrderLID:i.PurchaseOrderLID,PurchaseOrderNumberLine:i.PurchaseOrderNumberLine})})),this.receiptLineDetailVisible=!0}hideReceiptLineDetail(){this.receiptLineDetailVisible=!1,this.clearReceiptLineDetail()}onReceiptLineDetailOKClick(){if(this.receiptLineDetailOkText=="Add"){let t;this.insertReceiptLineSubscription.add(this._insertReceiptLine.mutate({receiptHID:Number(this.receiptID),productID:Number(this.partNumberID),expectedQuantity:Number(this.quantity),dateCode:null,countryID:null,ROHS:null}).subscribe({next:i=>{this.receiptLineID=i.data.insertReceiptLine[0]._id,t=i.data.insertReceiptLine[0].LineNumber},complete:()=>{this.insertLog([{UserEventID:R.Event_ReceiptEntry_LineCreating,UserName:this._userInfo.userName,DistributionCenter:N.DistributionCenter,ReceiptHeader:Number(this.receiptID),ReceiptLine:Number(this.receiptLineID)}]);let i={DistributionCenter:N.DistributionCenter,ReceiptHeader:Number(this.receiptID),ReceiptLine:Number(this.receiptLineID)};this.insertNewLog([{UserName:this._userInfo.userName,EventTypeID:R.Event_ReceiptEntry_LineCreating,Log:JSON.stringify(i)}]);let r={_id:Number(this.receiptLineID),ReceiptHID:Number(this.receiptID),ProductID:Number(this.partNumberID),PartNumber:this.partNumber,ExpectedQuantity:Number(this.quantity),DateCode:null,CountryID:null,ISO3:null,ROHS:null,LineNumber:t,ReceiptLineDetails:null,Expanded:!1,Selected:!1};this.alertType="success",this.message="Receipt Line added.",this.addLineDetails();let l=[];l.push(r),this.receiptLines=l,this.getReceiptLines(),this.getPOLines()},error:i=>{this.alertType="error",this.message="Error inserting Receipt Line - "+i}}))}else this.receiptLineDetailOkText=="Save"&&this.updateReceiptLineSubscription.add(this._updateReceiptLine.mutate({receiptLID:Number(this.receiptLineID),productID:Number(this.partNumberID),expectedQuantity:Number(this.quantity),dateCode:null,countryID:null,ROHS:null}).subscribe({complete:()=>{this.insertLog([{UserEventID:R.Event_ReceiptEntry_Lineupdate,UserName:this._userInfo.userName,DistributionCenter:N.DistributionCenter,ReceiptHeader:Number(this.receiptID),ReceiptLine:Number(this.receiptLineID)}]);let t={DistributionCenter:N.DistributionCenter,ReceiptHeader:Number(this.receiptID),ReceiptLine:Number(this.receiptLineID)};this.insertNewLog([{UserName:this._userInfo.userName,EventTypeID:R.Event_ReceiptEntry_Lineupdate,Log:JSON.stringify(t)}]),Number(this.quantity)!=Number(this.receiptLineDetailsTotal)?this.lineDetailOkDisabled=!0:this.lineDetailOkDisabled=!1,this.getPOLines();let i=this.receiptLines.find(r=>r._id==this.receiptLineID);i&&(i.ProductID=Number(this.partNumberID),i.PartNumber=this.partNumber,i.ExpectedQuantity=Number(this.quantity),i.DateCode=null,i.CountryID=null,i.ISO3=null,i.ROHS=null),this.alertType="success",this.message="Receipt Line updated.",this.addLineDetails()},error:t=>{this.alertType="error",this.message="Error updating Receipt Line - "+t}}))}addLineDetails(){if(this.lineDetails.length>0){let t=[];this.deleteReceiptLineDetailsSubscription.add(this._deleteReceiptLineDetails.mutate({receiptLineID:Number(this.receiptLineID)}).subscribe({complete:()=>{this.lineDetails.map(i=>{t.push({ReceiptLID:Number(this.receiptLineID),PurchaseOrderLID:i.PurchaseOrderLID,ExpectedQuantity:i.Quantity,ReceiptStatusID:10})}),this.insertReceiptLineDetailsSubscription.add(this._insertReceiptLineDetails.mutate({receiptLineDetails:t}).subscribe({error:i=>{this.receiptLineDetailAlertType="error",this.receiptLineDetailMessage="Error inserting Receipt Line Details - "+i},next:i=>{i.data.insertReceiptLineDetails.map(r=>{this.insertLog([{UserEventID:this.receiptLineDetailOkText=="Save"?R.Event_ReceiptEntry_LineDetailUpdate:R.Event_ReceiptEntry_LineDetailCreating,UserName:this._userInfo.userName,DistributionCenter:N.DistributionCenter,ReceiptHeader:Number(this.receiptID),ReceiptLine:Number(this.receiptLineID),Message:"ReceiptLineDetailID: "+r._id+", PurchaseOrderLID: "+r.PurchaseOrderLID+", Quantity: "+r.ExpectedQuantity}]);let l={DistributionCenter:N.DistributionCenter,ReceiptHeader:Number(this.receiptID),ReceiptLine:Number(this.receiptLineID),ReceiptLineDetail:r._id,PurchaseOrderLID:r.PurchaseOrderLID,Quantity:r.ExpectedQuantity};this.insertNewLog([{UserName:this._userInfo.userName,EventTypeID:this.receiptLineDetailOkText=="Save"?R.Event_ReceiptEntry_LineDetailUpdate:R.Event_ReceiptEntry_LineDetailCreating,Log:JSON.stringify(l)}])})},complete:()=>{this.getReceiptLines(),this.poLineID=null,this.receiptLineDetailQuantity=null,this.receiptLineDetailVisible=!1,this.clearReceiptLine(),this.clearReceiptLineDetail(),this.alertType="success",this.message+=" Receipt line detail(s) saved."}}))},error:i=>{this.receiptLineDetailAlertType="error",this.receiptLineDetailMessage="Error deleting Receipt Line Details"}}))}}resetReceiptLineDetailMessage(){this.receiptLineDetailMessage=null}addDetailLine(){if(this.poLineID){let t="",i="";this.findPOLineSubscripton.add(this._findPOLine.fetch({purchaseOrderLID:Number(this.poLineID)},{fetchPolicy:"network-only"}).subscribe({next:r=>{t=r.data.findPOLine[0].PurchaseOrderNumberLine,i=new Date(Number(r.data.findPOLine[0].DueDate)).toLocaleString()},complete:()=>{this.lineDetails.push({Quantity:Number(this.receiptLineDetailQuantity),PurchaseOrderLID:Number(this.poLineID),DueDate:i,PurchaseOrderNumberLine:t}),this.lineDetailTotal+=Number(this.receiptLineDetailQuantity),this.lineDetailTotal>this.quantity?this.lineDetailTotalClass="alert":this.lineDetailTotalClass=null,this.lineDetailTotal==this.quantity?this.lineDetailOkDisabled=!1:this.lineDetailOkDisabled=!0,this.poLineID=null,this.receiptLineDetailQuantity=null,this.getPOLines()},error:r=>{this.receiptLineDetailAlertType="error",this.receiptLineDetailMessage="Error finding PO Number-Line - "+r}}))}}removeDetailLine(t){if(t>=0){this.lineDetailTotal=0;let i=[];this.lineDetails.splice(t,1),this.lineDetails.map(r=>{this.lineDetailTotal+=r.Quantity,i.push(r)}),this.lineDetails=i,this.getPOLines(),this.lineDetailTotal>this.quantity?this.lineDetailTotalClass="alert":this.lineDetailTotalClass=null,this.lineDetailTotal==this.quantity?this.lineDetailOkDisabled=!1:this.lineDetailOkDisabled=!0}}insertLog(t){this.log$=this._receiptEntryLog.mutate({log:t})}insertNewLog(t){this.newLog$=this._eventLog.mutate({logs:t})}ngOnDestroy(){this.vendorListSubscription.unsubscribe(),this.findVendorSubscription.unsubscribe(),this.countryListSubscription.unsubscribe(),this.receiptSubscription.unsubscribe(),this.receiptListSubscription.unsubscribe(),this.insertReceiptSubscription.unsubscribe(),this.partCodeListSubscription.unsubscribe(),this.insertReceiptLineSubscription.unsubscribe(),this.receiptLinesListSubscription.unsubscribe(),this.findPOLinesSubscription.unsubscribe(),this.findCountrySubscription.unsubscribe(),this.findPartSubscription.unsubscribe(),this.findPOLineSubscripton.unsubscribe(),this.insertReceiptLineDetailSubscription.unsubscribe(),this.findReceiptLineSubscription.unsubscribe(),this.deleteReceiptLineSubscription.unsubscribe(),this.deleteReceiptLineDetailsSubscription.unsubscribe(),this.updateReceiptSubscription.unsubscribe(),this.updateReceiptLineSubscription.unsubscribe(),this.updateReceiptLineDetailSubscription.unsubscribe(),this.deleteReceiptLineDetailSubscription.unsubscribe(),this.insertReceiptLineDetailsSubscription.unsubscribe(),this.deleteReceiptSubscription.unsubscribe(),this.findPOsSubscription.unsubscribe(),this.findVendorByPOSubscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)(m(pe),m(De),m(le),m(qe),m(Ue),m(Je),m(Ge),m(it),m(We),m(rt),m(Ye),m(Ze),m(Ke),m(et),m(st),m(Xe),m(ot),m(ct),m(ut),m(at),m(lt),m(pt),m(dt),m(ht),m(tt),m(Be),m(nt),m(xe))},e.\u0275cmp=ee({type:e,selectors:[["receipt-entry"]],standalone:!0,features:[ie],decls:53,vars:44,consts:[[1,"mx-auto","px-4","py-4"],["nz-row","","nzGutter","8","nzJustify","start"],["nz-col","","nzSpan","24",2,"height","30px"],["nz-col","","nzSpan","4"],["nz-col","","nzSpan","3","class","infoHeader",4,"ngIf"],["nz-col","","nzSpan","2","class","infoHeader",4,"ngIf"],["nzShowSearch","","nzPlaceHolder","Receipt ID","name","receiptSearchSel","nzAllowClear","",2,"width","80%","float","left",3,"nzSelectOnTab","nzShowArrow","nzFilterOption","ngModel","nzOnSearch","ngModelChange"],["receiptSearch",""],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nz-icon","","nzType","plus","title","New Receipt","nzTheme","outline",1,"icon",3,"click"],["nz-col","","nzSpan","3","class","infoBox",4,"ngIf"],["nz-col","","nzSpan","2","class","infoBox",4,"ngIf"],["nz-button","",3,"click",4,"ngIf"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","Are you sure you want to delete this Receipt?",3,"nzOnConfirm",4,"ngIf"],["nz-row",""],["nz-col","","nzSpan","2"],["nz-col","","nzSpan","1"],["nzShowSearch","","nzPlaceHolder","Part Number","nzAllowClear","","name","partSearchSel",2,"width","100%",3,"nzShowArrow","nzFilterOption","ngModel","nzSelectOnTab","disabled","nzOpen","nzOnSearch","ngModelChange","nzFocus"],["partSearch",""],["nz-input","","type","number","min","1","placeholder","Quantity",3,"ngModel","disabled","ngClass","ngModelChange","focusout"],["nz-col","","nzSpan","5",4,"ngIf"],["nz-col","","nzSpan","2",4,"ngIf"],["nz-row","","nzGutter","8"],[3,"nzData",4,"ngIf"],["nz-row","","nzGutter","8","nzJustify","start",2,"height","20px"],["nz-row","","nzGutter","8","nzJustify","start",4,"ngIf"],["nzMaskClosable","false","nzCancelText","Back",3,"nzVisible","nzTitle","nzClosable","nzOkDisabled","nzOkText","nzVisibleChange","nzOnCancel","nzOnOk"],["lineDetailTitleTemplate",""],[4,"nzModalContent"],[3,"nzVisible","nzTitle","nzOkDisabled","nzStyle","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"ngIf"],["nz-col","","nzSpan","3",1,"infoHeader"],["nz-col","","nzSpan","2",1,"infoHeader"],[3,"nzLabel","nzValue"],["nz-col","","nzSpan","3",1,"infoBox"],["nz-col","","nzSpan","2",1,"infoBox"],["nz-button","",3,"click"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","Are you sure you want to delete this Receipt?",3,"nzOnConfirm"],["nz-col","","nzSpan","5"],["nz-button","",2,"margin-right","10px",3,"click"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","Are you sure you want to delete this line?",2,"margin-right","10px",3,"nzOnConfirm"],["nz-button","",3,"disabled","click"],[3,"nzData"],["receiptLineTable",""],["nzWidth","55px"],["nzWidth","80px"],["nzWidth","300px"],["nzWidth","100px"],["ngFor","",3,"ngForOf"],[3,"nzExpand","ngClass","nzExpandChange"],[3,"ngClass"],[3,"nzExpand"],["receiptLineDetailTable",""],[4,"ngFor","ngForOf"],["nz-col","","nzSpan","24"],["nzShowIcon","",1,"w-full",2,"width","100%",3,"nzType","nzMessage"],["nz-col","","nzSpan","10"],["nz-row","","nzGutter","8","nzJustify","start",2,"margin-top","5px"],["nzShowSearch","","nzPlaceHolder","PO Line","nzAllowClear","",2,"width","100%",3,"nzSelectOnTab","ngModel","nzShowArrow","ngModelChange","nzFocus"],["nz-input","","placeholder","Quantity","type","number","min","1",3,"ngModel","max","ngModelChange","focusout","focus"],["nz-icon","","nzType","plus","nzTheme","outline"],["nz-row","","nzGutter","8","nzJustify","start",4,"ngFor","ngForOf"],["nz-col","","nzSpan","10",1,"detailsInfoBox"],["nz-col","","nzSpan","5",1,"detailsInfoBox"],["nz-icon","","nzType","delete","nzTheme","outline"],["nz-row","","nzGutter","8",2,"height","10px"],["nz-col","","nzSpan","6"],["nz-col","","nzSpan","7"],["nzShowSearch","","nzPlaceHolder","PO Number","nzAllowClear","",2,"width","100%",3,"nzSelectOnTab","nzShowArrow","nzFilterOption","ngModel","nzOnSearch","ngModelChange"],["nz-col","","nzSpan","6",1,"detailsInfoBox"],[3,"ngModel","ngModelChange"],["nzPlaceHolder","Source","nzAllowClear","",2,"width","90%",3,"ngModel","nzOptions","ngModelChange"]],template:function(i,r){if(i&1&&(c(0,"div",0)(1,"div",1),v(2,"div",2),o(),c(3,"div",1)(4,"div",3),d(5,"Receipt ID"),o(),x(6,li,2,0,"div",4)(7,pi,2,0,"div",5)(8,di,2,0,"div",5),o(),c(9,"div",1)(10,"div",3)(11,"nz-select",6,7),g("nzOnSearch",function(h){return r.searchReceipts(h)})("ngModelChange",function(h){return r.receiptID=h})("ngModelChange",function(h){return r.onReceiptIDChange(h)}),x(13,ui,1,2,"nz-option",8),o(),c(14,"span",9),g("click",function(){return r.addReceipt()}),o()(),x(15,hi,2,1,"div",10)(16,mi,2,1,"div",11)(17,fi,2,1,"div",11)(18,Di,2,0,"button",12)(19,bi,2,0,"button",13),o(),c(20,"div",14),v(21,"div",2),o(),c(22,"div",1)(23,"div",3),d(24,"Part Number"),o(),c(25,"div",15),d(26,"Quantity"),o(),v(27,"div",16)(28,"div",16),o(),c(29,"div",1)(30,"div",3)(31,"nz-select",17,18),g("nzOnSearch",function(h){return r.searchPartNumbers(h)})("ngModelChange",function(h){return r.partNumberID=h})("ngModelChange",function(h){return r.onPartNumberClick(h)})("nzFocus",function(){return r.onPartNumberFocus()}),x(33,Li,1,2,"nz-option",8),o()(),c(34,"div",15)(35,"input",19),g("ngModelChange",function(h){return r.quantity=h})("focusout",function(){return r.onReceiptLineQuantityFocusOut()}),o()(),x(36,_i,7,0,"div",20)(37,yi,3,1,"div",21),o(),c(38,"div",22),v(39,"div",2),o(),x(40,Ri,14,2,"nz-table",23),v(41,"div",24),x(42,vi,4,2,"div",25),c(43,"nz-modal",26),g("nzVisibleChange",function(h){return r.receiptLineDetailVisible=h})("nzOnCancel",function(){return r.hideReceiptLineDetail()})("nzOnOk",function(){return r.onReceiptLineDetailOKClick()}),x(44,xi,5,3,"ng-template",null,27,ne)(46,Ei,20,10,"ng-container",28),o(),c(47,"nz-modal",29),g("nzVisibleChange",function(h){return r.receiptModalVisible=h})("nzOnCancel",function(){return r.onReceiptModalCancel()})("nzOnOk",function(){return r.onReceiptModalOk()}),x(48,Pi,20,9,"ng-container",28),o(),x(49,Ti,1,0,"div",30),K(50,"async"),x(51,wi,1,0,"div",30),K(52,"async"),o()),i&2){let l=V(45);a(6),p("ngIf",r.receiptID),a(1),p("ngIf",r.receiptID),a(1),p("ngIf",r.receiptID),a(3),p("nzSelectOnTab",r.selectOnTab)("nzShowArrow",!1)("nzFilterOption",r.nzFilterOption)("ngModel",r.receiptID),a(2),p("ngForOf",r.receiptList),a(2),p("ngIf",r.receiptID),a(1),p("ngIf",r.receiptID),a(1),p("ngIf",r.receiptID),a(1),p("ngIf",r.receiptID),a(1),p("ngIf",r.receiptID),a(12),te(r.partNumberClass),p("nzShowArrow",!1)("nzFilterOption",r.nzFilterOption)("ngModel",r.partNumberID)("nzSelectOnTab",r.selectOnTab)("disabled",!r.receiptSelected)("nzOpen",r.partNumberSelectOpen),a(2),p("ngForOf",r.partList),a(2),p("ngModel",r.quantity)("disabled",!r.receiptSelected)("ngClass",r.quantityClass),a(1),p("ngIf",r.receiptLineID),a(1),p("ngIf",!r.receiptLineID),a(3),p("ngIf",r.receiptLines),a(2),p("ngIf",r.message),a(1),p("nzVisible",r.receiptLineDetailVisible)("nzTitle",l)("nzClosable",r.receiptLineDetailClosable)("nzOkDisabled",r.lineDetailOkDisabled)("nzOkText",r.receiptLineDetailOkText),a(4),p("nzVisible",r.receiptModalVisible)("nzTitle",r.receiptModalTitle)("nzOkDisabled",!r.vendorID||!r.expectedArrivalDate||!r.sourceType)("nzStyle",r.receiptModalStyle),a(2),p("ngIf",Y(50,40,r.log$)),a(2),p("ngIf",Y(52,42,r.newLog$))}},dependencies:[j,Le,be,oe,U,Oe,Pe,Q,_e,ge,ye,ve,Re,Ie,se,$,fe,ue,he,k,de,me,G,He,F,Ne,re,B,ke,Te,Me,we,je,Ae,$e,Qe,Ve,H,Se,q,Ee,Ce,J,Fe,ce],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;padding:8px}.add-item[_ngcontent-%COMP%]{flex:0 0 auto;padding:8px;display:block}.icon[_ngcontent-%COMP%]{position:relative;float:left;top:0;margin:0;padding:7px 7px 0;height:32px;cursor:pointer;color:#060606;border:solid 1px #d9d9d9}.icon[_ngcontent-%COMP%]:hover{cursor:pointer;color:#40a9ff;border:solid 1px #40a9ff}.invalid[_ngcontent-%COMP%]{border:solid 1px red}.valid[_ngcontent-%COMP%]{border:0}.inputValid[_ngcontent-%COMP%]{border:1px solid #d9d9d9;border-radius:2px}.searchResults[_ngcontent-%COMP%]{max-height:300px;width:100%;overflow:auto;position:absolute;border:solid 1px #dddddd;background-color:#fff;box-shadow:10px 10px 30px #e6e6e6,-10px 10px 30px #e6e6e6;z-index:1000}.searchResults[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.searchResults[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.lineDetailLeft[_ngcontent-%COMP%]{border-bottom:solid 1px #ededed;border-top:solid 1px #ededed;border-left:solid 1px #ededed;align-items:center;display:flex}.lineDetailRight[_ngcontent-%COMP%]{border-bottom:solid 1px #ededed;border-top:solid 1px #ededed;border-right:solid 1px #ededed;display:flex;align-items:center}.infoBox[_ngcontent-%COMP%]{background-color:#f5f5f5;display:flex;align-items:center;margin-right:5px}.infoHeader[_ngcontent-%COMP%]{margin-right:5px}.detailsInfoBox[_ngcontent-%COMP%]{background-color:#f5f5f5;display:flex;align-items:center;margin-top:1px;margin-bottom:1px}.alert[_ngcontent-%COMP%]{color:red}.selected[_ngcontent-%COMP%]{background-color:#8cd98c!important}"]});let n=e;return n})();var Mi=[{path:"",component:W}],mt=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=M({type:e}),e.\u0275inj=w({imports:[X.forChild(Mi),X]});let n=e;return n})();var Vn=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=M({type:e}),e.\u0275inj=w({imports:[ae,Q,mt,F,U,j,$,ze,k,J,q,B,G,H,W]});let n=e;return n})();export{Vn as ReceiptEntryModule};
