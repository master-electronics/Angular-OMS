import{d as Bt}from"./chunk-4DSMIZLG.js";import{c as Ot}from"./chunk-UGSSIXRM.js";import{a as Mt,b as Vt,c as qt,d as Rt,e as Ut,f as Ht,g as Gt,h as $t,i as jt,j as At}from"./chunk-J6IIM7ZS.js";import{a as _e,b as ee}from"./chunk-RMDJVRJE.js";import{b as Lt}from"./chunk-OFIFWCFJ.js";import{b as wt}from"./chunk-FFFUUL2B.js";import{a as Ft,b as Et,c as Pt,d as kt}from"./chunk-JQV6U24N.js";import{a as Ce,b as Dt,c as ye}from"./chunk-EVXJS6DD.js";import{a as gt,b as xt}from"./chunk-CRZYDNRB.js";import{e as bt}from"./chunk-TREYRKOP.js";import{b as It}from"./chunk-55MPF5EN.js";import{e as _t,f as L,h as be,i as O,l as w,m as M,n as V,o as q,q as F}from"./chunk-KI3MUNGW.js";import{d as Ct}from"./chunk-JOHRHLSX.js";import{e as yt,f as je}from"./chunk-OXQW4PMW.js";import{c as Ae,d as Be,e as Ie}from"./chunk-6DLKQNDK.js";import{b as Tt,f as Ne}from"./chunk-MZCJXFXF.js";import{a as pe,b as se,c as ce,d as Te,e as Z}from"./chunk-WUHPQNSG.js";import"./chunk-YGLVR5WL.js";import{a as Se,d as de}from"./chunk-44NJU3LR.js";import"./chunk-Z347V25R.js";import{G as me,H as G,I as K,d as ze,e as J,h as Y,i as re,o as Nt,p as oe,t as ae,u as le}from"./chunk-L3THJMBJ.js";import"./chunk-RAQ4VAB7.js";import{b as St}from"./chunk-FMSTYN27.js";import"./chunk-QQPJAVIB.js";import"./chunk-RMC6N2HF.js";import"./chunk-GJX7JKAF.js";import"./chunk-WX6KJXZ2.js";import"./chunk-EXQESRXT.js";import"./chunk-5FUULRSO.js";import{a as W,b as ie,c as ne}from"./chunk-V5UEWFGK.js";import{a as ft}from"./chunk-PLQ7TNCQ.js";import"./chunk-C55YZZU5.js";import{a as H}from"./chunk-E6LDBMP7.js";import{a as A,c as B,d as X,e as Q,f as U}from"./chunk-GFVCXK67.js";import"./chunk-WOYNEQEU.js";import"./chunk-XSY6ZNJP.js";import"./chunk-W3KGMJG7.js";import"./chunk-B3MPBRHZ.js";import"./chunk-YUDS3XHK.js";import"./chunk-MIXZFVL7.js";import"./chunk-FFJ3QZ3H.js";import{c as vt,i as ve,k as zt,l as R,n as ot}from"./chunk-PJEV5NXI.js";import{A as ht,p as k,q as xe,w as D}from"./chunk-GWV5DZOT.js";import{$b as z,Ac as fe,Cc as dt,Da as b,Ea as He,Fb as n,Gb as v,Gc as P,H as N,Hc as u,Ic as he,Jc as $e,Lc as C,Mc as _,Rc as pt,Sb as c,Sc as st,Uc as ct,V as qe,Vc as ut,a as $,ac as e,b as Ve,bc as t,cc as T,dc as lt,ec as mt,nc as S,pc as Ge,qa as Re,wa as Ue,wc as I,xc as i,yc as s,zc as j}from"./chunk-N7LPRJLK.js";var Si=d=>[d];function yi(d,m){if(d&1&&(e(0,"div")(1,"nz-list-item")(2,"nz-card",4)(3,"p"),i(4),t(),e(5,"a",5),i(6,"view"),t()()()()),d&2){let r=m.$implicit;n(2),c("nzTitle",r.title),n(2),s(r.content),n(1),c("routerLink",he(3,Si,r.link))}}var Qe=(()=>{let m=class m{constructor(p,l){this._title=p,this.titleService=l,this.tableList=[{title:"Order View",link:"orderview",content:"Order overview."},{title:"WMS-Status",link:"wmsstatus",content:"Count how many ITNs, lines or orders are in each status"},{title:"Event Logs",link:"eventlog",content:"View the user activity event logs on WMS"},{title:"Task Counter",link:"taskcounter",content:"Count how many ITN was processed by each user."},{title:"Order Tasktime",link:"ordertasktime",content:"Show how many time spend on single line qc and aggregation for each order."},{title:"Hold-on Counter",link:"holdoncounter",content:"Show how many lines were kicked out by Quality Control."},{title:"ITN Lifecycle",link:"itnlifecycle",content:"The life of every ITN worked each day"}],this._title.update("Table Views"),this.titleService.setTitle("tableviews")}};m.\u0275fac=function(l){return new(l||m)(v(H),v(vt))},m.\u0275cmp=b({type:m,selectors:[["table-views"]],decls:4,vars:2,consts:[["nz-row","","nzJustify","center"],["nzGrid",""],["nz-row","",3,"nzGutter"],[4,"ngFor","ngForOf"],[3,"nzTitle"],[3,"routerLink"]],template:function(l,o){l&1&&(e(0,"div",0)(1,"nz-list",1)(2,"div",2),z(3,yi,7,5,"div",3),t()()()),l&2&&(n(2),c("nzGutter",16),n(1),c("ngForOf",o.tableList))},dependencies:[k,R,W,Et,Pt,Ft,gt],encapsulation:2});let d=m;return d})();function xi(d,m){if(d&1&&T(0,"nz-option",20),d&2){let r=m.$implicit;c("nzLabel",r.Name)("nzValue",r.Name)}}function Ni(d,m){if(d&1&&(e(0,"nz-form-item",4)(1,"nz-form-control")(2,"nz-select",18),z(3,xi,1,2,"nz-option",19),t()()()),d&2){let r=m.ngIf;n(3),c("ngForOf",r)}}function Ti(d,m){if(d&1&&i(0),d&2){let r=m.$implicit;j("and ",r.length," more selected")}}function Ii(d,m){if(d&1&&(e(0,"nz-form-control",21),T(1,"nz-select",22),z(2,Ti,1,1,"ng-template",null,23,ut),t()),d&2){let r=m.ngIf;n(1),c("nzOptions",r)}}function bi(d,m){if(d&1&&(lt(0),e(1,"tr")(2,"td"),i(3),t(),e(4,"td"),i(5),t(),e(6,"td"),i(7),t(),e(8,"td"),i(9),t(),e(10,"td"),i(11),t(),e(12,"td"),i(13),t(),e(14,"td"),i(15),t(),e(16,"td"),i(17),t(),e(18,"td"),i(19),t(),e(20,"td"),i(21),t(),e(22,"td"),i(23),t()(),mt()),d&2){let r=m.$implicit;n(3),s(r.UserName),n(2),s(r.Module),n(2),s(r.Event),n(2),fe("",r.OrderNumber,"-",r.NOSINumber,""),n(2),s(r.OrderLineNumber),n(2),s(r.PartNumber),n(2),s(r.ProductCode),n(2),s(r.InventoryTrackingNumber),n(2),s(r.Quantity),n(2),s(r.Message),n(2),s(r.DateTime)}}var Ci=()=>[20,50,100],Je=(()=>{let m=class m{constructor(p,l,o,a,f,h){this.fb=p,this._title=l,this.route=o,this.fetchUser=a,this.fetchEventLog=f,this._fetchUserEvents=h,this.isLoading=!1,this.filterForm=this.fb.group({user:[""],order:["",[J.pattern(Ne)]],ITN:["",[J.pattern(Tt)]],timeRange:[""],events:[[]]}),this.fetchUser$=null,this.expandSet=new Set,this._title.update("User Event Logs")}ngOnInit(){this.fetchUser$=this.fetchUser.fetch().pipe(N(p=>p.data.findUserInfos)),this.urlParams=$({},this.route.snapshot.queryParams),this.urlParams.ITN&&(this.filterForm.get("ITN").setValue(this.urlParams.ITN),this.onSubmit()),this.urlParams.UserName&&this.filterForm.get("user").setValue(this.urlParams.UserName),this.listOfEvent$=this._fetchUserEvents.fetch().pipe(N(p=>p.data.findUserEvents.map(l=>({label:l.Module+"-"+l.Event,value:l._id.toString(),groupLabel:l.Module}))))}resetForm(){this.filterForm.reset({user:"",module:"",order:"",ITN:"",timeRange:""}),this.startDate=null,this.endDate=null}onSubmit(){if(this.filterForm.invalid||this.isLoading)return;let p={},l=this.urlParams.UserName||this.filterForm.get("user").value,o=this.filterForm.get("events").value.map(x=>Number(x)),a=this.filterForm.get("order").value.toUpperCase(),f=this.filterForm.get("ITN").value.toUpperCase(),h=200;l&&(p.UserName=l,h=500),o&&(h=500),a&&(p.OrderNumber=a.substring(0,6),p.NOSINumber=a.substring(7,9),h=null),f&&(p.InventoryTrackingNumber=f,h=null),this.startDate&&(h=null),this.fetchTable$=this.fetchEventLog.fetch({limit:h,UserEventLog:p,Modules:o,startDate:this.startDate,endDate:this.endDate},{fetchPolicy:"network-only"}).pipe(N(x=>x.data.findUserEventLogs.map(E=>{let te=Ve($({},E),{Module:E.UserEvent.Module,Event:E.UserEvent.Event});return te.DateTime=new Date(Number(E.DateTime)).toLocaleString(),delete te.UserEvent,delete te.__typename,te})),Re(x=>{this.ws=ee.json_to_sheet(x)}))}onChange(p){this.startDate=p[0]?.toISOString(),this.endDate=p[1]?.toISOString()}onExpandChange(p,l){l?this.expandSet.add(p):this.expandSet.delete(p)}exportexcel(){let p=ee.book_new();ee.book_append_sheet(p,this.ws,"Sheet1"),_e(p,`${this.startDate?.substring(0,10)}.xlsx`)}};m.\u0275fac=function(l){return new(l||m)(v(me),v(H),v(ve),v(Ut),v(Gt),v(Ht))},m.\u0275cmp=b({type:m,selectors:[["event-log"]],standalone:!0,features:[P],decls:53,vars:15,consts:[[1,"container","mx-auto","px-4","py-4"],["nz-form","",3,"formGroup"],["nz-row","","nzAlign","bottom","nzGutter","8","nzJustify","space-between"],["nz-col","","nzSpan","4",4,"ngIf"],["nz-col","","nzSpan","4"],["nzHasFeedback","","nzErrorTip","The input is not valid barcode!"],["nz-input","","oninput","this.value = this.value.toUpperCase()","formControlName","order","placeholder","filter by Order-NOSI"],["nz-input","","oninput","this.value = this.value.toUpperCase()","formControlName","ITN","placeholder","filter by ITN"],["nz-col","","nzSpan","6"],["formControlName","timeRange",3,"nzShowTime","ngModelChange"],["nz-row","","nzGutter","8","nzJustify","start"],["nz-col","","nzSpan","16",4,"ngIf"],["nz-button","","nzType","primary",1,"mr-4",3,"click"],["nz-button","",1,"mr-4",3,"click"],["nz-button","",3,"click"],["id","table","nzShowSizeChanger","",3,"nzData","nzPageSize","nzPageSizeOptions"],["table",""],[4,"ngFor","ngForOf"],["nzAllowClear","","nzShowSearch","","nzPlaceHolder","Select a User","formControlName","user"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"],["nz-col","","nzSpan","16"],["nzMode","multiple","nzPlaceHolder","Select events","nzAllowClear","","formControlName","events",3,"nzOptions"],["tagPlaceHolder",""]],template:function(l,o){if(l&1&&(e(0,"div",0)(1,"form",1)(2,"div",2),z(3,Ni,4,1,"nz-form-item",3),C(4,"async"),e(5,"nz-form-item",4)(6,"nz-form-control",5),T(7,"input",6),t()(),e(8,"nz-form-item",4)(9,"nz-form-control",5),T(10,"input",7),t()(),e(11,"nz-form-item",8)(12,"nz-form-control")(13,"nz-range-picker",9),S("ngModelChange",function(f){return o.onChange(f)}),t()()()(),e(14,"div",10),z(15,Ii,4,1,"nz-form-control",11),C(16,"async"),e(17,"div",8)(18,"button",12),S("click",function(){return o.onSubmit()}),i(19," Search "),t(),e(20,"button",13),S("click",function(){return o.resetForm()}),i(21,"Clear"),t(),e(22,"button",14),S("click",function(){return o.exportexcel()}),i(23,"Save"),t()()()(),e(24,"nz-table",15,16),C(26,"async"),e(27,"thead")(28,"tr")(29,"th"),i(30,"User"),t(),e(31,"th"),i(32,"Module"),t(),e(33,"th"),i(34,"Event"),t(),e(35,"th"),i(36,"Order"),t(),e(37,"th"),i(38,"Order Line"),t(),e(39,"th"),i(40,"PartNumber"),t(),e(41,"th"),i(42,"Product Code"),t(),e(43,"th"),i(44,"ITN"),t(),e(45,"th"),i(46,"Quantity"),t(),e(47,"th"),i(48,"Message"),t(),e(49,"th"),i(50,"Date"),t()()(),e(51,"tbody"),z(52,bi,24,12,"ng-container",17),t()()()),l&2){let a=I(25);n(1),c("formGroup",o.filterForm),n(2),c("ngIf",_(4,8,o.fetchUser$)),n(10),c("nzShowTime",!0),n(2),c("ngIf",_(16,10,o.listOfEvent$)),n(9),c("nzData",_(26,12,o.fetchTable$))("nzPageSize",20)("nzPageSizeOptions",u(14,Ci)),n(28),c("ngForOf",a.data)}},dependencies:[G,oe,ze,Y,re,Z,ie,W,se,pe,ce,K,ae,le,ne,xe,Ie,Ae,Be,k,de,Se,ye,Ce,Dt,U,Q,A,B,X,F,M,L,O,q,w,V,D],encapsulation:2});let d=m;return d})();var y=()=>["/tableviews/orderview/itnview"],Wt=()=>({priority:1,statusID:0}),Jt=()=>({statusID:0}),Yt=()=>({priority:1,statusID:10}),Kt=()=>({statusID:10}),Zt=()=>({priority:1,statusID:15}),ei=()=>({statusID:15}),ti=()=>({priority:1,statusID:20}),ii=()=>({statusID:20}),ni=()=>({priority:1,statusID:30}),ri=()=>({statusID:30}),oi=()=>({priority:1,statusID:40}),ai=()=>({statusID:40}),li=()=>({priority:1,statusID:60}),mi=()=>({statusID:60}),di=()=>({priority:1,statusID:63}),pi=()=>({statusID:63}),si=()=>({priority:1,statusID:65}),ci=()=>({statusID:65}),ui=()=>({priority:1,statusID:75}),fi=()=>({statusID:75}),hi=()=>({priority:1,statusID:80}),vi=()=>({statusID:80});function _i(d,m){if(d&1&&(e(0,"tr")(1,"td"),i(2),t(),e(3,"td")(4,"a",6),i(5),t()(),e(6,"td")(7,"a",6),i(8),t()(),e(9,"td")(10,"a",6),i(11),t()(),e(12,"td")(13,"a",6),i(14),t()(),e(15,"td")(16,"a",6),i(17),t()(),e(18,"td")(19,"a",6),i(20),t()(),e(21,"td")(22,"a",6),i(23),t()(),e(24,"td")(25,"a",6),i(26),t()(),e(27,"td")(28,"a",6),i(29),t()(),e(30,"td")(31,"a",6),i(32),t()(),e(33,"td")(34,"a",6),i(35),t()(),e(36,"td")(37,"a",6),i(38),t()(),e(39,"td")(40,"a",6),i(41),t()(),e(42,"td")(43,"a",6),i(44),t()(),e(45,"td")(46,"a",6),i(47),t()(),e(48,"td")(49,"a",6),i(50),t()(),e(51,"td")(52,"a",6),i(53),t()(),e(54,"td")(55,"a",6),i(56),t()(),e(57,"td")(58,"a",6),i(59),t()(),e(60,"td")(61,"a",6),i(62),t()(),e(63,"td")(64,"a",6),i(65),t()(),e(66,"td")(67,"a",6),i(68),t()()()),d&2){Ge();let r=I(2);n(2),s(r.data[0].name),n(2),c("routerLink",u(67,y))("queryParams",u(68,Wt)),n(1),s(r.data[0].aP),n(2),c("routerLink",u(69,y))("queryParams",u(70,Jt)),n(1),s(r.data[0].aT),n(2),c("routerLink",u(71,y))("queryParams",u(72,Yt)),n(1),s(r.data[0].bP),n(2),c("routerLink",u(73,y))("queryParams",u(74,Kt)),n(1),s(r.data[0].bT),n(2),c("routerLink",u(75,y))("queryParams",u(76,Zt)),n(1),s(r.data[0].cP),n(2),c("routerLink",u(77,y))("queryParams",u(78,ei)),n(1),s(r.data[0].cT),n(2),c("routerLink",u(79,y))("queryParams",u(80,ti)),n(1),s(r.data[0].dP),n(2),c("routerLink",u(81,y))("queryParams",u(82,ii)),n(1),s(r.data[0].dT),n(2),c("routerLink",u(83,y))("queryParams",u(84,ni)),n(1),s(r.data[0].eP),n(2),c("routerLink",u(85,y))("queryParams",u(86,ri)),n(1),s(r.data[0].eT),n(2),c("routerLink",u(87,y))("queryParams",u(88,oi)),n(1),s(r.data[0].fP),n(2),c("routerLink",u(89,y))("queryParams",u(90,ai)),n(1),s(r.data[0].fT),n(2),c("routerLink",u(91,y))("queryParams",u(92,li)),n(1),s(r.data[0].gP),n(2),c("routerLink",u(93,y))("queryParams",u(94,mi)),n(1),s(r.data[0].gT),n(2),c("routerLink",u(95,y))("queryParams",u(96,di)),n(1),s(r.data[0].hP),n(2),c("routerLink",u(97,y))("queryParams",u(98,pi)),n(1),s(r.data[0].hT),n(2),c("routerLink",u(99,y))("queryParams",u(100,si)),n(1),s(r.data[0].iP),n(2),c("routerLink",u(101,y))("queryParams",u(102,ci)),n(1),s(r.data[0].iT),n(2),c("routerLink",u(103,y))("queryParams",u(104,ui)),n(1),s(r.data[0].kP),n(2),c("routerLink",u(105,y))("queryParams",u(106,fi)),n(1),s(r.data[0].kT),n(2),c("routerLink",u(107,y))("queryParams",u(108,hi)),n(1),s(r.data[0].jP),n(2),c("routerLink",u(109,y))("queryParams",u(110,vi)),n(1),s(r.data[0].jT)}}function Fi(d,m){if(d&1&&(e(0,"tr")(1,"td"),i(2),t(),e(3,"td"),i(4),t(),e(5,"td"),i(6),t(),e(7,"td"),i(8),t(),e(9,"td"),i(10),t(),e(11,"td"),i(12),t(),e(13,"td"),i(14),t(),e(15,"td"),i(16),t(),e(17,"td"),i(18),t(),e(19,"td"),i(20),t(),e(21,"td"),i(22),t(),e(23,"td"),i(24),t(),e(25,"td"),i(26),t(),e(27,"td"),i(28),t(),e(29,"td"),i(30),t(),e(31,"td"),i(32),t(),e(33,"td"),i(34),t(),e(35,"td"),i(36),t(),e(37,"td"),i(38),t(),e(39,"td"),i(40),t(),e(41,"td"),i(42),t(),e(43,"td"),i(44),t(),e(45,"td"),i(46),t()()),d&2){Ge();let r=I(2);n(2),s(r.data[1].name),n(2),s(r.data[1].aP),n(2),s(r.data[1].aT),n(2),s(r.data[1].bP),n(2),s(r.data[1].bT),n(2),s(r.data[1].cP),n(2),s(r.data[1].cT),n(2),s(r.data[1].dP),n(2),s(r.data[1].dT),n(2),s(r.data[1].eP),n(2),s(r.data[1].eT),n(2),s(r.data[1].fP),n(2),s(r.data[1].fT),n(2),s(r.data[1].gP),n(2),s(r.data[1].gT),n(2),s(r.data[1].hP),n(2),s(r.data[1].hT),n(2),s(r.data[1].iP),n(2),s(r.data[1].iT),n(2),s(r.data[1].kP),n(2),s(r.data[1].kT),n(2),s(r.data[1].jP),n(2),s(r.data[1].jT)}}var g=()=>["orderlist"];function Ei(d,m){if(d&1&&(e(0,"tr")(1,"td"),i(2),t(),e(3,"td")(4,"a",6),i(5),t()(),e(6,"td")(7,"a",6),i(8),t()(),e(9,"td")(10,"a",6),i(11),t()(),e(12,"td")(13,"a",6),i(14),t()(),e(15,"td")(16,"a",6),i(17),t()(),e(18,"td")(19,"a",6),i(20),t()(),e(21,"td")(22,"a",6),i(23),t()(),e(24,"td")(25,"a",6),i(26),t()(),e(27,"td")(28,"a",6),i(29),t()(),e(30,"td")(31,"a",6),i(32),t()(),e(33,"td")(34,"a",6),i(35),t()(),e(36,"td")(37,"a",6),i(38),t()(),e(39,"td")(40,"a",6),i(41),t()(),e(42,"td")(43,"a",6),i(44),t()(),e(45,"td")(46,"a",6),i(47),t()(),e(48,"td")(49,"a",6),i(50),t()(),e(51,"td")(52,"a",6),i(53),t()(),e(54,"td")(55,"a",6),i(56),t()(),e(57,"td")(58,"a",6),i(59),t()(),e(60,"td")(61,"a",6),i(62),t()(),e(63,"td")(64,"a",6),i(65),t()(),e(66,"td")(67,"a",6),i(68),t()()()),d&2){Ge();let r=I(2);n(2),s(r.data[2].name),n(2),c("routerLink",u(67,g))("queryParams",u(68,Wt)),n(1),s(r.data[2].aP),n(2),c("routerLink",u(69,g))("queryParams",u(70,Jt)),n(1),s(r.data[2].aT),n(2),c("routerLink",u(71,g))("queryParams",u(72,Yt)),n(1),s(r.data[2].bP),n(2),c("routerLink",u(73,g))("queryParams",u(74,Kt)),n(1),s(r.data[2].bT),n(2),c("routerLink",u(75,g))("queryParams",u(76,Zt)),n(1),s(r.data[2].cP),n(2),c("routerLink",u(77,g))("queryParams",u(78,ei)),n(1),s(r.data[2].cT),n(2),c("routerLink",u(79,g))("queryParams",u(80,ti)),n(1),s(r.data[2].dP),n(2),c("routerLink",u(81,g))("queryParams",u(82,ii)),n(1),s(r.data[2].dT),n(2),c("routerLink",u(83,g))("queryParams",u(84,ni)),n(1),s(r.data[2].eP),n(2),c("routerLink",u(85,g))("queryParams",u(86,ri)),n(1),s(r.data[2].eT),n(2),c("routerLink",u(87,g))("queryParams",u(88,oi)),n(1),s(r.data[2].fP),n(2),c("routerLink",u(89,g))("queryParams",u(90,ai)),n(1),s(r.data[2].fT),n(2),c("routerLink",u(91,g))("queryParams",u(92,li)),n(1),s(r.data[2].gP),n(2),c("routerLink",u(93,g))("queryParams",u(94,mi)),n(1),s(r.data[2].gT),n(2),c("routerLink",u(95,g))("queryParams",u(96,di)),n(1),s(r.data[2].hP),n(2),c("routerLink",u(97,g))("queryParams",u(98,pi)),n(1),s(r.data[2].hT),n(2),c("routerLink",u(99,g))("queryParams",u(100,si)),n(1),s(r.data[2].iP),n(2),c("routerLink",u(101,g))("queryParams",u(102,ci)),n(1),s(r.data[2].iT),n(2),c("routerLink",u(103,g))("queryParams",u(104,ui)),n(1),s(r.data[2].kP),n(2),c("routerLink",u(105,g))("queryParams",u(106,fi)),n(1),s(r.data[2].kT),n(2),c("routerLink",u(107,g))("queryParams",u(108,hi)),n(1),s(r.data[2].jP),n(2),c("routerLink",u(109,g))("queryParams",u(110,vi)),n(1),s(r.data[2].jT)}}var Ye=(()=>{let m=class m{constructor(p,l){this._title=p,this.fetchtable=l,this.isLoading=!0,this._title.update("WMS-Status")}ngOnInit(){this.fetchTable$=this.fetchtable.fetch(null,{fetchPolicy:"network-only"}).pipe(N(p=>{let l=p.data.fetchWMSStatusView,o=[{name:"ITNs"},{name:"Lines"},{name:"Orders"}];return l.forEach(a=>{switch(a.StatusID){case 0:o[0].aP=a.ITN_Priority,o[0].aT=a.ITN_Total,o[1].aP=a.Line_Priority,o[1].aT=a.Line_Total,o[2].aP=a.Head_Priority,o[2].aT=a.Head_Total;break;case 10:o[0].bP=a.ITN_Priority,o[0].bT=a.ITN_Total,o[1].bP=a.Line_Priority,o[1].bT=a.Line_Total,o[2].bP=a.Head_Priority,o[2].bT=a.Head_Total;break;case 15:o[0].cP=a.ITN_Priority,o[0].cT=a.ITN_Total,o[1].cP=a.Line_Priority,o[1].cT=a.Line_Total,o[2].cP=a.Head_Priority,o[2].cT=a.Head_Total;break;case 20:o[0].dP=a.ITN_Priority,o[0].dT=a.ITN_Total,o[1].dP=a.Line_Priority,o[1].dT=a.Line_Total,o[2].dP=a.Head_Priority,o[2].dT=a.Head_Total;break;case 30:o[0].eP=a.ITN_Priority,o[0].eT=a.ITN_Total,o[1].eP=a.Line_Priority,o[1].eT=a.Line_Total,o[2].eP=a.Head_Priority,o[2].eT=a.Head_Total;break;case 40:o[0].fP=a.ITN_Priority,o[0].fT=a.ITN_Total,o[1].fP=a.Line_Priority,o[1].fT=a.Line_Total,o[2].fP=a.Head_Priority,o[2].fT=a.Head_Total;break;case 60:o[0].gP=a.ITN_Priority,o[0].gT=a.ITN_Total,o[1].gP=a.Line_Priority,o[1].gT=a.Line_Total,o[2].gP=a.Head_Priority,o[2].gT=a.Head_Total;break;case 63:o[0].hP=a.ITN_Priority,o[0].hT=a.ITN_Total,o[1].hP=a.Line_Priority,o[1].hT=a.Line_Total,o[2].hP=a.Head_Priority,o[2].hT=a.Head_Total;break;case 65:o[0].iP=a.ITN_Priority,o[0].iT=a.ITN_Total,o[1].iP=a.Line_Priority,o[1].iT=a.Line_Total,o[2].iP=a.Head_Priority,o[2].iT=a.Head_Total;break;case 75:o[0].kP=a.ITN_Priority,o[0].kT=a.ITN_Total,o[1].kP=a.Line_Priority,o[1].kT=a.Line_Total,o[2].kP=a.Head_Priority,o[2].kT=a.Head_Total;break;case 80:o[0].jP=a.ITN_Priority,o[0].jT=a.ITN_Total,o[1].jP=a.Line_Priority,o[1].jT=a.Line_Total,o[2].jP=a.Head_Priority,o[2].jT=a.Head_Total;break}}),this.isLoading=!1,o}))}};m.\u0275fac=function(l){return new(l||m)(v(H),v(Rt))},m.\u0275cmp=b({type:m,selectors:[["wms-status"]],standalone:!0,features:[P],decls:101,vars:7,consts:[[1,"container","px-4","mx-auto"],["nzShowSizeChanger","",3,"nzData","nzPageSize"],["table",""],["rowspan","3"],["colspan","2"],[4,"ngIf"],[3,"routerLink","queryParams"]],template:function(l,o){l&1&&(e(0,"div",0)(1,"nz-table",1,2),C(3,"async"),e(4,"thead")(5,"tr"),T(6,"th",3),e(7,"th",4),i(8,"00"),t(),e(9,"th",4),i(10,"10"),t(),e(11,"th",4),i(12,"15"),t(),e(13,"th",4),i(14,"20"),t(),e(15,"th",4),i(16,"30"),t(),e(17,"th",4),i(18,"40"),t(),e(19,"th",4),i(20,"60"),t(),e(21,"th",4),i(22,"63"),t(),e(23,"th",4),i(24,"65"),t(),e(25,"th",4),i(26,"75"),t(),e(27,"th",4),i(28,"80"),t()(),e(29,"tr")(30,"th",4),i(31,"Pick Queue"),t(),e(32,"th",4),i(33,"Pick Complete"),t(),e(34,"th",4),i(35,"Not Found"),t(),e(36,"th",4),i(37,"Dropped at QC"),t(),e(38,"th",4),i(39,"Warehouse Hold"),t(),e(40,"th",4),i(41,"Sales Hold"),t(),e(42,"th",4),i(43,"QC Complete"),t(),e(44,"th",4),i(45,"AGIn Complete"),t(),e(46,"th",4),i(47,"AGOut Complete"),t(),e(48,"th",4),i(49,"Packing Hold"),t(),e(50,"th",4),i(51,"Pack Complete"),t()(),e(52,"tr")(53,"th"),i(54,"Priority"),t(),e(55,"th"),i(56,"Total"),t(),e(57,"th"),i(58,"Priority"),t(),e(59,"th"),i(60,"Total"),t(),e(61,"th"),i(62,"Priority"),t(),e(63,"th"),i(64,"Total"),t(),e(65,"th"),i(66,"Priority"),t(),e(67,"th"),i(68,"Total"),t(),e(69,"th"),i(70,"Priority"),t(),e(71,"th"),i(72,"Total"),t(),e(73,"th"),i(74,"Priority"),t(),e(75,"th"),i(76,"Total"),t(),e(77,"th"),i(78,"Priority"),t(),e(79,"th"),i(80,"Total"),t(),e(81,"th"),i(82,"Priority"),t(),e(83,"th"),i(84,"Total"),t(),e(85,"th"),i(86,"Priority"),t(),e(87,"th"),i(88,"Total"),t(),e(89,"th"),i(90,"Priority"),t(),e(91,"th"),i(92,"Total"),t(),e(93,"th"),i(94,"Priority"),t(),e(95,"th"),i(96,"Total"),t()()(),e(97,"tbody"),z(98,_i,69,111,"tr",5)(99,Fi,47,23,"tr",5)(100,Ei,69,111,"tr",5),t()()()),l&2&&(n(1),c("nzData",_(3,5,o.fetchTable$))("nzPageSize",20),n(97),c("ngIf",!o.isLoading),n(1),c("ngIf",!o.isLoading),n(1),c("ngIf",!o.isLoading))},dependencies:[F,M,L,O,q,w,V,xe,R,D],encapsulation:2});let d=m;return d})();var Pi=()=>["/tableviews/orderview/itnview"],ki=(d,m)=>({orderNumber:d,NOSINumber:m});function Di(d,m){if(d&1&&(e(0,"tr")(1,"td")(2,"a",4),i(3),t()(),e(4,"td"),i(5),t(),e(6,"td"),i(7),t(),e(8,"td"),i(9),t()()),d&2){let r=m.$implicit;n(2),c("routerLink",u(7,Pi))("queryParams",$e(8,ki,r.OrderNumber,r.NOSINumber)),n(1),fe("",r.OrderNumber,"-",r.NOSINumber,""),n(2),s((r.Customer==null?null:r.Customer.CustomerNumber)||null),n(2),s(r.ShipmentMethod.PriorityPinkPaper?"Y":"N"),n(2),s(r.ShipmentMethod.ShippingMethod)}}var Ke=(()=>{let m=class m{constructor(p,l){this.route=p,this.fetchOrder=l}ngOnInit(){let p=$({},this.route.snapshot.queryParams);p.statusID&&this.fetchData(p.priority==="1"?!0:null,Number(p.statusID))}fetchData(p,l){this.OrderInfo$=this.fetchOrder.fetch({PriorityPinkPaper:p,StatusID:l},{fetchPolicy:"network-only"}).pipe(N(o=>o.data.findOrderByStatus))}};m.\u0275fac=function(l){return new(l||m)(v(ve),v(At))},m.\u0275cmp=b({type:m,selectors:[["order-list"]],standalone:!0,features:[P],decls:16,vars:5,consts:[[1,"container","px-2","mx-auto","md:mt-6"],["nzShowSizeChanger","",3,"nzData","nzPageSize"],["nzTable",""],[4,"ngFor","ngForOf"],[3,"routerLink","queryParams"]],template:function(l,o){if(l&1&&(e(0,"div",0)(1,"nz-table",1,2),C(3,"async"),e(4,"thead")(5,"tr")(6,"th"),i(7,"Order"),t(),e(8,"th"),i(9,"CustomerNumber"),t(),e(10,"th"),i(11,"Priority"),t(),e(12,"th"),i(13,"ShippingMethod"),t()()(),e(14,"tbody"),z(15,Di,10,11,"tr",3),t()()()),l&2){let a=I(2);n(1),c("nzData",_(3,3,o.OrderInfo$))("nzPageSize",20),n(14),c("ngForOf",a.data)}},dependencies:[F,M,L,O,q,w,V,k,R,D],encapsulation:2});let d=m;return d})();function Li(d,m){d&1&&T(0,"div")}function Oi(d,m){if(d&1&&(e(0,"th",15),i(1),t()),d&2){let r=m.$implicit;c("nzFilters",r.listOfFilter)("nzFilterFn",r.filterFn),n(1),j(" ",r.name," ")}}var wi=()=>["itnview"],Mi=(d,m)=>({orderNumber:d,NOSINumber:m});function Vi(d,m){if(d&1&&(e(0,"tr")(1,"td")(2,"a",16),i(3),t()(),e(4,"td"),i(5),t(),e(6,"td"),i(7),t(),e(8,"td"),i(9),t(),e(10,"td"),i(11),t(),e(12,"td"),i(13),t(),e(14,"td"),i(15),t()()),d&2){let r=m.$implicit;n(2),c("routerLink",u(10,wi))("queryParams",$e(11,Mi,r.OrderNumber,r.NOSINumber)),n(1),fe("",r.OrderNumber,"-",r.NOSINumber,""),n(2),s(r.Status),n(2),s(r.Priority?"Yes":"No"),n(2),s(r.ShippingMethod),n(2),s(r.Unpicked),n(2),s(r.Aggregated),n(2),s(r.InProcess)}}var qi=()=>[20,50,100],Ze=(()=>{let m=class m{constructor(p,l,o){this._title=p,this._route=l,this.fetchOrderView=o,this.title="Order View",this.message="",this.messageType="error",this.searchVisible=!1,this.searchValue="",this.orderList=[],this.orderListDisplay=[],this._title.update(this.title)}ngOnInit(){let p=$({},this._route.snapshot.queryParams),l={Priority:null,StatusID:null};p.statusID&&(l.StatusID=Number(p.statusID)),p.priority&&(l.Priority=!0),this.search(l)}search(p){this.message="",this.OrderInfo$=this.fetchOrderView.fetch({filter:p}).pipe(N(l=>{let o=new Set,a=new Set;return l.data.fetchOrderView.forEach(f=>{o.add(f.ShippingMethod.trim()),a.add(f.Status.trim())}),this.orderList=[...l.data.fetchOrderView],this.orderListDisplay=[...this.orderList],this.listOfColumns=[{name:"Status",listOfFilter:[...a].map(f=>({text:f,value:f})),filterFn:(f,h)=>f.some(x=>h.Status.indexOf(x)!==-1)},{name:"Priority",listOfFilter:[{text:"Yes",value:!0},{text:"No",value:!1}],filterFn:(f,h)=>f.some(x=>x===h.Priority)},{name:"ShipMethod",listOfFilter:[...o].map(f=>({text:f,value:f})),filterFn:(f,h)=>f.some(x=>h.ShippingMethod.indexOf(x)!==-1)}],l.data.fetchOrderView}))}resetSearch(){this.searchValue="",this.searchOrder()}searchOrder(){this.searchVisible=!1,this.orderListDisplay=this.orderList.filter(p=>`${p.OrderNumber}-${p.NOSINumber}`.indexOf(this.searchValue)!==-1)}trackByName(p,l){return l.name}};m.\u0275fac=function(l){return new(l||m)(v(H),v(ve),v(Mt))},m.\u0275cmp=b({type:m,selectors:[["order-view"]],standalone:!0,features:[P],decls:29,vars:14,consts:[[1,"container","px-4","mx-auto"],[4,"ngIf"],["nzShowSizeChanger","",3,"nzData","nzPageSize","nzPageSizeOptions"],["orderView",""],["nzCustomFilter",""],[3,"nzVisible","nzActive","nzDropdownMenu","nzVisibleChange"],["nz-icon","","nzType","search"],[3,"nzFilters","nzFilterFn",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngFor","ngForOf"],["menu","nzDropdownMenu"],[1,"px-2","py-2","grid","grid-cols-2"],["type","text","nz-input","","oninput","this.value = this.value.toUpperCase()","placeholder","Order#",1,"col-span-2",3,"ngModel","ngModelChange"],["searchInput",""],["nz-button","","nzSize","small","nzType","primary",1,"search-button",3,"click"],["nz-button","","nzSize","small",3,"click"],[3,"nzFilters","nzFilterFn"],[3,"routerLink","queryParams"]],template:function(l,o){if(l&1&&(e(0,"div",0),z(1,Li,1,0,"div",1),C(2,"async"),e(3,"nz-table",2,3)(5,"thead")(6,"tr")(7,"th",4),i(8," Order "),e(9,"nz-filter-trigger",5),S("nzVisibleChange",function(f){return o.searchVisible=f}),T(10,"i",6),t()(),z(11,Oi,2,3,"th",7),e(12,"th"),i(13,"Unpicked"),t(),e(14,"th"),i(15,"Aggregated"),t(),e(16,"th"),i(17,"In Process"),t()()(),e(18,"tbody"),z(19,Vi,16,14,"tr",8),t()(),e(20,"nz-dropdown-menu",null,9)(22,"div",10)(23,"input",11,12),S("ngModelChange",function(f){return o.searchValue=f}),t(),e(25,"button",13),S("click",function(){return o.searchOrder()}),i(26," Search "),t(),e(27,"button",14),S("click",function(){return o.resetSearch()}),i(28,"Reset"),t()()()()),l&2){let a=I(4),f=I(21);n(1),c("ngIf",_(2,11,o.OrderInfo$)),n(2),c("nzData",o.orderListDisplay)("nzPageSize",20)("nzPageSizeOptions",u(13,qi)),n(6),c("nzVisible",o.searchVisible)("nzActive",o.searchValue.length>0)("nzDropdownMenu",f),n(2),c("ngForOf",o.listOfColumns)("ngForTrackBy",o.trackByName),n(8),c("ngForOf",a.data),n(4),c("ngModel",o.searchValue)}},dependencies:[xe,F,M,be,L,O,q,w,V,_t,U,Q,A,B,k,R,je,yt,de,Se,G,ze,Y,Nt,X,D],encapsulation:2});let d=m;return d})();var Ri=["barcode"],Ui=()=>["/tableviews/eventlog"],Hi=d=>({ITN:d});function Gi(d,m){if(d&1&&(e(0,"tr")(1,"td")(2,"a",16),i(3),t()(),e(4,"td"),i(5),t(),e(6,"td"),i(7),t(),e(8,"td"),i(9),t(),e(10,"td"),i(11),t(),e(12,"td"),i(13),t(),e(14,"td"),i(15),t(),e(16,"td"),i(17),t()()),d&2){let r=m.$implicit;n(2),c("routerLink",u(16,Ui))("queryParams",he(17,Hi,r.Inventory==null?null:r.Inventory.InventoryTrackingNumber)),n(1),j(" ",r.Inventory==null?null:r.Inventory.InventoryTrackingNumber,""),n(2),fe("",r.Order.OrderNumber,"-",r.Order.NOSINumber,""),n(2),s(r.Status.Name),n(2),s(r.Inventory==null?null:r.Inventory.Container.Barcode),n(2),dt(" ",r.Inventory==null?null:r.Inventory.Container.Warehouse,"-",r.Inventory==null?null:r.Inventory.Container.Row,"-",r.Inventory==null?null:r.Inventory.Container.Aisle,"-",r.Inventory==null?null:r.Inventory.Container.Section,"-",r.Inventory==null?null:r.Inventory.Container.Shelf,"-",r.Inventory==null?null:r.Inventory.Container.ShelfDetail," "),n(2),s(r.Inventory==null?null:r.Inventory.Product.ProductCode.ProductCodeNumber),n(2),s(r.Inventory==null?null:r.Inventory.Product.PartNumber),n(2),s(r.Quantity)}}var $i=()=>[20,50,100],et=(()=>{let m=class m{constructor(p,l,o,a,f){this.fb=p,this.router=l,this.route=o,this.fetchOrderDetail=a,this.findDetail=f,this.barcodeForm=this.fb.group({barcode:["",[J.required,this.regex]]})}get f(){return this.barcodeForm.controls}regex(p){return Ne.test(p.value)||p.value===""?null:{regex:{valid:!1}}}ngAfterViewInit(){this.barcode.nativeElement.select()}ngOnInit(){let p=$({},this.route.snapshot.queryParams);if(p.orderNumber&&(this.barcodeForm.setValue({barcode:`${p.orderNumber}-${p.NOSINumber}`}),this.onSubmit()),p.statusID){let l={StatusID:Number(p.statusID),Priority:p.priority==="1"?!0:null};this.fetchData(l)}}fetchData(p){this.OrderInfo$=this.findDetail.fetch({filter:p},{fetchPolicy:"network-only"}).pipe(N(l=>l.data.fetchOrderLineDetailforWMSCount))}onSubmit(){let p=this.barcodeForm.get("barcode").value;if(this.barcodeForm.valid){let l=p.toUpperCase().split("-");this.OrderInfo$=this.fetchOrderDetail.fetch({Order:{DistributionCenter:ft.DistributionCenter,OrderNumber:l[0],NOSINumber:l[1]}},{fetchPolicy:"network-only"}).pipe(N(o=>o.data.findOrder.OrderNumber?!o.data.findOrder.ORDERLINEDETAILs.length||!o.data.findOrder.ORDERLINEDETAILs[0].Inventory?null:o.data.findOrder.ORDERLINEDETAILs.map(a=>Ve($({},a),{Order:{OrderNumber:o.data.findOrder.OrderNumber,NOSINumber:o.data.findOrder.NOSINumber}})):""))}}back(){this.router.navigate(["/orderview"])}};m.\u0275fac=function(l){return new(l||m)(v(me),v(zt),v(ve),v(qt),v(Vt))},m.\u0275cmp=b({type:m,selectors:[["itn-view"]],viewQuery:function(l,o){if(l&1&&st(Ri,5),l&2){let a;pt(a=ct())&&(o.barcode=a.first)}},standalone:!0,features:[P],decls:41,vars:11,consts:[[1,"container","px-2","mx-auto","md:mt-6"],["nz-form","",3,"formGroup","ngSubmit"],["nz-row","","nzJustify","center"],["nz-col","","nzXs","22","nzSm","18","nzMd","14","nzLg","12","nzXl","10","nzXXl","8"],["nz-row","","nzGutter","8","nzJustify","center"],["nz-col","",3,"nzSpan"],["nzRequired",""],["nzHasFeedback",""],["nz-input","","oninput","this.value = this.value.toUpperCase()","id","barcode","name","barcode","formControlName","barcode","autocomplete","off"],["barcode",""],["type","submit","nz-button","",3,"nzType","click"],["nz-col","","nzSpan","4"],["type","button","nz-button","",3,"click"],["nzShowSizeChanger","",3,"nzData","nzPageSize","nzPageSizeOptions"],["nzTable",""],[4,"ngFor","ngForOf"],[3,"routerLink","queryParams"]],template:function(l,o){if(l&1&&(e(0,"div",0)(1,"form",1),S("ngSubmit",function(){return o.onSubmit()}),e(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"nz-form-item")(7,"nz-form-label",6),i(8,"Order Barcode"),t(),e(9,"nz-form-control",7),T(10,"input",8,9),t()()(),e(12,"div",5)(13,"button",10),S("click",function(){return o.onSubmit()}),i(14," Search "),t()(),e(15,"div",11)(16,"button",12),S("click",function(){return o.back()}),i(17,"Back"),t()()()()()(),e(18,"nz-table",13,14),C(20,"async"),e(21,"thead")(22,"tr")(23,"th"),i(24,"ITN"),t(),e(25,"th"),i(26,"Order"),t(),e(27,"th"),i(28,"Status"),t(),e(29,"th"),i(30,"Container"),t(),e(31,"th"),i(32,"Location"),t(),e(33,"th"),i(34,"ProductCode"),t(),e(35,"th"),i(36,"PartNumber"),t(),e(37,"th"),i(38,"Quantity"),t()()(),e(39,"tbody"),z(40,Gi,18,19,"tr",15),t()()()),l&2){let a=I(19);n(1),c("formGroup",o.barcodeForm),n(4),c("nzSpan",16),n(7),c("nzSpan",4),n(1),c("nzType","primary"),n(5),c("nzData",_(20,8,o.OrderInfo$))("nzPageSize",20)("nzPageSizeOptions",u(10,$i)),n(22),c("ngForOf",a.data)}},dependencies:[G,oe,ze,Y,re,Z,ie,W,se,pe,Te,ce,K,ae,le,ne,de,Se,U,Q,A,B,X,F,M,L,O,q,w,V,k,R,D],encapsulation:2});let d=m;return d})();function ji(d,m){if(d&1&&(e(0,"th",27),i(1),t()),d&2){let r=m.$implicit;c("nzSortFn",r.compare),n(1),j(" ",r.title," ")}}function Ai(d,m){if(d&1&&(e(0,"td"),i(1),t()),d&2){let r=m.$implicit;n(1),s(r)}}var Bi=()=>["/tableviews/eventlog"],Xi=d=>({UserName:d});function Qi(d,m){if(d&1&&(e(0,"tr")(1,"td")(2,"a",28),i(3),t()(),e(4,"td"),i(5),t(),z(6,Ai,2,1,"td",26),t()),d&2){let r=m.$implicit;n(2),c("routerLink",u(5,Bi))("queryParams",he(6,Xi,r.User)),n(1),s(r.User),n(2),j(" ",r.total," "),n(1),c("ngForOf",r.taskCounter)}}var Wi=()=>[50,100,200],tt=(()=>{let m=class m{constructor(p,l,o){this._title=p,this.fb=l,this.fetchTaskCounter=o,this.isLoading=!1,this.filterForm=this.fb.group({module:["",[J.required]],timeRange:["",[J.required]]}),this.listOfColumn=[{title:"User",compare:(a,f)=>a.User.localeCompare(f.User)},{title:"Total",compare:(a,f)=>a.total-f.total}],this._title.update("Task Counting")}ngOnInit(){for(let p=0;p<24;p++){let l="";p<12&&(l=`${p}am`),p===12&&(l="12pm"),p>12&&(l=`${p-12}pm`),this.listOfColumn.push({title:l,compare:(o,a)=>o.taskCounter[p]-a.taskCounter[p]})}}resetForm(){this.filterForm.reset({module:"",timeRange:""})}onSubmit(){if(this.filterForm.invalid||this.isLoading)return;let p=this.filterForm.get("timeRange").value,l=new Date(p.setHours(0,0,0,0)).toISOString();this.startDate=l;let o=new Date(p.setHours(23,59,59,999)).toISOString();this.isLoading=!0,this.fetchTable$=this.fetchTaskCounter.fetch({Module:this.filterForm.get("module").value,startDate:l,endDate:o},{fetchPolicy:"network-only"}).pipe(N(a=>{this.isLoading=!1;let f=0,h=new Array(24).fill(0),x=a.data.fetchTaskCounter.filter(E=>E!==null).map(E=>{let te=E.taskCounter.reduce((nt,Pe,rt)=>(h[rt]+=Pe,nt+Pe));return f+=te,{User:E.User,total:te,taskCounter:E.taskCounter}});return x.push({User:"Total",total:f,taskCounter:h}),x}),Re(a=>{let f=a.map(h=>({User:h.User,total:h.total,"0am":h.taskCounter[0],"1am":h.taskCounter[1],"2am":h.taskCounter[2],"3am":h.taskCounter[3],"4am":h.taskCounter[4],"5am":h.taskCounter[5],"6am":h.taskCounter[6],"7am":h.taskCounter[7],"8am":h.taskCounter[8],"9am":h.taskCounter[9],"10am":h.taskCounter[10],"11am":h.taskCounter[11],"12am":h.taskCounter[12],"1pm":h.taskCounter[13],"2pm":h.taskCounter[14],"3pm":h.taskCounter[15],"4pm":h.taskCounter[16],"5pm":h.taskCounter[17],"6pm":h.taskCounter[18],"7pm":h.taskCounter[19],"8pm":h.taskCounter[20],"9pm":h.taskCounter[21],"10pm":h.taskCounter[22],"11pm":h.taskCounter[23]}));this.ws=ee.json_to_sheet(f)}),qe(a=>(this.isLoading=!1,a)))}exportexcel(){let p=ee.book_new();ee.book_append_sheet(p,this.ws,"Sheet1"),_e(p,`${this.startDate?.substring(0,10)}.xlsx`)}};m.\u0275fac=function(l){return new(l||m)(v(H),v(me),v(Bt))},m.\u0275cmp=b({type:m,selectors:[["task-counter"]],standalone:!0,features:[P],decls:39,vars:11,consts:[[1,"container","mx-auto","px-4","py-4"],["nz-form","",3,"formGroup"],["nz-row","","nzGutter","8","nzJustify","space-between"],["nz-col","","nzSpan","6"],["nzRequired",""],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a module","formControlName","module"],["nzLabel","Receiving(ITN)","nzValue","Receiving"],["nzLabel","Receiving(PO)","nzValue","ReceivingPO"],["nzLabel","Sorting","nzValue","Sorting"],["nzLabel","Stocking","nzValue","Stocking"],["nzLabel","Ag In","nzValue","AgIn"],["nzLabel","Ag Out","nzValue","AgOut"],["nzLabel","QC","nzValue","QC"],["nzLabel","Picking","nzValue","Picking"],["nzLabel","Drop Off","nzValue","DropOff"],["nzLabel","Release","nzValue","Release"],["nzLabel","Packing","nzValue","Packing"],["nz-col","","nzSpan","8"],["formControlName","timeRange"],["nz-col","","nzSpan","10"],["nz-button","",1,"mr-4",3,"nzType","disabled","click"],["nz-button","",1,"mr-4",3,"click"],["nz-button","",3,"click"],["id","excel-table","nzShowSizeChanger","",3,"nzPageSize","nzPageSizeOptions","nzData"],["table",""],[3,"nzSortFn",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"nzSortFn"],[3,"routerLink","queryParams"]],template:function(l,o){if(l&1&&(e(0,"div",0)(1,"form",1)(2,"div",2)(3,"nz-form-item",3)(4,"nz-form-label",4),i(5," Module "),t(),e(6,"nz-form-control")(7,"nz-select",5),T(8,"nz-option",6)(9,"nz-option",7)(10,"nz-option",8)(11,"nz-option",9)(12,"nz-option",10)(13,"nz-option",11)(14,"nz-option",12)(15,"nz-option",13)(16,"nz-option",14)(17,"nz-option",15)(18,"nz-option",16),t()()(),e(19,"nz-form-item",17)(20,"nz-form-label",4),i(21," Date "),t(),e(22,"nz-form-control"),T(23,"nz-date-picker",18),t()(),e(24,"div",19)(25,"button",20),S("click",function(){return o.onSubmit()}),i(26," Search "),t(),e(27,"button",21),S("click",function(){return o.resetForm()}),i(28,"Clear"),t(),e(29,"button",22),S("click",function(){return o.exportexcel()}),i(30,"Save"),t()()()(),e(31,"nz-table",23,24),C(33,"async"),e(34,"thead")(35,"tr"),z(36,ji,2,2,"th",25),t()(),e(37,"tbody"),z(38,Qi,7,8,"tr",26),t()()()),l&2){let a=I(32);n(1),c("formGroup",o.filterForm),n(24),c("nzType","primary")("disabled",o.isLoading),n(6),c("nzPageSize",50)("nzPageSizeOptions",u(10,Wi))("nzData",_(33,8,o.fetchTable$)),n(5),c("ngForOf",o.listOfColumn),n(2),c("ngForOf",a.data)}},dependencies:[G,oe,Y,re,Z,ie,W,se,pe,Te,ce,K,ae,le,ne,Ie,Ae,Be,ye,Ce,U,Q,A,B,X,F,M,be,L,O,q,w,V,k,R,D],encapsulation:2});let d=m;return d})();function Ji(d,m){if(d&1&&(e(0,"tr")(1,"td"),i(2),t(),e(3,"td"),i(4),t(),e(5,"td"),i(6),t(),e(7,"td"),i(8),t(),e(9,"td"),i(10),t(),e(11,"td"),i(12),t(),e(13,"td"),i(14),t()()),d&2){let r=m.$implicit;n(2),s(r.Order),n(2),s(r.qcFirst),n(2),s(r.qcLast),n(2),s(r.qcTime),n(2),s(r.agIn),n(2),s(r.agOut),n(2),s(r.agTime)}}var Yi=()=>[20,50,100],it=(()=>{let m=class m{constructor(p,l,o){this._title=p,this.fb=l,this.fetchTable=o,this.isLoading=!1,this.filterForm=this.fb.group({target:["",[J.pattern(Ne)]]}),this._title.update("Task Counting")}ngOnInit(){}resetForm(){this.filterForm.reset({target:""})}onSubmit(){this.filterForm.invalid||this.isLoading||(this.isLoading=!0,this.fetchTable$=this.fetchTable.fetch({target:this.filterForm.get("target").value,limit:200},{fetchPolicy:"network-only"}).pipe(N(p=>(this.isLoading=!1,p.data.fetchOrderTasktime.map(l=>{let o=$({},l),a=new Date(Number(l.qcFirst)),f=new Date(Number(l.qcLast)),h=new Date(Number(l.agIn)),x=new Date(Number(l.agOut));return l.agIn&&(o.agIn=h.toLocaleString()),l.agOut&&(o.agOut=x.toLocaleString()),a!==f&&(o.qcTime=this.dateFormat(a,f)),l.agIn&&l.agOut&&(o.agTime=this.dateFormat(h,x)),o.qcFirst=a.toLocaleString(),o.qcLast=f.toLocaleString(),o})))))}dateFormat(p,l){let o=Math.ceil((l.getTime()-p.getTime())/6e4),a=Math.floor(o/60),f=o%60,h="";return a&&(h=`${a}hr`),f&&(h+=`${f}min`),h}};m.\u0275fac=function(l){return new(l||m)(v(H),v(me),v(jt))},m.\u0275cmp=b({type:m,selectors:[["order-tasktime"]],standalone:!0,features:[P],decls:32,vars:10,consts:[[1,"container","px-4","py-4","mx-auto"],["nz-form","",3,"formGroup"],["nz-row","","nzGutter","8","nzJustify","space-between"],["nz-col","","nzSpan","6"],["nzHasFeedback","","nzErrorTip","The input is not valid barcode!"],["nz-input","","formControlName","target","placeholder","filter by Order-NOSI"],["nz-col","","nzSpan","8"],["nz-button","",1,"mr-4",3,"nzType","disabled","click"],["nz-button","",3,"click"],["nzShowSizeChanger","",3,"nzData","nzPageSize","nzPageSizeOptions"],["table",""],[4,"ngFor","ngForOf"]],template:function(l,o){if(l&1&&(e(0,"div",0)(1,"form",1)(2,"div",2)(3,"nz-form-item",3)(4,"nz-form-control",4),T(5,"input",5),t()(),e(6,"div",6)(7,"button",7),S("click",function(){return o.onSubmit()}),i(8," Search "),t(),e(9,"button",8),S("click",function(){return o.resetForm()}),i(10,"Clear"),t()()()(),e(11,"nz-table",9,10),C(13,"async"),e(14,"thead")(15,"tr")(16,"th"),i(17,"Order"),t(),e(18,"th"),i(19,"QC Start"),t(),e(20,"th"),i(21,"QC End"),t(),e(22,"th"),i(23,"QC Tasktime"),t(),e(24,"th"),i(25,"Ag In"),t(),e(26,"th"),i(27,"Ag Out"),t(),e(28,"th"),i(29,"Ag Tasktime"),t()()(),e(30,"tbody"),z(31,Ji,15,7,"tr",11),t()()()),l&2){let a=I(12);n(1),c("formGroup",o.filterForm),n(6),c("nzType","primary")("disabled",o.isLoading),n(4),c("nzData",_(13,7,o.fetchTable$))("nzPageSize",20)("nzPageSizeOptions",u(9,Yi)),n(20),c("ngForOf",a.data)}},dependencies:[G,oe,ze,Y,re,Z,ie,W,se,pe,ce,K,ae,le,ne,de,Se,U,Q,A,B,X,F,M,L,O,q,w,V,k,D],encapsulation:2});let d=m;return d})();function Ki(d,m){if(d&1&&(e(0,"th",12),i(1),t()),d&2){let r=m.$implicit;c("nzSortFn",r.compare),n(1),j(" ",r.title," ")}}function Zi(d,m){if(d&1&&(e(0,"td"),i(1),t()),d&2){let r=m.$implicit;n(1),s(r)}}var en=()=>["/tableviews/eventlog"],tn=d=>({UserName:d});function nn(d,m){if(d&1&&(e(0,"tr")(1,"td")(2,"a",13),i(3),t()(),e(4,"td"),i(5),t(),z(6,Zi,2,1,"td",11),t()),d&2){let r=m.$implicit;n(2),c("routerLink",u(5,en))("queryParams",he(6,tn,r.User)),n(1),s(r.User),n(2),j(" ",r.total," "),n(1),c("ngForOf",r.detail)}}var Me=(()=>{let m=class m{constructor(p,l,o){this._title=p,this.fb=l,this.fetchHoldOnCounter=o,this.isLoading=!1,this.filterForm=this.fb.group({timeRange:["",[J.required]]}),this.listOfColumn=[{title:"User",compare:(a,f)=>a.User.localeCompare(f.User)},{title:"Total",compare:(a,f)=>a.total-f.total},{title:"31 Short Quantity",compare:(a,f)=>a.total-f.total},{title:"32 Damaged",compare:(a,f)=>a.total-f.total},{title:"33 Repackaging",compare:(a,f)=>a.total-f.total},{title:"34 Wrong Parts",compare:(a,f)=>a.total-f.total},{title:"35 Verify Quantity",compare:(a,f)=>a.total-f.total},{title:"36 Mixed Parts",compare:(a,f)=>a.total-f.total},{title:"37 Part Number Verification",compare:(a,f)=>a.total-f.total},{title:"38 Kit Set",compare:(a,f)=>a.total-f.total},{title:"39 Over Shipment",compare:(a,f)=>a.total-f.total}],this._title.update("Hold On Counting")}ngOnInit(){}onSubmit(){if(this.filterForm.invalid||this.isLoading)return;let p=this.filterForm.get("timeRange").value,l=new Date(p.setHours(0,0,0,0)).toISOString();this.startDate=l;let o=new Date(p.setHours(23,59,59,999)).toISOString();this.isLoading=!0,this.fetchTable$=this.fetchHoldOnCounter.fetch({startDate:l,endDate:o},{fetchPolicy:"network-only"}).pipe(N(a=>{if(this.isLoading=!1,!a.data.fetchHoldOnCounter)return null;let f=0,h=new Array(9).fill(0),x=a.data.fetchHoldOnCounter.filter(E=>E!==null).map(E=>{h[0]+=E.detail[0];let te=E.detail.reduce((nt,Pe,rt)=>(h[rt]+=Pe,nt+Pe));return f+=te,{User:E.User,total:te,detail:E.detail}});return x.push({User:"Total",total:f,detail:h}),x}),qe(a=>(this.isLoading=!1,a)))}exportexcel(){let p=document.getElementById("excel-table"),l=ee.table_to_sheet(p),o=ee.book_new();ee.book_append_sheet(o,l,"Sheet1"),_e(o,`Hold-On${this.startDate.substring(0,10)}.xlsx`)}};m.\u0275fac=function(l){return new(l||m)(v(H),v(me),v($t))},m.\u0275cmp=b({type:m,selectors:[["hold-on-counter"]],standalone:!0,features:[P],decls:21,vars:9,consts:[[1,"container","px-4","py-4","mx-auto"],["nz-form","",3,"formGroup"],["nz-row","","nzGutter","8","nzJustify","space-between"],["nz-col","","nzSpan","8"],["nzRequired",""],["formControlName","timeRange"],["nz-button","",1,"mr-4",3,"nzType","disabled","click"],["nz-button","",3,"click"],["id","excel-table","nzShowSizeChanger","",3,"nzPageSize","nzData"],["table",""],[3,"nzSortFn",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"nzSortFn"],[3,"routerLink","queryParams"]],template:function(l,o){if(l&1&&(e(0,"div",0)(1,"form",1)(2,"div",2)(3,"nz-form-item",3)(4,"nz-form-label",4),i(5," Date "),t(),e(6,"nz-form-control"),T(7,"nz-date-picker",5),t()(),e(8,"div",3)(9,"button",6),S("click",function(){return o.onSubmit()}),i(10," Search "),t(),e(11,"button",7),S("click",function(){return o.exportexcel()}),i(12,"Save"),t()()()(),e(13,"nz-table",8,9),C(15,"async"),e(16,"thead")(17,"tr"),z(18,Ki,2,2,"th",10),t()(),e(19,"tbody"),z(20,nn,7,8,"tr",11),t()()()),l&2){let a=I(14);n(1),c("formGroup",o.filterForm),n(8),c("nzType","primary")("disabled",o.isLoading),n(4),c("nzPageSize",50)("nzData",_(15,7,o.fetchTable$)),n(5),c("ngForOf",o.listOfColumn),n(2),c("ngForOf",a.data)}},dependencies:[G,oe,Y,re,Z,ie,W,se,pe,Te,ce,K,ae,le,ne,ye,Ce,U,Q,A,B,X,F,M,be,L,O,q,w,V,k,R,D],encapsulation:2});let d=m;return d})();var rn=[{path:"",component:Qe},{path:"wmsstatus",component:Ye},{path:"wmsstatus/orderlist",component:Ke},{path:"orderview",component:Ze},{path:"orderview/itnview",component:et},{path:"eventlog",component:Je},{path:"taskcounter",component:tt},{path:"ordertasktime",component:it},{path:"holdoncounter",component:Me}],zi=(()=>{let m=class m{};m.\u0275fac=function(l){return new(l||m)},m.\u0275mod=He({type:m}),m.\u0275inj=Ue({imports:[ot.forChild(rn),ot]});let d=m;return d})();var Eo=(()=>{let m=class m{};m.\u0275fac=function(l){return new(l||m)},m.\u0275mod=He({type:m,bootstrap:[Qe]}),m.\u0275inj=Ue({imports:[ht,G,K,zi,de,F,je,U,Z,kt,xt,ye,Ie,It,bt,Lt,Ot,wt,Ct,St,Je,Me,Ye,Ke,Ze,et,tt,it,Me]});let d=m;return d})();export{Eo as TableViewsModule};
