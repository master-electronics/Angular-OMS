import{a as L}from"./chunk-GKR6SDXW.js";import{a as K}from"./chunk-XHQXBUEX.js";import"./chunk-RMIKNTFD.js";import"./chunk-ZOYJBT7K.js";import"./chunk-D3FIXZL7.js";import"./chunk-ADHMVREX.js";import{a as A}from"./chunk-IPTX4HSO.js";import"./chunk-VJKYRYVM.js";import{a as D}from"./chunk-OQTOI2SX.js";import{b as q}from"./chunk-JBNMM6R5.js";import"./chunk-KSUYRJTQ.js";import"./chunk-M47XUQY5.js";import"./chunk-YPJKXAYS.js";import"./chunk-I3G2JKLN.js";import"./chunk-LCEARWCQ.js";import"./chunk-4AGTE6D3.js";import"./chunk-5GWOD35Y.js";import"./chunk-POEXBOQJ.js";import{I as E,e as V,i as $,k as j,m as G,t as O}from"./chunk-L3THJMBJ.js";import"./chunk-WX6KJXZ2.js";import"./chunk-EXQESRXT.js";import"./chunk-5FUULRSO.js";import"./chunk-PLQ7TNCQ.js";import"./chunk-C55YZZU5.js";import"./chunk-XSY6ZNJP.js";import"./chunk-W3KGMJG7.js";import"./chunk-B3MPBRHZ.js";import"./chunk-YUDS3XHK.js";import"./chunk-MIXZFVL7.js";import"./chunk-FFJ3QZ3H.js";import{i as B,k as M}from"./chunk-PJEV5NXI.js";import{A as T,f as F,q as N,w as R}from"./chunk-GWV5DZOT.js";import{$b as u,Da as C,Fb as p,Gb as o,Gc as k,H as c,Ia as b,Ja as I,Lc as y,Mc as w,S as v,Sb as s,ac as l,bc as f,dc as d,ec as _,gc as P,na as S,nc as h,pc as g}from"./chunk-N7LPRJLK.js";function J(r,n){if(r&1){let a=P();d(0),l(1,"popup-modal",2),h("clickSubmit",function(){b(a);let e=g(2);return I(e.onBack())}),f(),_()}if(r&2){let a=g().ngIf;p(1),s("message",a)}}function Q(r,n){if(r&1&&(d(0),u(1,J,2,1,"ng-container",1),_()),r&2){let a=n.ngIf;p(1),s("ngIf",a)}}var pe=(()=>{let n=class n{constructor(t,e,i,m,x,z){this._router=t,this._receipt=e,this._ui=i,this._message=m,this.location=x,this._actRoute=z,this.validators=[{name:"filter",message:"Not Found part number!"}],this.onChange=H=>{this.inputForm.setValue({partNumber:H})}}ngOnInit(){this._ui.changeSteps(0),history.pushState(null,null,window.location.href),this.location.onPopState(()=>{history.pushState(null,null,window.location.href)}),this.inputForm=new j({partNumber:new G("",[V.required,this.partNumberSearch()])}),this.url$=this._actRoute.queryParams.pipe(S(t=>(t.name==="finish"&&this._message.success(`Finished Receipt: ${t.receipt}, line: ${t.line}`),t.name==="kickout"&&this._message.warning(`Kickout PurchaseOrder: ${t.PurchaseOrder},`),this._actRoute.data.pipe(v(e=>e.lines?.error),c(e=>e.lines.error.message),c(e=>{let i=e;return t.name==="finish"&&(i="Receipt Complete"),t.name==="kickout"&&(i=`Kickout PurchaseOrder: ${t.PurchaseOrder}
${e}`),i})))))}partNumberSearch(){return t=>{let e=t.value;return e?this._receipt.receiptInfoAfterFilter().some(m=>m.PartNumber.trim().toLowerCase()===e.trim().toLowerCase())?null:{filter:!0}:null}}onSubmit(){this._receipt.updatePartNumber(this.inputForm.value.partNumber.trim()),this._router.navigate(["../part/verify"],{relativeTo:this._actRoute})}onBack(){this._router.navigate(["../receipt"],{relativeTo:this._actRoute})}};n.\u0275fac=function(e){return new(e||n)(o(M),o(A),o(D),o(q),o(F),o(B))},n.\u0275cmp=C({type:n,selectors:[["ng-component"]],standalone:!0,features:[k],decls:3,vars:6,consts:[["controlName","partNumber","title","Part Number",3,"validators","formGroup","isvalid","formBack","formSubmit"],[4,"ngIf"],[3,"message","clickSubmit"]],template:function(e,i){e&1&&(l(0,"single-input-form",0),h("formBack",function(){return i.onBack()})("formSubmit",function(){return i.onSubmit()}),f(),u(1,Q,2,1,"ng-container",1),y(2,"async")),e&2&&(s("validators",i.validators)("formGroup",i.inputForm)("isvalid",i.inputForm.valid),p(1),s("ngIf",w(2,4,i.url$)))},dependencies:[T,N,R,K,E,$,O,L],encapsulation:2});let r=n;return r})();export{pe as PartComponent};
