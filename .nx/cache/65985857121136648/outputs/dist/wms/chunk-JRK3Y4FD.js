import{a as be}from"./chunk-I3G2JKLN.js";import{a as Se}from"./chunk-LCEARWCQ.js";import{a as Ce,b as _e}from"./chunk-RH2D4KR5.js";import{e as Fe}from"./chunk-POEXBOQJ.js";import{f as Le,l as Me,n as De,q as H}from"./chunk-KI3MUNGW.js";import"./chunk-JOHRHLSX.js";import"./chunk-OXQW4PMW.js";import"./chunk-6DLKQNDK.js";import{b as ye,d as Te}from"./chunk-MZCJXFXF.js";import{a as X,b as U,c as $,d as J,e as W}from"./chunk-WUHPQNSG.js";import"./chunk-YGLVR5WL.js";import{a as P,d as Q}from"./chunk-44NJU3LR.js";import"./chunk-Z347V25R.js";import{G as V,H as q,I as O,d as k,e as z,h as B,i as R,p as j,t as A,u as G}from"./chunk-L3THJMBJ.js";import"./chunk-RAQ4VAB7.js";import"./chunk-FMSTYN27.js";import"./chunk-QQPJAVIB.js";import"./chunk-RMC6N2HF.js";import"./chunk-GJX7JKAF.js";import"./chunk-WX6KJXZ2.js";import"./chunk-EXQESRXT.js";import"./chunk-5FUULRSO.js";import{a as x,b as w,c as ge}from"./chunk-V5UEWFGK.js";import{a as fe}from"./chunk-PLQ7TNCQ.js";import"./chunk-C55YZZU5.js";import{a as Ne}from"./chunk-E6LDBMP7.js";import{a as L,c as M,d as ze,e as D,f as E}from"./chunk-GFVCXK67.js";import"./chunk-WOYNEQEU.js";import"./chunk-XSY6ZNJP.js";import"./chunk-W3KGMJG7.js";import"./chunk-B3MPBRHZ.js";import"./chunk-YUDS3XHK.js";import"./chunk-MIXZFVL7.js";import"./chunk-FFJ3QZ3H.js";import{c as ve,k as F,l as Ie,n as re}from"./chunk-PJEV5NXI.js";import{A as he,p as ue,q as _,w as de}from"./chunk-GWV5DZOT.js";import{$b as d,Da as g,Ea as y,Fb as m,Gb as p,Gc as le,H as se,Hc as te,Ic as ie,Lc as ce,Mc as pe,Rc as b,Sb as l,Sc as S,Uc as C,V as me,ac as o,bc as a,cc as h,j as oe,n as ae,nc as v,pc as T,wa as N,xc as f,zc as ee}from"./chunk-N7LPRJLK.js";var u=class{constructor(){this._ITNList=new ae(null)}setITNList(e){this._ITNList.next(e)}get ITNList(){return this._ITNList.value}};var Pe=["ITNBarcode"],xe=()=>["/tableviews/eventlog"],we=t=>({ITN:t});function Qe(t,e){if(t&1&&(o(0,"tr",18)(1,"td")(2,"a",19),f(3),a()()()),t&2){let c=e.$implicit;m(2),l("routerLink",te(3,xe))("queryParams",ie(4,we,c)),m(1),ee(" ",c,"")}}function Xe(t,e){if(t&1&&(o(0,"div")(1,"tr",16),f(2," InvalidITN "),a(),d(3,Qe,4,6,"tr",17),a()),t&2){let c=T();m(3),l("ngForOf",c.invalidITN)}}function Ue(t,e){if(t&1&&(o(0,"tr",20)(1,"td")(2,"a",21),f(3),a()()()),t&2){let c=e.$implicit;m(2),l("routerLink",te(3,xe))("queryParams",ie(4,we,c)),m(1),ee(" ",c,"")}}var K=(()=>{let e=class e{constructor(n,i,r){this._fb=n,this._router=i,this._shelfInventoryService=r,this.itemList=[],this.selectedList=new Set,this.invalidITN=[],this.inputForm=this._fb.group({ITNBarcode:["",[z.pattern(ye)]]})}ngOnInit(){this.itemList=this._shelfInventoryService.ITNList,this.itemList||this._router.navigate(["/shelfinventory"])}ngAfterViewInit(){this.ITNinput.nativeElement.select()}onSubmit(){if(!this.inputForm.valid||this.inputForm.value.ITNBarcode.length<1){this.ITNinput.nativeElement.select();return}this.selectITN()}selectITN(){let n=!1,i=this.inputForm.value.ITNBarcode.toUpperCase();this.itemList=this.itemList.filter(r=>(n=r===i,n&&this.selectedList.add(r),!n)),n||(n=this.selectedList.has(i)),n||this.invalidITN.includes(i)||this.invalidITN.unshift(i),this.ITNinput.nativeElement.select()}back(){this._router.navigate(["/shelfinventory"])}};e.\u0275fac=function(i){return new(i||e)(p(V),p(F),p(u))},e.\u0275cmp=g({type:e,selectors:[["sacn-itn"]],viewQuery:function(i,r){if(i&1&&S(Pe,5),i&2){let s;b(s=C())&&(r.ITNinput=s.first)}},standalone:!0,features:[le],decls:21,vars:3,consts:[[1,"container","mx-auto","px-2","py-2","md:mt-4"],["nz-form","","focusInvalidInput","",3,"formGroup","ngSubmit"],["nz-row","","nzJustify","center"],["nz-col","","nzXs","20","nzSm","16","nzMd","12","nzLg","10","nzXl","8","nzXXl","6"],["nzRequired",""],["nzHasFeedback","","nzErrorTip","The input is not valid ITN!"],["nz-input","","oninput","this.value = this.value.toUpperCase()","placeholder"," ","formControlName","ITNBarcode","placeholder","ITN#","nzSize","large","type","text","id","ITNBarcode","name","ITNBarcode","autocomplete","off"],["ITNBarcode",""],["nz-row","","nzGutter","16","nzJustify","center"],["nz-col","","nzSpan","16"],["nz-button","","type","submit","nzType","primary","nzSize","large",1,"mr-6"],["nz-col","","nzSpan","8"],["nz-button","","nzSize","large",3,"click"],[1,"w-full"],[4,"ngIf"],["class","text-lg",4,"ngFor","ngForOf"],[1,"text-red-500","font-bold"],["class","text-red-500 text-lg",4,"ngFor","ngForOf"],[1,"text-red-500","text-lg"],[1,"text-red-500",3,"routerLink","queryParams"],[1,"text-lg"],[3,"routerLink","queryParams"]],template:function(i,r){i&1&&(o(0,"div",0)(1,"form",1),v("ngSubmit",function(){return r.onSubmit()}),o(2,"div",2)(3,"div",3)(4,"nz-form-item",2)(5,"nz-form-label",4),f(6,"Pick ITNs in the shelf"),a(),o(7,"nz-form-control",5),h(8,"input",6,7),a()(),o(10,"nz-form-item",8)(11,"div",9)(12,"button",10),f(13," Submit "),a()(),o(14,"div",11)(15,"button",12),v("click",function(){return r.back()}),f(16,"Back"),a()()(),o(17,"table",13)(18,"tbody"),d(19,Xe,4,1,"div",14)(20,Ue,4,6,"tr",15),a()()()()()()),i&2&&(m(1),l("formGroup",r.inputForm),m(18),l("ngIf",r.invalidITN.length>0),m(1),l("ngForOf",r.itemList))},dependencies:[q,j,k,B,R,W,w,x,U,X,J,$,O,A,G,ge,Q,P,E,D,L,M,ze,H,Le,Me,De,_,ue,Ie],encapsulation:2});let t=e;return t})();var $e=["barcode"];function Je(t,e){t&1&&h(0,"div")}function We(t,e){if(t&1&&(o(0,"nz-form-item",2),h(1,"nz-alert",12),a()),t&2){let c=T();m(1),l("nzType",c.alertType==="error"?"error":c.alertType==="success"?"success":c.alertType==="info"?"info":"warning")("nzMessage",c.alertMessage)}}var Y=(()=>{let e=class e{constructor(n,i,r,s,Z,I){this._title=n,this.router=i,this.fb=r,this.titleService=s,this.searchITNList=Z,this.shelfInventory=I,this.title="Shelf Inventory",this.isLoading=!1,this.alertMessage="",this.alertType="error",this.search$=new oe,this.barcodeForm=this.fb.group({barcode:["",[z.required,z.pattern(Te)]]}),this._title.update(this.title),this.titleService.setTitle(this.title)}ngOnInit(){this.shelfInventory.setITNList([])}ngAfterViewInit(){this.barcode.nativeElement.select()}onSubmit(){if(this.alertMessage="",this.barcodeForm.get("barcode").invalid){this.barcode.nativeElement.select();return}this.isLoading=!0;let n=this.barcodeForm.get("barcode").value,i={DistributionCenter:fe.DistributionCenter,Warehouse:n.substring(0,2),Row:n.substring(3,5),Aisle:n.substring(6,8),Section:n.substring(9,11),Shelf:n.substring(12,13),ShelfDetail:n.substring(14)};this.search$=this.searchITNList.fetch({Container:i},{fetchPolicy:"network-only"}).pipe(se(r=>{if(r.data.findContainers.length===0){this.alertMessage="No Container found for this barcode",this.alertType="error";return}let s=[];if(r.data.findContainers.forEach(Z=>{Z.INVENTORies.forEach(I=>{I.ORDERLINEDETAILs[0]?.StatusID&&I.ORDERLINEDETAILs[0].StatusID===be.agInComplete_ID&&s.push(I.InventoryTrackingNumber)})}),s.length===0){this.alertMessage="No ITN found for this barcode",this.alertType="error";return}this.shelfInventory.setITNList(s),this.isLoading=!1,this.router.navigate(["/shelfinventory/scanitn/"])}),me(r=>(this.alertMessage=r.message,this.alertType="error",this.isLoading=!1,r)))}};e.\u0275fac=function(i){return new(i||e)(p(Ne),p(F),p(V),p(ve),p(Se),p(u))},e.\u0275cmp=g({type:e,selectors:[["shelf-inventory"]],viewQuery:function(i,r){if(i&1&&S($e,5),i&2){let s;b(s=C())&&(r.barcode=s.first)}},decls:17,vars:6,consts:[[1,"container","py-6"],["nz-form","","focusInvalidInput","",3,"formGroup","ngSubmit"],["nz-row","","nzJustify","center"],["nz-col","","nzXs","20","nzSm","16","nzMd","12","nzLg","10","nzXl","8","nzXXl","6"],["nzRequired",""],["nzHasFeedback","","nzErrorTip","The input is not valid shelf barcode!"],["nz-input","","oninput","this.value = this.value.toUpperCase()","placeholder","10-AG-01-01-A-00","nzSize","large","type","text","id","barcode","name","barcode","formControlName","barcode","autocomplete","off"],["barcode",""],["nz-col","","nzSpan","13"],["nz-button","","type","submit","nzType","primary","nzSize","large",1,"w-full",3,"nzLoading","click"],[4,"ngIf"],["nz-row","","nzJustify","center",4,"ngIf"],["nzShowIcon","",1,"w-full",3,"nzType","nzMessage"]],template:function(i,r){i&1&&(o(0,"div",0)(1,"form",1),v("ngSubmit",function(){return r.onSubmit()}),o(2,"div",2)(3,"div",3)(4,"nz-form-item",2)(5,"nz-form-label",4),f(6," Shelf "),a(),o(7,"nz-form-control",5),h(8,"input",6,7),a()(),o(10,"nz-form-item",2)(11,"div",8)(12,"button",9),v("click",function(){return r.onSubmit()}),f(13," Search "),a()()(),d(14,Je,1,0,"div",10),ce(15,"async"),d(16,We,2,2,"nz-form-item",11),a()()()()),i&2&&(m(1),l("formGroup",r.barcodeForm),m(11),l("nzLoading",r.isLoading),m(2),l("ngIf",pe(15,4,r.search$)),m(2),l("ngIf",r.alertMessage))},dependencies:[_,j,k,B,R,A,G,P,D,L,M,w,x,U,X,J,$,Ce,de],encapsulation:2});let t=e;return t})();var He=[{path:"",component:Y},{path:"scanitn",component:K}],ke=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=y({type:e}),e.\u0275inj=N({imports:[re.forChild(He),re]});let t=e;return t})();var At=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=y({type:e,bootstrap:[Y]}),e.\u0275inj=N({providers:[u],imports:[he,q,O,ke,Q,H,E,W,Fe,_e,K]});let t=e;return t})();export{At as ShelfInventoryModule};
