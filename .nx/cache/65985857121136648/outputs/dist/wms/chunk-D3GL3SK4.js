import{a as l,b as p}from"./chunk-6TITOEJA.js";import{b as m}from"./chunk-5GWOD35Y.js";import{a as s}from"./chunk-PLQ7TNCQ.js";import{Aa as a,Ab as y,Ba as I,H as d,Kb as h,a as f,b as c,qa as e,va as u}from"./chunk-N7LPRJLK.js";var E=(()=>{let i=class i{constructor(n,t){this._verifyITN=n,this._verifyContainer=t,this._sessionStorage=I(m),this.itnInfo=y(JSON.parse(this._sessionStorage.getItem("stockingItnInfo"))),h(()=>{this._sessionStorage.setItem("stockingItnInfo",JSON.stringify(this.itnInfo()))})}reset(){this.itnInfo.set(null)}verifyPutawayBarcode$(n){return this._verifyContainer.fetch({Barcode:n,DistributionCenter:s.DistributionCenter},{fetchPolicy:"network-only"}).pipe(e(t=>{if(!t.data.findContainer._id)throw new Error("Container not found!")}),d(()=>{this.itnInfo.update(t=>c(f({},t),{BinLocation:n}))}))}verifyITN$(n){return this._verifyITN.fetch({ITN:n,DC:s.DistributionCenter},{fetchPolicy:"network-only"}).pipe(e(t=>{if(!t.data.findInventory._id)throw new Error("ITN not found");if(!t.data.findInventory.Container.ContainerType.IsMobile)throw new Error("Must be in a mobile container");if(t.data.findInventory.ORDERLINEDETAILs.length&&t.data.findInventory.ORDERLINEDETAILs[0].StatusID)throw new Error("Can't move this ITN after picking.");let o=t.data.findInventory;this.itnInfo.set({ITN:n,ProductID:o.Product._id,InventoryID:o._id,ProductCode:o.Product.ProductCode.ProductCodeNumber,PartNumber:o.Product.PartNumber,QuantityOnHand:o.QuantityOnHand,Velocity:o.Product.Velocity,Autostore:o.Product.Autostore,ProductType:"STANDARD",Remaining:null,BinLocation:null})}))}};i.\u0275fac=function(t){return new(t||i)(a(l),a(p))},i.\u0275prov=u({token:i,factory:i.\u0275fac});let r=i;return r})();export{E as a};
