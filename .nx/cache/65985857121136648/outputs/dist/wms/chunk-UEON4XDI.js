import{a as L}from"./chunk-G2ZMXMZ4.js";import{a as G}from"./chunk-D3GL3SK4.js";import"./chunk-6TITOEJA.js";import{a as $}from"./chunk-CNRANGED.js";import{a as D}from"./chunk-XHQXBUEX.js";import"./chunk-RMIKNTFD.js";import"./chunk-D3FIXZL7.js";import"./chunk-ADHMVREX.js";import"./chunk-VJKYRYVM.js";import"./chunk-KSUYRJTQ.js";import"./chunk-YPJKXAYS.js";import"./chunk-I3G2JKLN.js";import"./chunk-LCEARWCQ.js";import"./chunk-4AGTE6D3.js";import"./chunk-5GWOD35Y.js";import"./chunk-POEXBOQJ.js";import{b as M}from"./chunk-MZCJXFXF.js";import{E as j,I as F,e as b,i as B,t as N}from"./chunk-L3THJMBJ.js";import"./chunk-PLQ7TNCQ.js";import"./chunk-C55YZZU5.js";import{a as R}from"./chunk-E6LDBMP7.js";import"./chunk-YUDS3XHK.js";import"./chunk-MIXZFVL7.js";import"./chunk-FFJ3QZ3H.js";import{c as T,i as k,k as C,n as y}from"./chunk-PJEV5NXI.js";import{A as S,w as g}from"./chunk-GWV5DZOT.js";import{C as n,Da as u,Gb as e,Gc as _,H as a,Lc as v,Mc as I,Sb as f,V as c,ac as l,bc as d,na as p,nc as h}from"./chunk-N7LPRJLK.js";var it=(()=>{let r=class r{constructor(t,i,o,m,U,w,A,E){this.title=t,this._title=i,this._fb=o,this._actRoute=m,this._router=U,this._stock=w,this._userC=A,this._itn=E,this.inputForm=this._fb.nonNullable.group({itn:["",[b.required]]})}ngOnInit(){this.title.setTitle("Stocking"),this._title.update("Stocking"),this.data$=this._actRoute.data.pipe(a(t=>t.containerID)),this._stock.reset(),this._itn.reset()}onSubmit(){let t=this.inputForm.value.itn.trim();if(M.test(t)){this.moveItnToUser(t);return}let i=t.trim().length===16?t.trim().replace(/-/g,""):t.trim();this.findITNInLocation(i)}moveItnToUser(t){this.data$=this._itn.verifyITN$(t).pipe(p(i=>i.data.findInventory.Container._id===this._userC.userContainerID?n(!1):this._stock.moveItnToUser(t)),a(()=>{this._stock.ScanItnAsTarget(this._itn.itnInfo()),this._router.navigate(["../putaway"],{relativeTo:this._actRoute})}),c(i=>n({error:{message:i.message,type:"error"}})))}findITNInLocation(t){this.data$=this._stock.findITNsInLocation(t).pipe(a(()=>{this._router.navigate(["../itncount"],{relativeTo:this._actRoute})}),c(i=>n({error:{message:i.message,type:"error"}})))}onBack(){this._router.navigate(["../"],{relativeTo:this._actRoute})}};r.\u0275fac=function(i){return new(i||r)(e(T),e(R),e(j),e(k),e(C),e(L),e($),e(G))},r.\u0275cmp=u({type:r,selectors:[["ng-component"]],standalone:!0,features:[_],decls:2,vars:4,consts:[["controlName","itn","title","Scan Location or ITN:",3,"data","formGroup","formSubmit","formBack"]],template:function(i,o){i&1&&(l(0,"single-input-form",0),h("formSubmit",function(){return o.onSubmit()})("formBack",function(){return o.onBack()}),v(1,"async"),d()),i&2&&f("data",I(1,2,o.data$))("formGroup",o.inputForm)},dependencies:[S,g,y,D,F,B,N],encapsulation:2});let s=r;return s})();export{it as ScanTargetComponent};
