import{a as P}from"./chunk-ZL6MQR3Z.js";import{a as Y}from"./chunk-W6X5OBKE.js";import{a as W}from"./chunk-PTORZITP.js";import{a as z}from"./chunk-D3FIXZL7.js";import{a as q}from"./chunk-VJKYRYVM.js";import{E as j,H as R,I as A,d as L,e as M,h as V,i as U,p as $,t as B,u as G}from"./chunk-L3THJMBJ.js";import{A as T,p as O,q as k,w as D}from"./chunk-GWV5DZOT.js";import{$b as f,Da as I,Fb as d,Gb as p,Gc as E,H as s,Lc as F,Mb as _,Mc as w,Sb as l,Vc as N,Y as S,ac as n,ba as C,bc as a,cc as h,na as b,nc as g,pc as v,wc as y,xc as c,zc as x}from"./chunk-N7LPRJLK.js";function H(o,r){if(o&1&&(n(0,"div"),c(1),a()),o&2){let m=v().$implicit;d(1),x(" ",m.message," ")}}function J(o,r){if(o&1&&(n(0,"div"),f(1,H,2,1,"div",18),a()),o&2){let m=r.$implicit,e=v(2);d(1),l("ngIf",e.editForm.get("datecode").errors==null?null:e.editForm.get("datecode").errors[m.name])}}function K(o,r){if(o&1&&(n(0,"div",16),f(1,J,2,1,"div",17),a()),o&2){let m=v();d(1),l("ngForOf",m.datecodeValidators)}}function X(o,r){o&1&&(n(0,"div",19),c(1,"no error"),a())}var ft=(()=>{let r=class r{constructor(e,i,t){this._fb=e,this._update=i,this._country=t,this.clickSubmit=new _,this.clickCancel=new _,this.ISO3="",this.datecode="",this.datecodeValidators=[{name:"format",message:"Format must be YYWW(2 digit year, 2 digit week)"},{name:"value",message:"Input can't greater than current date!"}]}ngOnInit(){this.editForm=this._fb.group({datecode:[this.datecode,[this._update.checkDateCode()]],country:[this.ISO3,[M.required],[this._update.countryValidator()]]}),this.countryList$=this.editForm.valueChanges.pipe(s(e=>e.country),S(100),C(),b(e=>this._country.countryList$.pipe(s(i=>i.filter(t=>e.length?e.length<3?t.ISO2.includes(e.trim().toUpperCase()):e.length===3?t.ISO3.includes(e.trim().toUpperCase()):t.CountryName.trim().toLocaleUpperCase().includes(e.trim().toLocaleUpperCase()):!1)),s(i=>(this.countryInfo=i[0],i.slice(0,5).map(t=>({name:t.ISO2+" - "+t.ISO3+" - "+t.CountryName+" - "+t._id})))))))}onSubmit(){let e=this.editForm.value.datecode,i="",t=0;this.countryInfo?(i=this.countryInfo.ISO3,t=this.countryInfo._id):[,i,,t]=this.editForm.value.country.split(" - "),!(!Number(t)||!i)&&this.clickSubmit.emit({ISO3:i,countryID:Number(t),datecode:e})}onCancel(){this.clickCancel.emit()}};r.\u0275fac=function(i){return new(i||r)(p(j),p(Y),p(W))},r.\u0275cmp=I({type:r,selectors:[["edit-info"]],inputs:{ISO3:"ISO3",datecode:"datecode"},outputs:{clickSubmit:"clickSubmit",clickCancel:"clickCancel"},standalone:!0,features:[E],decls:20,vars:7,consts:[["id","edit-modal",1,"absolute","left-0","top-0","z-50","grid","h-full","w-full","grid-cols-1","grid-rows-1","place-items-center","bg-gray-400","bg-opacity-30","text-white"],[1,"relative","h-full","w-4/5","text-lg","md:h-auto","md:w-2/3","lg:w-1/2"],[1,"relative","rounded-lg","bg-white","shadow"],[1,"p-6",3,"formGroup","ngSubmit"],[1,"flex","gap-2","md:grid"],["for","datecode",1,"mb-0.5","font-bold","text-gray-700"],[1,"relative","grow"],["formControlName","datecode","id","datecode","type","text","autocomplete","off","placeholder","DateCode",1,"focus:shadow-outline","h-fit","w-full","appearance-none","rounded","border","px-3","py-2","leading-tight","text-gray-700","shadow","focus:outline-none"],["datecode",""],["class","italic text-red-500",4,"ngIf","ngIfElse"],["NonError",""],["for","country",1,"mb-0.5","block","font-bold","text-gray-700"],["controlName","country",3,"dataSource","formSubmit"],[1,"grid","h-16","grid-cols-3","gap-10","text-xl"],[3,"disabled"],[1,"col-start-3",3,"buttonClick"],[1,"italic","text-red-500"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"opacity-0"]],template:function(i,t){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),g("ngSubmit",function(){return t.onSubmit()}),n(4,"div",4)(5,"label",5),c(6," DateCode: "),a(),n(7,"div",6),h(8,"input",7,8),f(10,K,2,1,"div",9)(11,X,2,0,"ng-template",null,10,N),a(),n(13,"label",11),c(14," Country "),a(),n(15,"search-list-input",12),g("formSubmit",function(){return t.onSubmit()}),F(16,"async"),a()(),n(17,"div",13),h(18,"submit-button",14),n(19,"normal-button",15),g("buttonClick",function(){return t.onCancel()}),a()()()()()()),i&2){let u=y(12);d(3),l("formGroup",t.editForm),d(7),l("ngIf",t.editForm.get("datecode").invalid&&t.editForm.get("datecode").dirty)("ngIfElse",u),d(5),l("dataSource",w(16,5,t.countryList$)),d(3),l("disabled",t.editForm.invalid)}},dependencies:[T,O,k,D,R,$,L,V,U,A,B,G,P,z,q],encapsulation:2,changeDetection:0});let o=r;return o})();export{ft as a};
